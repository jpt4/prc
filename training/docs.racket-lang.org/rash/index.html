<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Rash: The Reckless Racket Shell</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Rash:<span class="mywbr"> &nbsp;</span> The Reckless Racket Shell</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Stability%29" class="tocviewlink" data-pltdoc="x">Stability</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Rash_.Guide%29" class="tocviewlink" data-pltdoc="x">Rash Guide</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Media%29" class="tocviewlink" data-pltdoc="x">Media</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Rash_.Reference%29" class="tocviewlink" data-pltdoc="x">Rash Reference</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Interactive_.Use%29" class="tocviewlink" data-pltdoc="x">Interactive Use</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Prompt_helpers%29" class="tocviewlink" data-pltdoc="x">Prompt helpers</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Demo_stuff_reference%29" class="tocviewlink" data-pltdoc="x">Demo stuff reference</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._.Code_and_.License%29" class="tocviewlink" data-pltdoc="x">Code and License</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Rash:<span class="mywbr"> &nbsp;</span> The Reckless Racket Shell</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Stability%29" class="tocsubseclink" data-pltdoc="x">Stability</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Rash_.Guide%29" class="tocsubseclink" data-pltdoc="x">Rash Guide</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._quoting_globs%29" class="tocsubseclink" data-pltdoc="x">quoting globs</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Rash_s_names_are_terrible__how_do_.I_rename_them_%29" class="tocsubseclink" data-pltdoc="x">Rash&rsquo;s names are terrible, how do I rename them?</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.How_does_the_underscore_work_%29" class="tocsubseclink" data-pltdoc="x">How does the underscore work?</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Media%29" class="tocsubseclink" data-pltdoc="x">Media</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Rash_.Reference%29" class="tocsubseclink" data-pltdoc="x">Rash Reference</a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._with-rash-config%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">with-<wbr></wbr>rash-<wbr></wbr>config</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._splicing-with-rash-config%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">splicing-<wbr></wbr>with-<wbr></wbr>rash-<wbr></wbr>config</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._rash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">rash</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._make-rash-transformer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">make-<wbr></wbr>rash-<wbr></wbr>transformer</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._cd%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">cd</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">run-<wbr></wbr>pipeline</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fmain..rkt%29._current-rash-top-level-print-formatter%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>rash-<wbr></wbr>top-<wbr></wbr>level-<wbr></wbr>print-<wbr></wbr>formatter</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Interactive_.Use%29" class="tocsubseclink" data-pltdoc="x">Interactive Use</a></td></tr><tr><td><span class="tocsublinknumber">5.1<tt>&nbsp;</tt></span><a href="#%28part._.Unicode_and_garbled_glyphs%29" class="tocsubseclink" data-pltdoc="x">Unicode and garbled glyphs</a></td></tr><tr><td><span class="tocsublinknumber">5.2<tt>&nbsp;</tt></span><a href="#%28part._.Interactive_functions__unstable_%29" class="tocsubseclink" data-pltdoc="x">Interactive functions (unstable)</a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fmain..rkt%29._result-n%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">result-<wbr></wbr>n</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._set-default-pipeline-starter%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>default-<wbr></wbr>pipeline-<wbr></wbr>starter!</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._set-default-line-macro%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>default-<wbr></wbr>line-<wbr></wbr>macro!</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fmain..rkt%29._current-prompt-function%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">current-<wbr></wbr>prompt-<wbr></wbr>function</span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Prompt_helpers%29" class="tocsubseclink" data-pltdoc="x">Prompt helpers</a></td></tr><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#%28part._.Styling_.Strings%29" class="tocsubseclink" data-pltdoc="x">Styling Strings</a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">create-<wbr></wbr>styled-<wbr></wbr>string</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._color-value~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">color-<wbr></wbr>value?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">create-<wbr></wbr>styled-<wbr></wbr>struct</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._styled-struct-~3estring%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">styled-<wbr></wbr>struct-<wbr></wbr>&gt;string</span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.2<tt>&nbsp;</tt></span><a href="#%28part._.Git_functions%29" class="tocsubseclink" data-pltdoc="x">Git functions</a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-root%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>root</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-branch%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>branch</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-has-untracked~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>has-<wbr></wbr>untracked?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-dirty~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>dirty?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-submodule-dirty~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>submodule-<wbr></wbr>dirty?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-remote-tracking~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>remote-<wbr></wbr>tracking?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-current-commit%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>current-<wbr></wbr>commit</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-behind%2Fahead-numbers%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>behind/<span class="mywbr"> &nbsp;</span>ahead-<wbr></wbr>numbers</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">git-<wbr></wbr>info</span></span></a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Demo_stuff_reference%29" class="tocsubseclink" data-pltdoc="x">Demo stuff reference</a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=map=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dfilter~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=filter=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._in-dir%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">in-<wbr></wbr>dir</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._val%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">val</span></a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._.Code_and_.License%29" class="tocsubseclink" data-pltdoc="x">Code and License</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._rash)"></a><a name="(mod-path._rash)"></a>Rash: The Reckless Racket Shell</h2><p>William Hatch &lt;<a href="mailto:william@hatch.uno">william@hatch.uno</a>&gt;</p><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">rash</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/rash" title="Install this package using `raco pkg install rash`"><span class="stt">rash</span></a></span></td></tr></table></p><p><span style="font-weight: bold">Rash</span>, <span style="font-style: italic">adj</span> 1.  Hurrying into action or assertion without due caution and regardless of prudence, hasty, reckless, precipitate.  &#8220;<span style="font-style: italic">A rash programmer is likely to produce shell scripts.</span>&#8221;</p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Stability&quot;">1<tt>&nbsp;</tt><a name="(part._.Stability)"></a>Stability</h3><p>Some things in Rash are not entirely stable.  However, things from the GPCE paper are all stable.  If any of them don&rsquo;t work at any point it&rsquo;s a bug.  Unstable things should all be labelled in the documentation.</p><p>Rash is definitely usable as an interactive shell/repl as well as for writing scripts, and I&rsquo;m anxious to hear feedback from more users to understand what they like and what can be improved.</p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Rash_Guide&quot;">2<tt>&nbsp;</tt><a name="(part._.Rash_.Guide)"></a>Rash Guide</h3><p>Rash is a shell language embedded in Racket.  It has a concrete syntax that is amenable to quick and easy interactions without lots of punctuation overhead.  It aims to allow shell-style interaction and programming to be freely mixed with more general-purpose Racket code.  Like shells you can use it as a day-to-day interface for computing, run programs, wire processes together, etc.  You can copy interactive code into a file and have a working script.  Then you can generalize from there.  However, you have access to all of Racket, its data structures, its libraries, its macro system, and its other DSLs as you make your scripts more general.  Also it allows shell-style process wrangling to be mixed with Racket code, pipelines of functions that pass objects, and much more.  You can gradually move between shell-style Rash code and more normal and general Racket code in different parts of a script, or throw verbatim interactions directly into existing programs as you explore the solution space.</p><p>Here follows a quick overview that assumes some knowledge of shell languages like Bash as well as Racket.</p><p><div class="SIntrapara">Rash can do the sorts of things you expect from shell languages, and a lot of cues for syntax have been taken from traditional Bourne-derived shells.  The following program works as you would expect.</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Note that Rash is not remotely Posix Shell compliant.</p></blockquote></blockquote></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">rash</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._cd%29%29" class="RktStxLink" data-pltdoc="x">cd</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">project-directory</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">echo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">How</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">many</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Racket</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">files</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">do</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">we</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">have?</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">*.rkt</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">wc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span></td></tr></table></blockquote><p><div class="SIntrapara">You can use Racket functions in pipelines.</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Note that <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=port-lib.html%23%2528def._%2528%2528lib._racket%252Fport..rkt%2529._port-%7E3estring%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">port-&gt;string</a></span> is part of the <span class="RktSym">racket/port</span> library, thus one must <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym">racket/port</span><span class="RktPn">)</span> before using it.</p></blockquote></blockquote></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">This</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">returns</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">hostname</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">as</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">string</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">in</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">all</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">caps</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">/etc/hostname</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=port-lib.html%23%2528def._%2528%2528lib._racket%252Fport..rkt%2529._port-%7E3estring%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">port-&gt;string</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-upcase%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string-upcase</a></span><span class="RktMeta"></span></td></tr></table></blockquote><p>Pipelines pass objects.  When a process pipeline segment is next to a function pipeline segment, it passes a port to the function segment.  When a function segment is followed by a process segment, the return value of the function segment is printed to the stdin of the process.</p><p>The |&gt;&gt; operator is like the |&gt; operator except that if it receives a port it converts it to a string automatically.  So the above example can be simplified as:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">/etc/hostname</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-upcase%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string-upcase</a></span><span class="RktMeta"></span></td></tr></table></blockquote><p>You can also make pipelines composed entirely of Racket functions.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._directory-list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">directory-list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">file-&gt;string</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Pipelines always start with an operator, and if none is specified the <span class="RktSym">default-pipeline-starter</span> is inserted.  Pipeline operators are user-definable with <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._define-pipeline-operator%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-pipeline-operator</a></span>.  Defining new operators can help make common patterns shorter, simpler, and flatter.  For instance the <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="RktStxLink" data-pltdoc="x">=map=</a></span> operator wraps the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span> function, allowing you to specify just the body of a lambda.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">=map=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">in</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">demo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">file</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">still</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rash/demo/setup</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">These</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">two</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">are</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">same.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym">x</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta">)</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="RktStxLink" data-pltdoc="x">=map=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Pipeline operators are macros, and therefore can play any of the tricks that macros generally can in Racket.  The | operator can auto-quote symbols, turn asterisks into glob expansion code, etc.  The |&gt; operator can detect whether the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._current-pipeline-argument%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">current-pipeline-argument</a></span> is used and insert it automatically.</p><p>If you put parentheses in the middle of a pipeline, you escape to normal Racket code.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">This</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">will</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">either</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">show</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">hidden</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">files</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">or</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">give</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">long</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">listing</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._even%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">even?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._random%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta">)</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><span class="nobreak">-a</span></span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><div class="SIntrapara">Lines of code in Rash are command pipelines by default, but there are key words called <span class="RktSym">line-macro</span>s that can change the behavior arbitrarily.
</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Line-macros can be used to make C-like control-flow forms like for, try/catch, etc, to make one-off non-pipeline forms like <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._cd%29%29" class="RktStxLink" data-pltdoc="x">cd</a></span>, or even to make entirely new and different line-oriented languages.</p></blockquote></blockquote></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">in-dir</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">in</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">demo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">file</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">still</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rash/demo/setup</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._in-dir%29%29" class="RktStxLink" data-pltdoc="x">in-dir</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$HOME/project</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">make</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">clean</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>For instance, <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._in-dir%29%29" class="RktStxLink" data-pltdoc="x">in-dir</a></span> executes code with <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span> parameterized based on its first argument.  Note that logical rash lines don&rsquo;t necessarily line-up with physical lines.  Newlines can be escaped with a backslash, commented out with multiline comments, and if they are inside parentheses or braces they are handled by the recursive read.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym">echo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">This</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">\</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">all</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">#|</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">|#</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">one</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">"logical"</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">"line"</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Braces trigger a recursive line-mode read.  They are available in line-mode as well as in the embedded s-expression mode.  So they can be used to create blocks in line-mode as with the above <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._in-dir%29%29" class="RktStxLink" data-pltdoc="x">in-dir</a></span> example, or be used to escape from the s-expression world to line-mode.</p><p>Note that subprocess pipelines are connected to stdout and stdin in the REPL and at the top level of <span class="stt">#lang rash</span>.  The most common thing you want when embedding some Rash code is for subprocess output to be converted to a string.  Using <span class="RktPn">#{</span><span class="RktPn">}</span><span class="RktMeta"></span> switches to line-mode with defaults changed so that subprocess output is converted to a string and passed through <span class="RktSym">string-trim</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">#%hash-braces</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">is</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">provided</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">by</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">demo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">library</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">right</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">now...</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rash/demo/setup</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">I</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">do</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">this</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">lot</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">I</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">don't</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">remember</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">what</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">script</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">does</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">cat</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">#</span><span class="RktMeta">{</span><span class="RktSym">which</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">my-script.rkt</span><span class="RktMeta">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p>TODO - how to more generally parameterize such settings.</p><p>Every line in Rash is actually a line-macro.  If a line does not start with a line-macro name explicitly, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=linea&amp;rel=index.html%23%2528form._%2528%2528lib._linea%252Fdefaults..rkt%2529._%7E23%7E25linea-default-line-macro%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%linea-default-line-macro</a></span> is inserted.  By default this is <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> in Rash.</p><p>TODO - actually the default is run-pipeline/logic, which I haven&rsquo;t documented yet, which adds &amp;&amp; and ||.</p><p>You can also write normal parenthesized Racket code.  If the first (non-whitespace) character on a line is an open parenthesis, the line is read as normal Racket code and no line-macro is inserted.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">flag</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$flag</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Note that practically all Racket code starts with an open-paren, so Rash is almost a superset of normal Racket.  The only thing lost is top-level non-parenthesized code, which is really only useful to see the value of a variable.  Most programs in <span class="stt">#lang racket/base</span> could be switched to <span class="stt">#lang rash</span> and still function identically, and I never launch the Racket repl anymore because rash-repl is both a shell and a full Racket repl.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1234</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">Now</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">let's</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">see</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">x.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">We</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">can't</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">just</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">write</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">`x`,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">but</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">we</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">can</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">do</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">any</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">these:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">echo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$x</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rash/demo/setup</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Avoiding line-macros by starting with a paren causes an annoying inconsistency &ndash; you can&rsquo;t have a line-macro auto-inserted if the first argument to the line macro is a parenthesized form.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">We</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">want</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">to</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">choose</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">compiler</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">at</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">runtime.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">use-clang?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">clang</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">gcc</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-o</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prog.c</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">If</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">we</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">leave</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">off</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">line-macro</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">name,</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">it</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">will</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">not</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">be</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">inserted</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">because</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">the</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">line</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">starts</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">with</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">parenthesis.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">This</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">will</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">probably</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">cause</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">an</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">error!</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">use-clang?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">clang</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">gcc</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-o</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prog</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prog.c</span><span class="RktMeta"></span></td></tr></table></blockquote><p>This problem can be fixed by prepending the line-macro name or by using [square] brackets instead of parentheses.  The issue doesn&rsquo;t come up much in practice, and it&rsquo;s a small sacrifice for the convenience of having both normal Racket s-expressions and Rash lines.</p><p>Rash is primarily a combination of two libraries &ndash;
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=linea&amp;rel=index.html&amp;version=7.4" class="Sq" data-pltdoc="x">Linea: line oriented reader</a>,
which will explain the details of the line-oriented concrete syntax, and the
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html&amp;version=7.4" class="Sq" data-pltdoc="x">Pipeline Macro Library</a>,
which will explain the details of the <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> macro and pipeline operators.
You should read their documentation as well if you want a more thorough understanding or Rash.</p><p>What else belongs in a quick overview?  Pipelines with failure codes don&rsquo;t fail silently &ndash; they raise exceptions.  More fine-grained behavior can be configured per-pipeline, or using aliases (eg. whether other exit codes besides 0 are successful, whether to check for success in subprocesses in the middle of a pipeline, etc).  There are probably more things I should say.  But probably the best way forward from here is to read the <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> macro documentation.</p><p>You can define aliases with <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._define-pipeline-alias%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-pipeline-alias</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._define-simple-pipeline-alias%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-simple-pipeline-alias</a></span>.  Aliases are currently supported only by <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dunix-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=unix-pipe=</a></span>, though I may change that.  Aliases basically bypass the pipe itself &ndash; basically so you can have <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dunix-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=unix-pipe=</a></span> be the default operator but have a set of key-words that bypass it for a different operator without having to write the operator when it&rsquo;s in starting position.  And to be able to define aliases that are a little more familiar to people.</p><p>You can access environment variables with <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=envvars.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._getenv%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">getenv</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=envvars.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._putenv%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">putenv</a></span>, or by accessing the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=envvars.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-environment-variables%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-environment-variables</a></span> parameter.  Individual pipelines should have some sugar to set environment variables more conveniently, but I haven&rsquo;t added that yet.  Also, the dollar escapes done by <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dunix-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=unix-pipe=</a></span> access environment variables instead of normal lexical variables if you use a variable name in ALL CAPS.</p><p>Also, for those who just want to pipeline subprocesses in a Racket program using a lispy syntax, you probably want the shell/pipeline library, a basic component of Rash that can be used on its own:
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline.html&amp;version=7.4" class="Sq" data-pltdoc="x">Basic Unix-style Pipelines</a></p><p>While you can use Rash as a #lang, you can also just use the bindings it exports via <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._rash%29%29" class="RktStxLink" data-pltdoc="x">rash</a></span><span class="RktPn">)</span>.  Note that requiring the rash module will not affect the reader, so the line-oriented syntax will not be available unless you take steps to use it too (IE use the Linea reader, or use the <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._rash%29%29" class="RktStxLink" data-pltdoc="x">rash</a></span> macro).</p><p>Here are some miscellaneous little sections I am adding off-the-cuff based on discussions until I rewrite the whole Rash Guide to be better.</p><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;quoting_globs&quot;">2.1<tt>&nbsp;</tt><a name="(part._quoting_globs)"></a>quoting globs</h4><p>How do you stop globs and dollars from expanding without putting them in parenthesized forms?  Quote them.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">"*.rkt"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">literally</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">echo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">*.rkt</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">;;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">"$HOME"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">literally</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">echo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktMeta">"$HOME"</span></td></tr></table></blockquote><p>TODO - I need a better documentation section on globbing generally.</p><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Rash_s_names_are_terrible__how_do_I_rename_them_&quot;">2.2<tt>&nbsp;</tt><a name="(part._.Rash_s_names_are_terrible__how_do_.I_rename_them_)"></a>Rash&rsquo;s names are terrible, how do I rename them?</h4><p>Line macros (like <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._cd%29%29" class="RktStxLink" data-pltdoc="x">cd</a></span>), pipeline operators (like <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">\|&gt;</a></span>), and pipeline option flags (like <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E26%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&amp;&gt;</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E26bg%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&amp;bg</a></span>) are all macros, so you can rename them with <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-rename-transformer%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">make-rename-transformer</a></span>:</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3e%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-rename-transformer%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">make-rename-transformer</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E26%7E3e%2521%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&amp;&gt;!</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;How_does_the_underscore_work_&quot;">2.3<tt>&nbsp;</tt><a name="(part._.How_does_the_underscore_work_)"></a>How does the underscore work?</h4><p>The <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> identifier is short for <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._current-pipeline-argument%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">current-pipeline-argument</a></span>.
It is actually a syntax parameter that pipeline operators can make mean whatever they want.  So there isn&rsquo;t one single thing that it means.  But there is a convention.</p><p>Probably the best way to explain <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> is to start with the most basic
pipeline operator that uses it, which is called
<span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dbasic-object-pipe%252Fexpression%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=basic-object-pipe/expression=</a></span>.
The name is terrible, and it should probably have a short name like <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">\|</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">\|&gt;</a></span> do.  But I haven&rsquo;t decided what yet.  Suggestions appreciated.</p><p><div class="SIntrapara">For now let&rsquo;s call it =bop/e=.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym">=bop/e=</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-rename-transformer%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">make-rename-transformer</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dbasic-object-pipe%252Fexpression%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=basic-object-pipe/expression=</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>=bop/e= takes an expression that (probably) contains <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span>.  And it uses
it as the body of a function where <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> is the argument.  Unless it is in
the first part of the pipeline, in which case <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> is an error.
Actually, it&rsquo;s not a bad operator in start position &ndash; it is like
<span class="stt">cat</span> for racket values.</p><p><div class="SIntrapara">So:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym">=bop/e=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=bop/e=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara">is like
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></p></blockquote></div></p><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dbasic-object-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=basic-object-pipe=</a></span>, or <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">\|&gt;</a></span>, basically unwraps a layer of parentheses
and lets <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> be implicit when it is at the end of the pipeline.  So the
following two pipelines are the same as the above.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym">=bop/e=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">6</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">=bop/e=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">6</span><span class="RktMeta"></span></td></tr></table></blockquote><p>But you can also explicitly place the underscore elsewhere.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym">=bop/e=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">5</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">6</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Then <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dobject-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=object-pipe=</a></span> (or <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">\|&gt;&gt;</a></span>) is the same, except that it automatically detects ports and turns them into strings.</p><p>Other operators like <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="RktStxLink" data-pltdoc="x">=map=</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dfilter~3d%29%29" class="RktStxLink" data-pltdoc="x">=filter=</a></span> place <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> like <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">\|&gt;</a></span> does, but instead of standing for the whole object received from the previous pipeline stage, it stands for an element of the object received (which must be a list).</p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Media&quot;">3<tt>&nbsp;</tt><a name="(part._.Media)"></a>Media</h3><p>A preprint of an academic paper about Rash is available <a href="http://willghatch.net/publications/rash-gpce-2018-preprint.pdf">here</a>.
It is much better documentation than the Rash guide, currently.</p><p>I made a quick demo recording of an interactive repl that is on <a href="https://rash-lang.org">the project website</a>.</p><p>Also I gave a talk at RacketCon 2017 about it, which can be viewed
<a href="https://www.youtube.com/watch?v=yXcwK3XNU3Y&amp;index=13&amp;list=PLXr4KViVC0qIgkwFFzM-0we_aoOfAl16Y">here</a>, though it is outdated.
There have been various changes since the talk was given, but the core ideas are the same.  The biggest change since then is that embedding the line-syntax is encouraged with braces in the Linea syntax rather than string embedding.</p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Rash_Reference&quot;">4<tt>&nbsp;</tt><a name="(part._.Rash_.Reference)"></a>Rash Reference</h3><p>Note that all the pipeline things (<span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span>,
<span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dunix-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=unix-pipe=</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dobject-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=object-pipe=</a></span>,
<span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._define-pipeline-operator%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-pipeline-operator</a></span>, etc) are documented in the
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html&amp;version=7.4" class="Sq" data-pltdoc="x">Pipeline Macro Library</a>
module.</p><p>All the things about reading and line-macros (<span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=linea&amp;rel=index.html%23%2528form._%2528%2528lib._linea%252Fline-macro..rkt%2529._define-line-macro%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-line-macro</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=linea&amp;rel=index.html%23%2528form._%2528%2528lib._linea%252Fdefaults..rkt%2529._%7E23%7E25linea-line%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%linea-line</a></span>, etc) are documented in the
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=linea&amp;rel=index.html&amp;version=7.4" class="Sq" data-pltdoc="x">Linea: line oriented reader</a>
module.</p><p>TODO: document forms for configuring Rash besides the rash macro, document forms for creating customized versions of #lang rash (including reader modifications, default line-macro and pipeline operator, bindings available...), etc</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._with-rash-config))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._with-rash-config%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">with-rash-config</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">options</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Configures the defaults for various options, and runs the body.</div></p><p>Options:</p><p><span class="RktPn">#:out</span> sets the default output port or transformer for unix pipelines (as run by <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span>).  The default runs <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=port-lib.html%23%2528def._%2528%2528lib._racket%252Fport..rkt%2529._port-%7E3estring%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">port-&gt;string</a></span> on the output.  <span style="font-weight: bold">Note</span> that a custom output transformer should close the received port!</p><p><span class="RktPn">#:in</span> sets the default input port for unix pipelines (as run by <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span>).  The default is an empty port.</p><p><span class="RktPn">#:err</span> sets the default error port for unix pipelines (as run by <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span>).  The default is to turn the errors into a string that is put into the exception generated by an error in the pipeline.</p><p><span class="RktPn">#:starter</span> sets the default starting pipeline operator for <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> when one is not explicitly given in the pipeline.  The default is <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dunix-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=unix-pipe=</a></span>.</p><p><span class="RktPn">#:line-macro</span> sets the default line-macro for lines that don&rsquo;t explicitly have one.  The default is the <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> line-macro.</p><p>Note that in, out, and err are evaluated once for each pipeline run in the body.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._splicing-with-rash-config))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._splicing-with-rash-config%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">splicing-with-rash-config</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">options</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The same as <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._with-rash-config%29%29" class="RktStxLink" data-pltdoc="x">with-rash-config</a></span>, but splicing a la <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=splicing.html%23%2528form._%2528%2528lib._racket%252Fsplicing..rkt%2529._splicing-let-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">splicing-let-syntax</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._rash))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._rash%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">rash</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">options</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">codestring</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Read <span class="RktVar">codestring</span> as rash code.  Note that this happens during macro expansion, not at runtime.  This is useful to switch to Rash code in a module that uses a different reader.</div></p><p>Options:</p><p>The options are the same as <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._with-rash-config%29%29" class="RktStxLink" data-pltdoc="x">with-rash-config</a></span>.</p><p>TODO - options for changing the reader, etc.</p><p>Note that the input/output/error-output have different defaults for the rash macro than for the #lang or repl.</p><p><span style="font-weight: bold">Unstable.

I don&rsquo;t want to commit to this, yet.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._make-rash-transformer))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._make-rash-transformer%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">make-rash-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">options</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This takes all the same options as <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._rash%29%29" class="RktStxLink" data-pltdoc="x">rash</a></span>, but doesn&rsquo;t take a code string.  It produces a transformer like <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._rash%29%29" class="RktStxLink" data-pltdoc="x">rash</a></span>, but with different default values for the available options.</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-rash</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._make-rash-transformer%29%29" class="RktStxLink" data-pltdoc="x">make-rash-transformer</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:starter</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E3dbasic-object-pipe%7E3d%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">=basic-object-pipe=</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p><span style="font-weight: bold">Unstable.

I don&rsquo;t want to commit to this, yet.</span></p><p>Note that the default #lang rash has its input/output/error-output as stdin/stdout/stderr, which is different than the rash macro.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>line-macro</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._cd))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._cd%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">cd</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">directory</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Change <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span> to given directory.  The directory is quoted, so just put a literal path or a string.</div></p><p>If no argument is given, it changes to the user&rsquo;s home directory.</p><p><span style="font-weight: bold">Unstable.

The current version does dollar and tilde expansion, and the way that works may change in the future.

Additionally, I may add support for things like <span class="stt">cd -</span> a la bash and friends, as well as more general directiory history tracking.  But I&rsquo;m not really sure yet.

But basic <span class="stt">cd my-directory</span> type stuff will definitely keep working the same.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>line-macro</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._run-pipeline))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">run-pipeline</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Same as <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._run-pipeline%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">shell/pipeline-macro/run-pipeline</a></span>, except wrapped as a line-macro.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/main..rkt)._current-rash-top-level-print-formatter))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fmain..rkt%29._current-rash-top-level-print-formatter%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-rash-top-level-print-formatter</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: rash | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fmain..rkt%29._current-rash-top-level-print-formatter%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-rash-top-level-print-formatter</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">formatter</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">formatter</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Determines how expressions at the top of #lang rash modules (IE forms that aren&rsquo;t definitions) and expressions in the Rash REPL are printed.  Note that it doesn&rsquo;t actually do the printing &ndash; it returns a string, which is then printed by the implicit printing wraps at the top of a module or (probably) by the <span class="RktSym">current-prompt-function</span>.</div></p><p>The default takes the result out of terminated pipelines to print rather than the pipeline object itself.  I plan to change the default.  But the idea of having this parameter is that you can set up your repl to print things in a more useful way, and then have it print the same way in a #lang rash script.</p><p><span style="font-weight: bold">Unstable: the way things are printed may change.</span></p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Interactive_Use&quot;">5<tt>&nbsp;</tt><a name="(part._.Interactive_.Use)"></a>Interactive Use</h3><p>You can run the repl by running <span class="RktSym">racket</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rash/repl</span><span class="RktMeta"></span>.  An executable named <span class="RktSym">rash-repl</span><span class="RktMeta"></span> is installed in Racket&rsquo;s bin directory, so if you have it on your path you can run <span class="RktSym">rash-repl</span><span class="RktMeta"></span> instead.</p><p><span style="font-weight: bold">Unstable:
Various details of the repl will change over time.

But that basically just means the repl will get cooler over time.

The biggest change to come is that at some point the line-editor will be swapped out.</span></p><p>Note that in the repl the default input/output/error-output are to the stdin/out/err connected to the terminal unless you change them.  This is different than the rash macro, and allows you to do things like run curses programs that have access to terminal ports.</p><p>The repl can be customized with rc files.
First, if $HOME/.config/rash/rashrc.rkt exists, it is required at the top level of the REPL.  Then, if $HOME/.config/rash/rashrc (note the lack of .rkt) exists, it is evaluated at the top level more or less as if typed in (much like rc files for bash and friends).  Note that <span class="stt">rashrc.rkt</span> files are modules, can be in any #lang, and get all the normal and good compilation guarantees that Racket modules enjoy.  <span class="stt">rashrc</span> is NOT a module, and gets none of them.  <span class="stt">rashrc</span> is mainly there to let you muck up the namespace that you use interactively.  Prefer <span class="stt">rashrc.rkt</span>.</p><p>Note that &#8220;the top-level is hopeless&#8221;.  This applies to the Rash REPL as well as <span class="stt">rashrc</span> files.  But the hopelessness is mostly to do with defining macros, particularly complicated macros such as mutually recursive or macro-defining macros.  So the hopelessness doesn&rsquo;t affect the types of things most people are likely to do in a shell.  But if you don&rsquo;t remember that, you might put &#8220;hopeless&#8221; things in a <span class="stt">rashrc</span> file.  Don&rsquo;t.  Put it in a module like <span class="stt">rashrc.rkt</span> (or any other module or library you make).  (For more hopelessness, see <a href="https://gist.github.com/samth/3083053">this</a>.)</p><p>A few nice things (like stderr highlighting) are in a demo-rc file you can require.  To do so, add this to $HOME/.config/rash/rashrc:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(require rash/demo/demo-rc)</span></p></td></tr></table></p><p>(Rash actually follows the XDG basedir standard &ndash; you can have rashrc.rkt or rashrc files in any directory of $XDG_CONFIG_HOME or $XDG_CONFIG_DIRS, and the rash repl will load all of them)</p><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Unicode_and_garbled_glyphs&quot;">5.1<tt>&nbsp;</tt><a name="(part._.Unicode_and_garbled_glyphs)"></a>Unicode and garbled glyphs</h4><p>The repl uses the readline module for line-editing and completion.  The readline module by default uses libedit instead of the actual libreadline for licensing reasons.  Libedit doesn&rsquo;t seem to handle unicode properly.  Installing the readline-gpl package fixes that (<span class="stt">raco pkg install readline-gpl</span>).</p><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Interactive_functions__unstable_&quot;">5.2<tt>&nbsp;</tt><a name="(part._.Interactive_functions__unstable_)"></a>Interactive functions (unstable)</h4><p>All the following repl functions are not stable.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/main..rkt)._result-n))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><span class="RktSymDef RktSym">result-n</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._integer%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Only available in the repl.  Return the result of the <span class="RktVar">n</span>th interactive command.
<span style="font-weight: bold">Unstable.</span></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._set-default-pipeline-starter!))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><span class="RktSymDef RktSym">set-default-pipeline-starter!</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">new-starter</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Only available in the repl.
A line-macro that mutates the default pipeline starter used in the repl.
It&rsquo;s not really hygienic, so if you defined macros that used <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fmain..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> without an explicit starter, this will change the result of new calls to that macro.
Basically a hack to be able to set it since I haven&rsquo;t figured out a better way to do it yet, aside from maybe having people make their own repl modules that set some defaults, and I&rsquo;m not sure I like that plan.
Expect this to change eventually.</div></p><p><span style="font-weight: bold">Unstable.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/main..rkt)._set-default-line-macro!))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><span class="RktSymDef RktSym">set-default-line-macro!</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">new-line-macro</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Only available in the repl.
A line-macro that mutates the default line macro used in the repl.
It&rsquo;s not really hygienic.
Basically a hack to be able to set it since I haven&rsquo;t figured out a better way to do it yet, aside from maybe having people make their own repl modules that set some defaults, and I&rsquo;m not sure I like that plan.
Expect this to change eventually.</div></p><p><span style="font-weight: bold">Unstable.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/main..rkt)._current-prompt-function))"></a><span title="Provided from: rash | Package: rash"><span class="RktSym"><span class="RktSymDef RktSym">current-prompt-function</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: rash | Package: rash"><span class="RktSym"><span class="RktSymDef RktSym">current-prompt-function</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">prompt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prompt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">You can set this parameter to change the prompt.  The prompt is responsible for printing the result returned by whatever was last run as well as showing any information you want to see.  Right now I would just stick with the default, but I plan on making a nice library of useful functions to put in a prompt (eg. functions for displaying git information, path information with length pruning, ...), and have a way of easily connecting some prompt pieces to make something good (including a way to customize how results are displayed &ndash; I want to, for example, have types of objects that can be recognized to print tables nicely, etc).</div></p><p>The given function&rsquo;s arity is tested to see if it receives various keywords, so that the protocol can be extended and the user only has to specify the keywords that are needed for a given prompt.</p><p>Keywords optionally given:</p><p><span class="RktPn">#:last-return-value</span> - fairly self explanatory.  If multiple values were returned, they will be given as a list.  This will be <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span> for the prompt before the first command.  The default prompt function formats the return value with <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fmain..rkt%29._current-rash-top-level-print-formatter%29%29" class="RktValLink" data-pltdoc="x">current-rash-top-level-print-formatter</a></span> before printing it.</p><p><span class="RktPn">#:last-return-index</span> - This increments once for every command run in the repl.  It will be 0 for the prompt before the first command.  This is the index that can be used for <span class="RktSym">result-n</span> and <span class="RktSym">result-n</span>.  The default prompt function prints the number of the result before printing the result itself.</p><p><span style="font-weight: bold">Unstable.  I may change how this works.  But probably it actually is stable, I just don&rsquo;t want to commit to it yet, especially given that the entire line editor will eventually change.</span></p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Prompt_helpers&quot;">6<tt>&nbsp;</tt><a name="(part._.Prompt_helpers)"></a>Prompt helpers</h3><p>There are currently a few functions that can help you design a custom prompt.  Currently, they support things like changing foreground/background color and underlined text and getting git information, and they will be expanded in the future to include more useful ways of getting information for your prompt.</p><p><span style="font-weight: bold">Unstable.</span></p><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Styling_Strings&quot;">6.1<tt>&nbsp;</tt><a name="(part._.Styling_.Strings)"></a>Styling Strings</h4><p>These are some usefull functions for styling strings.</p><p>You can use them with <span class="stt">(require rash/prompt-helpers/string-style)</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/string-style..rkt)._create-styled-string))"></a><span title="Provided from: rash/prompt-helpers/string-style | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="RktValDef RktValLink" data-pltdoc="x">create-styled-string</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktVar">to-style</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:fg</span><span class="hspace">&nbsp;</span><span class="RktVar">foreground</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVar">background</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:bold?</span><span class="hspace">&nbsp;</span><span class="RktVar">bold?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:italic?</span><span class="hspace">&nbsp;</span><span class="RktVar">italic?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVar">underlined?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:reset-before?</span><span class="hspace">&nbsp;</span><span class="RktVar">reset-before?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:reset-after?</span><span class="hspace">&nbsp;</span><span class="RktVar">reset-after?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:custom-commands</span><span class="hspace">&nbsp;</span><span class="RktVar">custom-commands</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:create-function?</span><span class="hspace">&nbsp;</span><span class="RktVar">create-function?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">to-style</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">foreground</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._color-value~3f%29%29" class="RktValLink" data-pltdoc="x">color-value?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">background</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._color-value~3f%29%29" class="RktValLink" data-pltdoc="x">color-value?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bold?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">italic?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">underlined?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reset-before?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reset-after?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">custom-commands</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">create-function?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Produces a string with the specified styles.</div></p><p>The values given for <span class="RktVar">foreground</span> and <span class="RktVar">background</span> are treated the same.  If a string is given, it must either be the name of a 4 bit color, e.g. <span class="RktVal">"red"</span> or <span class="RktVal">"bright red"</span> for the high-intensity version, or start with the charachter "#" and represent a hexidecimal color code, e.g. <span class="RktVal">"#f2e455"</span> or <span class="RktVal">"#fff"</span>.  If a number is given, it is treated as a color code for a 8bit/256color color.  If a list is given, it is treated as an RGB value for a color, e.g. <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktVal">)</span> means black.  An object with <span class="RktSym">red</span>, <span class="RktSym">green</span>, and <span class="RktSym">blue</span> methods (like <span class="RktSym">color%</span>) can also be given, and are treated like RGB values. See <a href="https://stackoverflow.com/a/33206814/4530731">this</a> stack overflow answer for more information on ansi colors.</p><p>The values <span class="RktVar">bold?</span>, <span class="RktVar">italic?</span>, and <span class="RktVar">underlined?</span> do what you&rsquo;d expect them to.</p><p>If <span class="RktVar">reset-before?</span> is <span class="RktVal">#t</span>, then the ANSI escape sequence "\033[0m" will be added to the front of the string.  When <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span>ed, it has the effect of clearing all styles set by ANSI escape sequences before itself.  Similarily, if <span class="RktVar">reset-after?</span> is <span class="RktVal">#t</span>, the sequence "\033[0m" is appended to the end of the string.</p><p>The string <span class="RktVar">custom-commands</span> is placed right before <span class="RktVar">to-style</span>, so any styles in the form of ANSI escape sequences can be added overridden if desired.</p><p>If <span class="RktVar">create-function?</span> is <span class="RktVal">#t</span>, then a function is returned instead of a string.  This function takes 1 argument and places that argument where <span class="RktVar">to-style</span> would have went, and returns the resulting string.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>I cant display the actual colors here, but you can copy the resulting strings into a terminal and print them with <span class="stt">echo "string"</span> or display them using <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span> in a terminal window.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="RktValLink" data-pltdoc="x">create-styled-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"example"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fg</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">255</span><span class="hspace">&nbsp;</span><span class="RktVal">255</span><span class="hspace">&nbsp;</span><span class="RktVal">255</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"\e[0m\e[38;2;255;255;255m\e[41m\e[4mexample\e[0m"</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="RktValLink" data-pltdoc="x">create-styled-string</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"example"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fg</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">255</span><span class="hspace">&nbsp;</span><span class="RktVal">255</span><span class="hspace">&nbsp;</span><span class="RktVal">255</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:reset-before?</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"\e[38;2;255;255;255m\e[41m\e[4mexample\e[0m"</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">style-function</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="RktValLink" data-pltdoc="x">create-styled-string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:create-function?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">style-function</span><span class="hspace">&nbsp;</span><span class="RktVal">"I'm red!"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"\e[0m\e[41mI'm red!\e[0m"</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/string-style..rkt)._color-value~3f))"></a><span title="Provided from: rash/prompt-helpers/string-style | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._color-value~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">color-value?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Thoroughly determines whether <span class="RktVar">v</span> is a valid color argument.  See <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="RktValLink" data-pltdoc="x">create-styled-string</a></span> for valid color arguments.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/string-style..rkt)._create-styled-struct))"></a><span title="Provided from: rash/prompt-helpers/string-style | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValDef RktValLink" data-pltdoc="x">create-styled-struct</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">to-style</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktMeta">...</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:fg</span><span class="hspace">&nbsp;</span><span class="RktVar">foreground</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVar">background</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:bold?</span><span class="hspace">&nbsp;</span><span class="RktVar">bold?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:italic?</span><span class="hspace">&nbsp;</span><span class="RktVar">italic?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVar">underlined?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:reset-before?</span><span class="hspace">&nbsp;</span><span class="RktVar">reset-before?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:custom-commands</span><span class="hspace">&nbsp;</span><span class="RktVar">custom-commands</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:reset-customs?</span><span class="hspace">&nbsp;</span><span class="RktVar">reset-customs?</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">styled-struct?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">to-style</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._struct%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">struct?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">foreground</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._color-value~3f%29%29" class="RktValLink" data-pltdoc="x">color-value?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">default</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">background</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._color-value~3f%29%29" class="RktValLink" data-pltdoc="x">color-value?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">default</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bold?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">default</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">italic?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">default</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">underlined?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">default</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reset-before?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">custom-commands</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reset-customs?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Mostly the same as <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-string%29%29" class="RktValLink" data-pltdoc="x">create-styled-string</a></span>, except a structure with a list of strings/sub-structs and a style represented by a hash is produced.  This struct can be given to <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._styled-struct-~3estring%29%29" class="RktValLink" data-pltdoc="x">styled-struct-&gt;string</a></span> to turn it into a string.  An uninterned symbol is used as the <span class="RktSym">default</span> value for some of the optional arguments.  The function treats the <span class="RktSym">default</span> argument to mean "use the style the outer struct provides".</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"I'm green. "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Im green with red text."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fg</span><span class="hspace">&nbsp;</span><span class="RktVal">"red"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"green"</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">#&lt;styled-struct&gt;</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/string-style..rkt)._styled-struct-~3estring))"></a><span title="Provided from: rash/prompt-helpers/string-style | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._styled-struct-~3estring%29%29" class="RktValDef RktValLink" data-pltdoc="x">styled-struct-&gt;string</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ss</span><span class="hspace">&nbsp;</span>[<span class="RktVar">outer-style-hash</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ss</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">styled-struct?</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">outer-style-hash</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash?</a></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">#hash</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">foreground</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#f</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">background</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#f</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">bold?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#f</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">italic?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#f</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">underlined?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#f</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">reset-before?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#t</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">custom-commands</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">""</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">reset-customs?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#t</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Takes a structure produced by <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span>, and recursively produces a string from it.  If it finds another struct within <span class="RktVar">ss</span>, it will convert it to a string in it&rsquo;s position in <span class="RktVar">ss</span>, and will use the sub-struct&rsquo;s style properties to override <span class="RktVar">ss</span>&rsquo;s properties if specified.</div></p><p>If <span class="RktSym">reset-before?</span> is <span class="RktVal">#t</span> for a struct (within its style hash), that struct will ignore the styles provided by an outer struct.  If <span class="RktSym">reset-customs?</span> is <span class="RktVal">#t</span> for a struct, that struct will ignore custom commands given by its outer struct and only use it&rsquo;s own.</p><p><div class="SIntrapara">Examples (Sorry for the long strings):</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">example1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._styled-struct-~3estring%29%29" class="RktValLink" data-pltdoc="x">styled-struct-&gt;string</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"I'm green and hilighted blue."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Im still green but higighted yellow and underlined."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"yellow"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">" I'm green and hilighted blue again (and not underlined)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fg</span><span class="hspace">&nbsp;</span><span class="RktVal">"green"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._regexp-split%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp-split</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#px"\\."</span><span class="hspace">&nbsp;</span><span class="RktSym">example1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">so it fits on the screen</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">'("\e[0m\e[32m\e[44mI'm green and hilighted blue"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\e[0m\e[32m\e[43m\e[4mIm still green but higighted yellow and underlined"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\e[0m\e[0m\e[32m\e[44m I'm green and hilighted blue again (and not underlined)\e[0m")</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">example2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._styled-struct-~3estring%29%29" class="RktValLink" data-pltdoc="x">styled-struct-&gt;string</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:bg</span><span class="hspace">&nbsp;</span><span class="RktVal">"blue"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Underlined."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:underlined?</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Not underlined."</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Underlined."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fstring-style..rkt%29._create-styled-struct%29%29" class="RktValLink" data-pltdoc="x">create-styled-struct</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:reset-before?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._regexp-split%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp-split</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#px"\\."</span><span class="hspace">&nbsp;</span><span class="RktSym">example2</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">'("\e[0m\e[44m\e[4mUnderlined"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\e[0m\e[44mNot underlined"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\e[0m\e[0m\e[44m\e[4mUnderlined"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\e[0m\n\e[0m\e[0m")</span></p></td></tr></table></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Git_functions&quot;">6.2<tt>&nbsp;</tt><a name="(part._.Git_functions)"></a>Git functions</h4><p>There are also some useful functions that help gather git information.</p><p><span style="font-weight: bold">Remember &ndash; these functions are unstable, and may change.</span></p><p>You can use them with <span class="stt">(require rash/prompt-helpers/git-info)</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-root))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-root%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-root</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the git root directory of <span class="RktVar">dir</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-branch))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-branch%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-branch</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the current branch of <span class="RktVar">dir</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-has-untracked~3f))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-has-untracked~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-has-untracked?</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Determines if current branch has untracked files.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-dirty~3f))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-dirty~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-dirty?</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Determines whether there are uncommited changes (staged or unstaged) to tracked files in the current branch of the git repository containing <span class="RktVar">dir</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-submodule-dirty~3f))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-submodule-dirty~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-submodule-dirty?</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Determines whether there are uncommited changes within submodules of the git repository that contains <span class="RktVar">dir</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-remote-tracking~3f))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-remote-tracking~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-remote-tracking?</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Determines if current branch is tracking a remote branch.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-current-commit))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-current-commit%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-current-commit</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Return the current commit.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-behind/ahead-numbers))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-behind%2Fahead-numbers%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-behind/ahead-numbers</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a list with the number of commits behind and ahead, in that order, that the current branch is in relation to its corresponding upstream branch.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rash/prompt-helpers/git-info..rkt)._git-info))"></a><span title="Provided from: rash/prompt-helpers/git-info | Package: rash"><span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">git-info</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">dir</span><span class="hspace">&nbsp;</span><span class="RktPn">#:timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">timeout</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._positive%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">positive?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0.25</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a hash with info from above git functions that finished executing within <span class="RktVar">timeout</span> seconds.</div></p><p><div class="SIntrapara">The hash contains the following key-value pairs if all operations complete before the timeout:
</div><div class="SIntrapara"><ul><li><p><span class="RktVal">'</span><span class="RktVal">root</span> to the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-root%29%29" class="RktValLink" data-pltdoc="x">git-root</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">branch</span> to the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-branch%29%29" class="RktValLink" data-pltdoc="x">git-branch</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">untracked?</span> to the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-has-untracked~3f%29%29" class="RktValLink" data-pltdoc="x">git-has-untracked?</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">dirty?</span> to the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-dirty~3f%29%29" class="RktValLink" data-pltdoc="x">git-dirty?</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">submodule-dirty?</span> to the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-submodule-dirty~3f%29%29" class="RktValLink" data-pltdoc="x">git-submodule-dirty?</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">remote-tracking?</span> to the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-remote-tracking~3f%29%29" class="RktValLink" data-pltdoc="x">git-remote-tracking?</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">behind</span> to the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._car%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">car</a></span> of the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-behind%2Fahead-numbers%29%29" class="RktValLink" data-pltdoc="x">git-behind/ahead-numbers</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">ahead</span> to the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cadr%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">cadr</a></span> of the result of <span class="RktSym"><a href="#%28def._%28%28lib._rash%2Fprompt-helpers%2Fgit-info..rkt%29._git-behind%2Fahead-numbers%29%29" class="RktValLink" data-pltdoc="x">git-behind/ahead-numbers</a></span></p></li><li><p><span class="RktVal">'</span><span class="RktVal">timeout?</span> to <span class="RktVal">#t</span> if the operation timed out before gathering all data, otherwise <span class="RktVal">#f</span></p></li></ul></div></p><p>If the timeout is reached before all information is gathered, the hash is returned with only those elements that were completed.</p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Demo_stuff_reference&quot;">7<tt>&nbsp;</tt><a name="(part._.Demo_stuff_reference)"></a>Demo stuff reference</h3><p><span style="font-weight: bold">Nothing in the demo directory is remotely stable!  It can all change or go away at any moment.</span></p><p>I&rsquo;ve written various pipeline operators and line macros that I use, but I haven&rsquo;t decided what should be in the default language yet.  So for now they are sitting in a demo directory.  But I need some examples.  So here I&rsquo;m documenting a bit.</p><p>Use it with <span class="stt">(require rash/demo/setup)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/demo/setup..rkt)._~3dmap~3d))"></a><span title="Provided from: rash/demo/setup | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=map=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Sugar to flatten mapping.</div></p><p>Eg.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="RktStxLink" data-pltdoc="x">=map=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara">is equivalent to
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym">x</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta">)</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">4</span><span class="RktMeta">)</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><p>The <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> argument is appended to <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dmap~3d%29%29" class="RktStxLink" data-pltdoc="x">=map=</a></span>&rsquo;s argument list if it is not written explicitly.</p><p><span style="font-weight: bold">Unstable in that it will probably be moved into the default rash module rather than the demo module.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/demo/setup..rkt)._~3dfilter~3d))"></a><span title="Provided from: rash/demo/setup | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dfilter~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=filter=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Sugar to flatten filtering.</div></p><p>Eg.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529._%7E7c%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">|&gt;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">4</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dfilter~3d%29%29" class="RktStxLink" data-pltdoc="x">=filter=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._even%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">even?</a></span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara">is equivalent to
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._filter%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">filter</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym">x</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._even%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">even?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta">)</span><span class="RktMeta">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">4</span><span class="RktMeta">)</span><span class="RktMeta">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><p>The <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=shell-pipeline&amp;rel=pipeline-macro.html%23%2528form._%2528%2528lib._shell%252Fpipeline-macro..rkt%2529.__%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">_</a></span> argument is appended to <span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._~3dfilter~3d%29%29" class="RktStxLink" data-pltdoc="x">=filter=</a></span>&rsquo;s argument list if it is not written explicitly.</p><p><span style="font-weight: bold">Unstable in that it will probably be moved into the default rash module rather than the demo module.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>line-macro</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/demo/setup..rkt)._in-dir))"></a><span title="Provided from: rash/demo/setup | Package: rash"><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._in-dir%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">in-dir</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">directory</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Dollar and glob expands the <span class="RktVar">directory</span>, then executes the <span class="RktVar">body</span> with <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span> parameterized to the result of expanding <span class="RktVar">directory</span>.  If glob expansion returns multiple results, the body is executed once for each of them.</div></p><p>Eg.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._rash%2Fdemo%2Fsetup..rkt%29._in-dir%29%29" class="RktStxLink" data-pltdoc="x">in-dir</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$HOME/projects/*</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">make</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">clean</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">make</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">}</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span style="font-weight: bold">This is unstable in that the way it does globbing and dollar expansion may change, the way it handles globs that resolve to something that is not a directory may change, and it will probably be moved into the default rash module rather than the demo directory.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>line-macro</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rash/demo/setup..rkt)._val))"></a><span title="Provided from: rash/demo/setup | Package: rash"><span class="RktSym"><span class="RktSymDef RktSym">val</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Simply returns the <span class="RktVar">expression</span>.  This is just to work around not having access to top-level unparenthesized variables.</div></p><h3 x-source-module="(lib &quot;rash/scribblings/rash.scrbl&quot;)" x-source-pkg="rash" x-part-tag="&quot;Code_and_License&quot;">8<tt>&nbsp;</tt><a name="(part._.Code_and_.License)"></a>Code and License</h3><p>The code is available
<a href="https://github.com/willghatch/racket-rash">on github</a>.</p><p>This library is licensed under the terms of the LGPL version 3, or (at
your option) any later version published by the Free Software
Foundation (IE LGPL3+).</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>