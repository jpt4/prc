<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>html-writing: Writing HTML from SXML</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">html-<wbr></wbr>writing:<span class="mywbr"> &nbsp;</span> Writing HTML from SXML</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Foreign_.Filters%29" class="tocviewlink" data-pltdoc="x">Foreign Filters</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Low-.Level_.Writing%29" class="tocviewlink" data-pltdoc="x">Low-<wbr></wbr>Level Writing</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.High-.Level_.Writing%29" class="tocviewlink" data-pltdoc="x">High-<wbr></wbr>Level Writing</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Known_.Issues%29" class="tocviewlink" data-pltdoc="x">Known Issues</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.History%29" class="tocviewlink" data-pltdoc="x">History</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Legal%29" class="tocviewlink" data-pltdoc="x">Legal</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">html-<wbr></wbr>writing:<span class="mywbr"> &nbsp;</span> Writing HTML from SXML</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.H.T.M.L5_.Emphasis%29" class="tocsubseclink" data-pltdoc="x">HTML5 Emphasis</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._script_.Element%29" class="tocsubseclink" data-pltdoc="x">script Element</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Foreign_.Filters%29" class="tocsubseclink" data-pltdoc="x">Foreign Filters</a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._current-html-writing-foreign-filter%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">current-<wbr></wbr>html-<wbr></wbr>writing-<wbr></wbr>foreign-<wbr></wbr>filter</span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Low-.Level_.Writing%29" class="tocsubseclink" data-pltdoc="x">Low-<wbr></wbr>Level Writing</a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._write-html-attribute-value-part-string%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>html-<wbr></wbr>attribute-<wbr></wbr>value-<wbr></wbr>part-<wbr></wbr>string</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._write-html-attribute-value-part%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>html-<wbr></wbr>attribute-<wbr></wbr>value-<wbr></wbr>part</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._write-html-attributes%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>html-<wbr></wbr>attributes</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._xexp-~3ehtml-attribute-value-bytes%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xexp-<wbr></wbr>&gt;html-<wbr></wbr>attribute-<wbr></wbr>value-<wbr></wbr>bytes</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._write-html-decl%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>html-<wbr></wbr>decl</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._write-html-pi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>html-<wbr></wbr>pi</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.High-.Level_.Writing%29" class="tocsubseclink" data-pltdoc="x">High-<wbr></wbr>Level Writing</a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._write-html%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>html</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._xexp-~3ehtml%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xexp-<wbr></wbr>&gt;html</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._html-writing%2Fmain..rkt%29._xexp-~3ehtml-bytes%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xexp-<wbr></wbr>&gt;html-<wbr></wbr>bytes</span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Known_.Issues%29" class="tocsubseclink" data-pltdoc="x">Known Issues</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.History%29" class="tocsubseclink" data-pltdoc="x">History</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Legal%29" class="tocsubseclink" data-pltdoc="x">Legal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">4:0</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._html-writing__.Writing_.H.T.M.L_from_.S.X.M.L)"></a><a name="(mod-path._html-writing)"></a>html-writing: Writing HTML from SXML</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Neil Van Dyke</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara">License: <a href="#%28part._.Legal%29" class="plainlink" data-pltdoc="x">LGPLv3</a> <span class="hspace">&nbsp;</span> Web: <a href="http://www.neilvandyke.org/racket/html-writing/" class="plainlink">http://www.neilvandyke.org/racket/html-writing/</a>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">html-writing</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/html-writing" title="Install this package using `raco pkg install html-writing`"><span class="stt">html-writing</span></a></span></td></tr></table></div></p><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p><div class="SIntrapara">The <span style="font-weight: bold">html-writing</span> package provides support for writing HTML encoded as <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._sxml-intro%2Fsxml-intro..scrbl%29.%27._.%27top.%27%29%29&amp;version=7.4" class="Sq" data-pltdoc="x">SXML</a>.  It includes programmatic <span style="font-style: italic">foreign filter</span> handling of non-SXML objects, and support for faux HTML within <span class="stt">script</span> elements.</div><div class="SIntrapara">This can be used for hand-constructed HTML, for HTML constructed by
program, and for emitting HTML that has been read via the <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._html-parsing%2Fhtml-parsing..scrbl%29.%27._.%27top.%27%29%29&amp;version=7.4" class="Sq" data-pltdoc="x"><span style="font-weight: bold">html-parsing</span></a> package and then transformed.</div><div class="SIntrapara">For example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">write-html</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">head</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">title</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Title"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">@</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">bgcolor</span><span class="hspace">&nbsp;</span><span class="RktVal">"white"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"My Heading"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is a paragraph."</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"This is another paragraph."</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-output-port</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">produces the output:</div><div class="SIntrapara"><blockquote><p><span class="RktOut">&lt;html&gt;&lt;head&gt;&lt;title&gt;My Title&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor="white"&gt;&lt;h1&gt;My Heading&lt;/h1&gt;&lt;p&gt;This is a paragraph.&lt;/p&gt;&lt;p&gt;This isanother paragraph.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</span></p></blockquote></div><div class="SIntrapara">For a complementary way of writing HTML from SXML, see the <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._html-template%2Fhtml-template..scrbl%29.%27._.%27top.%27%29%29&amp;version=7.4" class="Sq" data-pltdoc="x"><span style="font-weight: bold">html-template</span></a> package.</div></p><h4 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;HTML5_Emphasis&quot;">1.1<tt>&nbsp;</tt><a name="(part._.H.T.M.L5_.Emphasis)"></a>HTML5 Emphasis</h4><p>This package will emphasize HTML5 behavior, now and in the future.
Historically, this code was written for HTML 4.x and earlier, and for XHTML.
XHTML is no longer supported.  Pre-HTML5 HTML will be supported for the
forseeable future, except when that conflicts with support for HTML5.</p><h4 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;script_Element&quot;">1.2<tt>&nbsp;</tt><a name="(part._script_.Element)"></a>script Element</h4><p>The HTML <span class="stt">script</span> element is handled specially, for compatibility with HTML5 and
pre-HTML5, as well as an aid for Ractive.js <span class="stt">type="text/ractive"</span>.  Specifically, when the content of the <span class="stt">script</span> element contains element SXML and other non-strings, those
non-strings are written as what we&rsquo;ll call &ldquo;CDATA faux HTML&ldquo;.  In this CDATA
faux HTML, strings are written <span style="font-style: italic">without</span> character entity escaping.  This permits, say, the script to be
some kind of template that looks like HTML and that contains bits of
JavaScript.  (We <span style="font-style: italic">don&rsquo;t</span> endorse Ractive.js, but supporting <span class="stt">script</span> in this way seemed sensible for other reasons, and helped a Racket
developer who happened to be using that framework.)</p><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;Foreign_Filters&quot;">2<tt>&nbsp;</tt><a name="(part._.Foreign_.Filters)"></a>Foreign Filters</h3><p><div class="SIntrapara">A foreign filter is a procedure that is called by the writing procedures
of this package when encountering an unrecognized object in the SXML.  For
one hypothetical use of this, consider the embedding of absolute URL objects in
some SXML, which are converted to relative URLs at time HTML is written.</div><div class="SIntrapara">The foreign filter procedure is called with two arguments: </div><div class="SIntrapara"><ul><li><p><span style="font-style: italic">context</span>, which is one the symbols <span class="RktVal">'</span><span class="RktVal">content</span>, <span class="RktVal">'</span><span class="RktVal">attribute</span>, or <span class="RktVal">'</span><span class="RktVal">attribute-value</span>.</p></li><li><p><span style="font-style: italic">object</span>, which is the foreign object.</p></li></ul></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._current-html-writing-foreign-filter))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">current-html-writing-foreign-filter</span></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">html-writing-foreign-filter?</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">current-html-writing-foreign-filter</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ff</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ff</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">html-writing-foreign-filter?</span></td></tr></table></blockquote></div><div class="SIntrapara">Parameter for the foreign filter to use.</div></p><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;Low-Level_Writing&quot;">3<tt>&nbsp;</tt><a name="(part._.Low-.Level_.Writing)"></a>Low-Level Writing</h3><p><div class="SIntrapara">This section lists some low-level writing procedures that are
currently provided for historical reasons, and should be considered deprecated
for now.</div><div class="SIntrapara">The two most common procedures for writing HTML from an SXML
representation are the high-level <span class="RktSym">write-html</span> and <span class="RktSym">xexp-&gt;html</span>, described in the next section.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._write-html-attribute-value-part-string))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">write-html-attribute-value-part-string</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">str</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">out</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-port?</span></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._write-html-attribute-value-part))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">write-html-attribute-value-part</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-port?</span></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._write-html-attributes))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">write-html-attributes</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">attr-or-list</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">attr-or-list</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-port?</span></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._xexp-~3ehtml-attribute-value-bytes))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">xexp-&gt;html-attribute-value-bytes</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">xexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">xexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._write-html-decl))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">write-html-decl</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._write-html-pi))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">write-html-pi</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.</div></p><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;High-Level_Writing&quot;">4<tt>&nbsp;</tt><a name="(part._.High-.Level_.Writing)"></a>High-Level Writing</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._write-html))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">write-html</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">xexp</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">xexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xexp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-port?</span></td></tr></table></blockquote></div><div class="SIntrapara">Writes conventional HTML of the SXML <span class="RktVar">xexp</span> to
output port <span class="RktVar">out</span>.  If <span class="RktVar">out</span> is not specified, the default is the
current output port.  HTML elements of types that are always empty are
written using HTML4-compatible XHTML tag syntax.</div><div class="SIntrapara">No inter-tag whitespace or line breaks not explicit in <span class="RktVar">xexp</span> is emitted.  The <span class="RktVar">xexp</span> should normally include a newline at the end of
the document.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._xexp-~3ehtml))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">xexp-&gt;html</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">xexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">xexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xexp?</span></td></tr></table></blockquote></div><div class="SIntrapara">Yields an HTML encoding of SXML <span class="RktVar">xexp</span> as a string.  For example (using the <span class="RktSym">html-&gt;xexp</span> procedure from package <span style="font-weight: bold">html-parsing</span>, to show going full-circle):</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">xexp-&gt;html</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">html-&gt;xexp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"&lt;P&gt;This is&lt;br&lt;b&lt;I&gt;bold &lt;/foo&gt;italic&lt;/ b &gt; text.&lt;/p&gt;"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"&lt;p&gt;This is&lt;br&gt;&lt;b&gt;&lt;i&gt;bold italic&lt;/i&gt;&lt;/b&gt; text.&lt;/p&gt;"</span></td></tr></table></blockquote></div><div class="SIntrapara">Note that, since this procedure constructs a string, it is normally best
used when the HTML is small.  When encoding HTML documents of conventional
size, <span class="RktSym">write-html</span> is likely more efficient.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._html-writing/main..rkt)._xexp-~3ehtml-bytes))"></a><span title="Provided from: html-writing | Package: html-writing"><span class="RktSym"><span class="RktSymDef RktSym">xexp-&gt;html-bytes</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">xexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bytes?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">xexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xexp?</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym">xexp-&gt;html</span>, but returns a byte string instead of a string.</div></p><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;Known_Issues&quot;">5<tt>&nbsp;</tt><a name="(part._.Known_.Issues)"></a>Known Issues</h3><ul><li><p>Determine whether currently implemented way of handling <span class="stt">!DOCTYPE</span> is sufficiently SXML-compliant, before documenting it.</p></li><li><p>Move more to pure SXML: remove the support for character literals?</p></li><li><p>Move more to pure SXML: consider whether to eliminate <span class="stt">&amp;</span> character entity references.</p></li><li><p>Many other TODO items from source code.</p></li></ul><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;History&quot;">6<tt>&nbsp;</tt><a name="(part._.History)"></a>History</h3><ul><li><p><div class="SIntrapara">Version 4:0 &#8212;<wbr></wbr> 2016-03-25</div><div class="SIntrapara"><ul><li><p>Restored some undocumented <span class="RktSym">provide</span>s that turned out to be used by the <span style="font-weight: bold">html-template</span> package, and added documentation for them.  Renamed <span class="RktSym">html-&gt;bytes</span> to <span class="RktSym">xexp-&gt;html-bytes</span>, and <span class="RktSym">html-attribute-value-&gt;bytes</span> to <span class="RktSym">xexp-&gt;html-attribute-value-bytes</span> for naming consistency.  (Thanks to Sam Tobin-Hochstadt for
reporting.)</p></li><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:5 &#8212;<wbr></wbr> 2016-03-22</div><div class="SIntrapara"><ul><li><p>Non-CDATA SXML content of the <span class="stt">script</span> element is now treated as &ldquo;CDATA faux HTML&rdquo;, for the
benefit of Ractive.js.</p></li><li><p>Made error message for an attribute not nested in a list
say &ldquo;attribute, not just an attribute name&rdquo; rather than &ldquo;valid foreign
object&rdquo;.</p></li><li><p>Made <span class="RktSym">error-html-writing-foreign-filter</span> say &ldquo;valid SXML object&rdquo; rather than &ldquo;valid foreign object&rdquo;.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:4 &#8212;<wbr></wbr> 2016-03-22</div><div class="SIntrapara"><ul><li><p>Adding support for using SXML element syntax within <span class="stt">script</span> element content, to support Ractive.js <span class="stt">type="text/ractive"</span>, even though we believe that content to be strictly
string CDATA, not DOM elements.  Part of the rationale is that this should not
conflict with the normal HTML5 uses of <span class="stt">script</span>, and it is consistent with older HTML interpretations. (Suggested by Dan Prager.)</p></li><li><p>Removed some vestigal <span class="RktSym">provide</span>s, for undocumented identifiers.</p></li><li><p>Organized unit tests a bit.</p></li><li><p>Documentation improvements, including to Known Issues.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:3 &#8212;<wbr></wbr> 2016-03-21</div><div class="SIntrapara"><ul><li><p>For HTML5 compatibility, the contents of the <span class="stt">script</span> element are written without character entity
                      escaping.  (Thanks to Daniel Prager.)</p></li><li><p>Fixed bug in which a valid null inside of a list would
                invoke the foreign filter, rather than being ignored.</p></li><li><p>Added documentation about HTML5 now emphasized by this package.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:2 &#8212;<wbr></wbr> 2016-03-02</div><div class="SIntrapara"><ul><li><p>Tweaked info.rkt, filenames.</p></li><li><p>Changed &ldquo;SXML/xexp&rdquo; references to &ldquo;SXML&rdquo;.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:1 &#8212;<wbr></wbr> 2016-02-25</div><div class="SIntrapara"><ul><li><p>Fixed deps.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:0 &#8212;<wbr></wbr> 2016-02-25</div><div class="SIntrapara"><ul><li><p>Moving from PLaneT to new package system.</p></li><li><p>Documented foreign filters.</p></li><li><p>Cleaning up documentation for now.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:0 &#8212;<wbr></wbr> 2012-06-12</div><div class="SIntrapara"><ul><li><p>Heavy API and implementation changes (although the
                                                                      previous version was not really documented), including
                                                                      the following.</p></li><li><p>All <span class="RktSym">out</span> arguments are now mandatory rather than optional.</p></li><li><p>All <span class="RktSym">foreign-filter</span> arguments have been removed.</p></li><li><p>Foreign filter context value symbol renamed from <span class="RktVal">'</span><span class="RktVal">attribute</span> (singular) to <span class="RktVal">'</span><span class="RktVal">attributes</span> (plural).</p></li><li><p>The suffix <span class="RktSym">/fixed</span><span class="RktMeta"></span> has been removed from all identifiers, since all
                      procedures now have fixed arguments.</p></li><li><p><span class="RktSym">write-html-attribute-or-list</span> is renamed to <span class="RktSym">write-html-attributes</span>.</p></li><li><p><span class="RktSym">write-html-attribute-value-string</span> is renamed to <span class="RktSym">write-html-attribute-value-part-string</span>.</p></li><li><p>Added <span class="RktSym">html-&gt;bytes</span> and <span class="RktSym">html-attribute-value-&gt;bytes</span>.</p></li><li><p>We no longer do backward-compatible XHTML empty element
                terminators like the string <span class="RktVal">" /&gt;"</span>; now they&rsquo;re just <span class="RktVal">"&gt;"</span>.</p></li><li><p>In attribute values, some additional characters are now
                       written as numeric character references: ASCII 0 through
                       31, and 127.</p></li><li><p>Got rid of the <span class="RktSym">*splice*</span><span class="RktMeta"></span> form that we have experimentally added, and
philosophically switched back to SXML&rsquo;s arbitrarily nested lists for splicing
with generally less allocation.</p></li><li><p>Restored some of the handling of unnecessary list
                       nesting in SXML/xexp, which had been removed after
                       forking from HtmlPrag and a brief experiment with <span class="RktSym">*splice*</span><span class="RktMeta"></span> when trying to unify SXML and PLT xexprs.</p></li><li><p>Converted to McFly and Overeasy.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.1 &#8212;<wbr></wbr> Version 1:0 &#8212;<wbr></wbr> 2011-08-21</div><div class="SIntrapara"><ul><li><p>Part of forked development from HtmlPrag, with
substantial changes.</p></li></ul></div></p></li></ul><h3 x-source-module="(lib &quot;html-writing/html-writing.scrbl&quot;)" x-source-pkg="html-writing" x-part-tag="&quot;Legal&quot;">7<tt>&nbsp;</tt><a name="(part._.Legal)"></a>Legal</h3><p>Copyright 2004&ndash;2012, 2016 Neil Van Dyke.  This program is Free Software;
you can redistribute it and/or modify it under the terms of the GNU Lesser
General Public License as published by the Free Software Foundation; either
version 3 of the License,or (at your option) any later version.  This program
is distributed in the hope that it will be useful, but without any warranty;
without even the implied warranty of merchantability or fitness for a
particular purpose.  See http://www.gnu.org/licenses/ for details.  For other
licenses and consulting, please contact the author.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>