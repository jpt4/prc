<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Magnolisp</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Magnolisp</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._magnolisp-lang%29" class="tocviewlink" data-pltdoc="x">Magnolisp the Language</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Modules_and_.Macros%29" class="tocviewlink" data-pltdoc="x">Modules and Macros</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Syntactic_.Forms%29" class="tocviewlink" data-pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Runtime_.Library%29" class="tocviewlink" data-pltdoc="x">Runtime Library</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Core_.Magnolisp%29" class="tocviewlink" data-pltdoc="x">Core Magnolisp</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Evaluation%29" class="tocviewlink" data-pltdoc="x">Evaluation</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Magnolisp-.Based_.Languages%29" class="tocviewlink" data-pltdoc="x">Magnolisp-<wbr></wbr>Based Languages</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._.Compiler_.A.P.I%29" class="tocviewlink" data-pltdoc="x">Compiler API</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="#%28part._magnolisp-cli%29" class="tocviewlink" data-pltdoc="x"><span class="stt">mglc</span></a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#%28part._magnolisp-examples%29" class="tocviewlink" data-pltdoc="x">Example Code</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="#%28part._magnolisp-repo%29" class="tocviewlink" data-pltdoc="x">Source Code</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="#%28part._magnolisp-install%29" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="#%28part._magnolisp-license%29" class="tocviewlink" data-pltdoc="x">License</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Magnolisp</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._magnolisp-lang%29" class="tocsubseclink" data-pltdoc="x">Magnolisp the Language</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Modules_and_.Macros%29" class="tocsubseclink" data-pltdoc="x">Modules and Macros</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Syntactic_.Forms%29" class="tocsubseclink" data-pltdoc="x">Syntactic Forms</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Defining_.Forms%29" class="tocsubseclink" data-pltdoc="x">Defining Forms</a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._declare%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">declare</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._typedef%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">typedef</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._function%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">function</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._var%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">var</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._primitives%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">primitives</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Annotations%29" class="tocsubseclink" data-pltdoc="x">Annotations</a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">foreign</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">export</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">type</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._literal%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">literal</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._type-expressions%29" class="tocsubseclink" data-pltdoc="x">Type Expressions</a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink"><span class="nobreak">-<wbr></wbr>&gt;</span></span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~3c~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&lt;&gt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._exists%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">exists</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~e2~88~83%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&#8707;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._for-all%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">for-<wbr></wbr>all</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~e2~88~80%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&#8704;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._auto%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">auto</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._.Value_.Expressions%29" class="tocsubseclink" data-pltdoc="x">Value Expressions</a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._cast%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">cast</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._annotate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">annotate</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-target%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">if-<wbr></wbr>target</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-cxx%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">if-<wbr></wbr>cxx</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._.Racket_.Forms%29" class="tocsubseclink" data-pltdoc="x">Racket Forms</a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">begin-<wbr></wbr>racket</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._let-racket%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">let-<wbr></wbr>racket</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Runtime_.Library%29" class="tocsubseclink" data-pltdoc="x">Runtime Library</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Core_.Magnolisp%29" class="tocsubseclink" data-pltdoc="x">Core Magnolisp</a></td></tr><tr><td><span class="tocsublinknumber">5.1<tt>&nbsp;</tt></span><a href="#%28part._built-ins%29" class="tocsubseclink" data-pltdoc="x">Magnolisp Built-<wbr></wbr>Ins</a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Bool</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">Void</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5.2<tt>&nbsp;</tt></span><a href="#%28part._core-syntax%29" class="tocsubseclink" data-pltdoc="x">Magnolisp Core Syntax</a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">#%magnolisp</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5.3<tt>&nbsp;</tt></span><a href="#%28part._.Fully_.Expanded_.Programs%29" class="tocsubseclink" data-pltdoc="x">Fully Expanded Programs</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Evaluation%29" class="tocsubseclink" data-pltdoc="x">Evaluation</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Magnolisp-.Based_.Languages%29" class="tocsubseclink" data-pltdoc="x">Magnolisp-<wbr></wbr>Based Languages</a></td></tr><tr><td><a href="#%28form._%28%28lib._magnolisp%2Fmodbeg..rkt%29._module-begin%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">module-<wbr></wbr>begin</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fmodbeg..rkt%29._make-module-begin%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>module-<wbr></wbr>begin</span></span></a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._.Compiler_.A.P.I%29" class="tocsubseclink" data-pltdoc="x">Compiler API</a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compile-modules%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">compile-<wbr></wbr>modules</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compile-files%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">compile-<wbr></wbr>files</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compilation-state~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">compilation-<wbr></wbr>state?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._generate-files%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generate-<wbr></wbr>files</span></span></a></td></tr><tr><td><span class="tocsublinknumber">9<tt>&nbsp;</tt></span><a href="#%28part._magnolisp-cli%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">mglc</span></a></td></tr><tr><td><span class="tocsublinknumber">10<tt>&nbsp;</tt></span><a href="#%28part._magnolisp-examples%29" class="tocsubseclink" data-pltdoc="x">Example Code</a></td></tr><tr><td><span class="tocsublinknumber">11<tt>&nbsp;</tt></span><a href="#%28part._magnolisp-repo%29" class="tocsubseclink" data-pltdoc="x">Source Code</a></td></tr><tr><td><span class="tocsublinknumber">12<tt>&nbsp;</tt></span><a href="#%28part._magnolisp-install%29" class="tocsubseclink" data-pltdoc="x">Installation</a></td></tr><tr><td><span class="tocsublinknumber">13<tt>&nbsp;</tt></span><a href="#%28part._magnolisp-license%29" class="tocsubseclink" data-pltdoc="x">License</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._magnolisp)"></a>Magnolisp</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Tero Hasu</p></span></div><p>This is <a name="(tech._magnolisp)"></a><span style="font-style: italic">Magnolisp</span>, a small, experimental language and implementation. It is experimental in its implementation technique, which is to replace the phase level 0 (runtime) language of <a href="https://racket-lang.org/">Racket</a> with something non-Racket (here: Magnolisp), and translate it into another language (here: C++) for execution.</p><p>Magnolisp is inspired by Racket and the likewise experimental programming language <a href="http://magnolia-lang.org/">Magnolia</a>. Its algebraic language resembles Racket&rsquo;s, and Racket also provides the module and macro systems. The language is restricted in ways similar to Magnolia, with the restrictions designed to support static reasoning about code, and to allow for fairly direct mapping to most mainstream languages.</p><p>Magnolisp is intended to explore and demonstrate techniques for source-to-source compilation on top of Racket, not to support writing of useful applications.</p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;magnolisp-lang&quot;">1<tt>&nbsp;</tt><a name="(part._magnolisp-lang)"></a><a name="(mod-path._magnolisp)"></a>Magnolisp the Language</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/magnolisp" title="Install this package using `raco pkg install magnolisp`"><span class="stt">magnolisp</span></a></span></td></tr></table></p><p>The Magnolisp language relies on Racket for its module and macro systems. All of Racket may be used for macro programming. The <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a> language is provided by default for phase level 1 (compile time).</p><p>A small subset of <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a> definitions is also available at phase level 0 by default, as these may be used in runtime code, and evaluated as <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> in the Racket VM. However, only a small subset of Racket can be handled by the Magnolisp compiler, and either the Magnolisp Racket language or the Magnolisp compiler will report errors as appropriate for uncompilable language.</p><p>When a <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> module is evaluated as Racket, any module top-level runtime expressions will also get evaluated; this feature is intended to facilitate testing during development. The Magnolisp compiler, on the other hand, discards top-level expressions, and also any top-level definitions that are not actually part of the program being compiled.</p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Modules_and_Macros&quot;">2<tt>&nbsp;</tt><a name="(part._.Modules_and_.Macros)"></a>Modules and Macros</h3><p>The Racket <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">provide</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span> forms may be used in Magnolisp as normal, also at phase level 0. However, as far as C++ compilation is concerned, these are only used to connect together Magnolisp definitions internally to the compiled program/library. C++ imports and exports are specified separately using the <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span> annotations.</p><p>For defining macros and macro-expansion time computation, the relevant Racket facilities (e.g., <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-syntax</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._define-syntax-rule%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-syntax-rule</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin-for-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin-for-syntax</a></span>, etc<span class="Sendabbrev">.</span>) may be used as normal.</p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Syntactic_Forms&quot;">3<tt>&nbsp;</tt><a name="(part._.Syntactic_.Forms)"></a><a name="(mod-path._magnolisp/surface)"></a>Syntactic Forms</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._magnolisp%2Fsurface%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/surface</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/magnolisp" title="Install this package using `raco pkg install magnolisp`"><span class="stt">magnolisp</span></a></span></td></tr></table></p><p>The surface syntax of Magnolisp consists of a collection of Magnolisp-specific forms, as well as a selection of supported Racket forms. The <a href="#%28mod-path._magnolisp%2Fsurface%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/surface</span></a> module defines the Magnolisp-specific ones, and the <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language exports these at phase level 0.</p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Defining_Forms&quot;">3.1<tt>&nbsp;</tt><a name="(part._.Defining_.Forms)"></a>Defining Forms</h4><p>In Magnolisp, it is possible to <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> functions, types, and variables; of these, variable definitions are not allowed at the top level.</p><p>As Magnolisp has almost no standard library, it is ultimately necessary to define primitive types and functions (flagged as <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span>) in order to be able to compile programs that do anything useful. For this reason there is also a <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._primitives%29%29" class="RktStxLink" data-pltdoc="x">primitives</a></span> convenience form for defining multiple <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> types and/or functions at once.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._define))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="hspace">&nbsp;</span><span class="RktPn">#:function</span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The first form defines a type. Presently only foreign types may be defined using this form, and <span class="RktVar">id</span> gives the corresponding Magnolisp name. The <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> annotation should always be provided.</div></p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktSym">long</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my_cxx_long</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>It is acceptable to define a type for a local (lexical) scope, if the type is not referenced elsewhere.</p><p>The second form defines a variable with the name <span class="RktVar">id</span>, and the (initial) value given by <span class="RktVar">expr</span>. A <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span> annotation may be included to specify the Magnolisp type of the variable.</p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr></table></blockquote></div></p><p>Any (module) top-level variable definition will not get translated into C++.</p><p>The third form defines a function. The (optional) body of a function is a sequence of expressions, which (if present) must produce a single value.</p><p>Unlike in Racket, no tail-call elimination may be assumed even when a recursive function application appears in <span style="font-style: italic">tail position</span>.</p><p>Functions may be defined locally within another function. A local function may reference free variables from a surrounding lexical scope, as long as they are not used as L-values (i.e., targets of assignment), and as long as the variables are not top-level.</p><p>Where the function is declared as <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span>, the Magnolisp compiler will ignore any body <span class="RktVar">expr</span><span class="stt"> </span><span class="RktMeta">...</span> sequence. When a function without a body is invoked as Racket, the result is <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=void_undefined.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="nobreak"><span class="RktRes">#&lt;void&gt;</span></span></a>. When a <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> function has a body, it is typically there to &ldquo;simulate&rdquo; the behavior of the C++ implementation in the Racket VM. For purposes of simulation it can be useful to make use of the full Racket runtime language; to implement a function body in Racket syntax instead of Magnolisp syntax, enclose the body expression within a <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="RktStxLink" data-pltdoc="x">begin-racket</a></span> form.</p><p>A function with the <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span> flag in its annotations indicates that the function is part of the public API of a program that includes the containing module. When a function is used merely as a dependency (i.e., its containing module was not specified as being a part of the program), any <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span> flag is ignored.</p><p>When a function includes a <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span> annotation, the type expression must specify a function type (see <a href="#%28part._type-expressions%29" data-pltdoc="x">Type Expressions</a>).</p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">identity</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">five</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inc</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seven</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nine</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seven</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compute</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inc</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compute</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Here, <span class="RktSym">identity</span> must have a single, concrete type, possible to determine from the context of use. It is not a generic function, and hence it may not be used in multiple different type contexts within a single program.</p><p>The second <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> form may also be used to define a function (even a top-level one), provided that the &ldquo;variable initializer&rdquo; <span class="RktVar">expr</span> is a lambda expression. Alternatively, if the annotations indicate that the definition is for a <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> function (whose <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span> is explicitly given as a function type), then <span class="RktVar">id</span> is also taken to bind a function. Any &ldquo;variables&rdquo; that are applied in a program are also taken to refer to functions. For <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> function definitions of this form, the <span class="RktVar">expr</span> would typically be a function (value) for &ldquo;simulating&rdquo; the foreign behavior.</p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">two1</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">two2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mul</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">four</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mul</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">two1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">two2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mul</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">four</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">four</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">16</span></p></td></tr></table></blockquote></div></p><p>The fourth <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> form (with the <span class="RktPn">#:function</span> keyword) may likewise be used to define a function, one whose Racket implementation is given as an <span class="RktVar">Racket-expr</span>ession (for which Racket syntax is assumed). The arity of the function value that the expression yields must match the number of declared <span class="RktVar">arg</span>uments. When this form is used, it is not necessary to give the type of the function, provided that the type can be inferred from context.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._declare))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._declare%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">declare</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._declare%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">declare</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Forms used to declare C++ translation information for types or functions, not to implement them, or to bind the identifier <span class="RktVar">id</span>. The binding must already exist.</div></p><p>The first form states that <span class="RktVar">id</span> is a type, probably providing annotations for it (<span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._declare%29%29" class="RktStxLink" data-pltdoc="x">declare</a></span>&rsquo;ing types as <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> is presently compulsory).</p><p>The second form states that <span class="RktVar">id</span> is a function, possibly providing annotations for it. The arguments <span class="RktVar">arg</span><span class="stt"> </span><span class="RktMeta">...</span> only serve to specify the arity of the function.</p><p>The key difference between <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._declare%29%29" class="RktStxLink" data-pltdoc="x">declare</a></span> is that the former binds the identifier, and thus at the same time necessarily specifies any Racket implementation, while the latter does not. That is: Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span> can be used to give a Racket implementation for something; Magnolisp&rsquo;s <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> can be used to give both a Racket implementation (possibly a &ldquo;non-implementation&rdquo;) as well as C++ translation information for something; whereas <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._declare%29%29" class="RktStxLink" data-pltdoc="x">declare</a></span> only gives the C++ translation information for something.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._typedef))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._typedef%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">typedef</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._typedef%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">typedef</a></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Defines a type. If a <span class="RktVar">type-expr</span> is given, then <span class="RktVar">id</span> is bound as an alias for that type expression. Otherwise annotations must specify the semantics for the type.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._function))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._function%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">function</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-body</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-body</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">expr</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span style="background-color: yellow"><span style="font-weight: bold">NOTE:</span></span> This form is deprecated; use <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span>, instead. </p></blockquote></div><div class="SIntrapara">Defines a function.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._var))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._var%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">var</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-annos</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span style="background-color: yellow"><span style="font-weight: bold">NOTE:</span></span> This form is deprecated; use <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span>, instead. </p></blockquote></div><div class="SIntrapara">Defines a local variable.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._primitives))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._primitives%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">primitives</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">definition</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">definition</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktPn">#:function</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">::</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">]</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines the specified types and functions as <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> primitives, whose C++ name is assumed to be the same as the Magnolisp name. Any defined functions will have no Racket implementation (or rather, they will have an implementation that does nothing).</div></p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Annotations&quot;">3.2<tt>&nbsp;</tt><a name="(part._.Annotations)"></a>Annotations</h4><p><table cellspacing="0" cellpadding="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-annos</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">anno-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">anno-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">export-anno-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">foreign-anno-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">type-anno-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">export-anno-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span><span class="hspace">&nbsp;</span><span class="RktVar">C++-id</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">foreign-anno-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktVar">C++-id</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">type-anno-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></td></tr></table></p><p>where:</p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">C++-id</span></td></tr></table></blockquote><p>A valid C++ identifier. When not provided, a default C++ name is automatically derived from the Magnolisp name.</p></blockquote><p>The set of annotations that may be used in Magnolisp is open ended, to allow for additional tools support. Only the most central Magnolisp-compiler-recognized annotations are included in the above grammar.</p><p>It is not always necessary to explicitly specify a <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span> for a typed Magnolisp definition, as the Magnolisp compiler does whole-program type inference (in Hindley-Milner style). When evaluating as Racket, <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span> annotations are not used at all.</p><p>For convenience, the <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language installs a reader extension that supports annotation related shorthands: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#ap</span><span class="hspace"></span></span><span class="RktPn">(</span><span class="RktVar">anno-expr</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">expr</span> is short for <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._annotate%29%29" class="RktStxLink" data-pltdoc="x">annotate</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">anno-expr</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span>; and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">^</span><span class="hspace"></span></span><span class="RktVar">type-expr</span> is short for <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="stt"> </span><span class="RktVar">type-expr</span><span class="RktPn">)</span>. For example, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#ap</span><span class="hspace"></span></span>(<span class="RktInBG"><span class="hspace"></span><span class="RktIn">^</span><span class="hspace"></span></span><span class="RktSym">int</span>) <span class="RktVar">expr</span> reads as <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._annotate%29%29" class="RktStxLink" data-pltdoc="x">annotate</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="stt"> </span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._foreign))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">foreign</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">C++-id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">foreign</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">An annotation that marks a type or function definition as foreign. That is, it is a primitive implemented in C++. Whether explicitly specified or derived from the Magnolisp name, any <span class="RktVar">C++-id</span> must naturally match that of an existing C++ definition.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._export))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">export</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">C++-id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">export</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">An annotation that marks a function definition as &ldquo;public&rdquo;. That is, the function is to be part of the Magnolisp API that is produced for the library being implemented. Its declaration will thus appear in any generated header file.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._type))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">An annotation that specifies the Magnolisp type of a function, variable, or expression.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._literal))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._literal%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">literal</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fmt-elem</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">fmt-elem</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">str</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">fmt-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">fmt-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">fmt-insn</span><span class="hspace">&nbsp;</span><span class="RktVar">fmt-obj</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">fmt-insn</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">display</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">write</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">print</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">cxx-str</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">fmt-obj</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">datum</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">type-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">str</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">An annotation for type definitions, specifying how to format literal datums of that type. The specification is given as a sequence of elements, which are either string literals or simple formatting expressions. Each <span class="RktVar">fmt-expr</span> is translated into a string, and the resulting strings are then concatenated, in order, to get the C++ string encoding for a each literal <span class="RktSym">datum</span> of the concerned type. Thus, exact same datums of different types can translate differently.</div></p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">str</span></td></tr></table></blockquote><p>A string literal.</p></blockquote><p><div class="SIntrapara"><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktSym">display</span></td></tr></table></blockquote><p>Use Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span> to format the object.</p></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktSym">write</span></td></tr></table></blockquote><p>Use Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">write</a></span> to format the object.</p></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktSym">print</span></td></tr></table></blockquote><p>Use Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._print%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">print</a></span> to format the object.</p></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktSym">cxx-str</span></td></tr></table></blockquote><p>Format the object as a &ldquo;regular&rdquo; C++ string literal, after coercing it into a string. Only non-control ASCII characters are allowed in the string.</p></blockquote></div></p><p><div class="SIntrapara"><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktSym">datum</span></td></tr></table></blockquote><p>Substituted with the datum of the literal.</p></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktSym">type-id</span></td></tr></table></blockquote><p>Substituted with the C++ name of the literal&rsquo;s type.</p></blockquote></div></p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;type-expressions&quot;">3.3<tt>&nbsp;</tt><a name="(part._type-expressions)"></a>Type Expressions</h4><p><table cellspacing="0" cellpadding="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">type-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">type-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~3c~3e%29%29" class="RktStxLink" data-pltdoc="x">&lt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._exists%29%29" class="RktStxLink" data-pltdoc="x">exists</a></span><span class="hspace">&nbsp;</span><span class="RktVar">type-var-id</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._for-all%29%29" class="RktStxLink" data-pltdoc="x">for-all</a></span><span class="hspace">&nbsp;</span><span class="RktVar">type-var-id</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._auto%29%29" class="RktStxLink" data-pltdoc="x">auto</a></span><span class="RktPn">)</span></td></tr></table></p><p>Type expressions are parsed according to the above grammar, where <span class="RktVar">type-id</span> must be an identifier that names a type.
The only predefined types in Magnolisp are <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValLink" data-pltdoc="x">Bool</a></span>, and any others must be defined using <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="stt"> </span><span class="RktPn">#:type</span> or some other type-binding form.</p><p>A <span class="RktVar">type-var-id</span> is an identifier that gets bound as a type variable for the context of its type expression.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._-~3e))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A function type expression, containing type expressions the function&rsquo;s arguments and its return value, in that order. A Magnolisp function always returns a single value.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._~3c~3e))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~3c~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&lt;&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A parametric type expression, containing type expressions for the type&rsquo;s base type and its type parameters, in that order. Type parameters translate as template parameters in C++.</div></p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktSym">stack</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stack-id</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~3c~3e%29%29" class="RktStxLink" data-pltdoc="x">&lt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stack</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._auto%29%29" class="RktStxLink" data-pltdoc="x">auto</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the C++ type of this <span class="RktSym">x</span> use will be <span class="RktSym">stack&lt;int&gt;</span></span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._exists))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._exists%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">exists</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-var-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._~e2~88~83))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~e2~88~83%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&#8707;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-var-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">An existential type. Specified by <span class="RktVar">type-expr</span>, which should make use of the <span class="RktVar">type-var-id</span> type variables. Each type variable is taken to correspond to exactly one concrete type expression, which must be possible to infer.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._for-all))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._for-all%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">for-all</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-var-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._~e2~88~80))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~e2~88~80%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&#8704;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-var-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A universal type. The <span class="RktVar">type-var-id</span> type variables may take on any set of type assignments, which must be possible to infer based on their use context. (Each application context of a universally typed function may end up with a different assignment to the type variables.)</div></p><p>Only <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span> functions may be universally typed.</p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:type</span><span class="hspace">&nbsp;</span><span class="RktSym">Box</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">box</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~e2~88~80%29%29" class="RktStxLink" data-pltdoc="x">&#8704;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">E</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">E</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~3c~3e%29%29" class="RktStxLink" data-pltdoc="x">&lt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Box</span><span class="hspace">&nbsp;</span><span class="RktSym">E</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unbox</span><span class="hspace">&nbsp;</span><span class="RktSym">box</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~e2~88~80%29%29" class="RktStxLink" data-pltdoc="x">&#8704;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">E</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._~3c~3e%29%29" class="RktStxLink" data-pltdoc="x">&lt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Box</span><span class="hspace">&nbsp;</span><span class="RktSym">E</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">E</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._auto))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._auto%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">auto</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A type expression that conveys no information about the thing being typed, indicating that it is expected for the type to be inferable based on the contexts of use of the thing. Equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._exists%29%29" class="RktStxLink" data-pltdoc="x">exists</a></span><span class="stt"> </span><span class="RktSym">T</span><span class="stt"> </span><span class="RktSym">T</span><span class="RktPn">)</span>.</div></p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Value_Expressions&quot;">3.4<tt>&nbsp;</tt><a name="(part._.Value_.Expressions)"></a>Value Expressions</h4><p>Like Racket (and unlike C++), the Magnolisp language makes no distinction between statements and expressions. Some expressions yield no useful value, however; such expressions conceptually produce a result of type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span> (such result values do exist at Racket run time, but not at C++ run time). Some expressions yield <span style="font-style: italic">no</span> values (or <span style="font-style: italic">multiple</span> values), but are merely used as a syntactic device, and only allowed to appear in certain contexts.</p><p>Magnolisp borrows a number of constructs from Racket (or Scheme). For example, there is a conditional form <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="stt"> </span><span class="RktVar">test-expr</span><span class="stt"> </span><span class="RktVar">then-expr</span><span class="stt"> </span><span class="RktVar">else-expr</span><span class="RktPn">)</span>, as well as the derived forms <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._when%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">when</a></span><span class="stt"> </span><span class="RktVar">test-expr</span><span class="stt"> </span><span class="RktVar">then-expr</span><span class="stt"> </span><span class="RktSym">...+</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._unless%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">unless</a></span><span class="stt"> </span><span class="RktVar">test-expr</span><span class="stt"> </span><span class="RktVar">then-expr</span><span class="stt"> </span><span class="RktSym">...+</span><span class="RktPn">)</span>. The <span class="RktVar">test-expr</span> conditional expression must always be of type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValLink" data-pltdoc="x">Bool</a></span>, and whether it holds depends on the &ldquo;truthiness&rdquo; of its value, as interpreted in C++ or Racket (as applicable). The branches of an <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span> must generally be of the same type, except where the result of the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span> form is discarded. The <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._when%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">when</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._unless%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">unless</a></span> can generally only appear in such result-discarding contexts, as they have an implicit &ldquo;else&rdquo; branch of type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span>.</p><p>A <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="stt"> </span><span class="RktVar">body</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span> form, in Magnolisp, signifies a sequence of expressions, itself constituting an expression. Similarly to Racket, to allow definitions to appear within an expression sequence, <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">body</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span> should be used instead.</p><p>The <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">body</span><span class="stt"> </span><span class="RktSym">...+</span><span class="RktPn">)</span>, <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">body</span><span class="stt"> </span><span class="RktSym">...+</span><span class="RktPn">)</span>, and <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._letrec%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">letrec</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">body</span><span class="stt"> </span><span class="RktSym">...+</span><span class="RktPn">)</span> forms are also available in Magnolisp, but the named variant of <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span> is not supported.</p><p>The <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=set_.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._set%2521%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">set!</a></span><span class="stt"> </span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span> form is likewise available in Magnolisp, supporting assignment to variables.
The left-hand side expression <span class="RktVar">id</span> must be a reference to a bound variable.
(The <span class="RktVar">id</span> may naturally instead be a transformer binding to an assignment transformer, in which case the form is macro transformed as normal.)</p><p>In Magnolisp, <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="stt"> </span><span class="RktVar">expr</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span> is an expression with no useful result (the result is of the unit type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span>). Any arguments to <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span> are evaluated as usual, but they are not used. The <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktPn">)</span> form signifies &ldquo;nothing,&rdquo; and has no result; hence it is an error for <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktPn">)</span> to appear in a position where the context expects a result. In result expecting contexts, the former may only appear in a 1-value context, and the latter in a 0-value context (there are few in Magnolisp).</p><p>The <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> forms may appear in a Racket <span style="font-style: italic">internal-definition context</span> (and not Racket <span style="font-style: italic">expression context</span>). The same is true of <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span> forms that conform to the restricted syntax supported by the Magnolisp compiler.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._cast))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._cast%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">cast</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Annotates expression <span class="RktVar">expr</span> with the type given by <span class="RktVar">type-expr</span>. A <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._cast%29%29" class="RktStxLink" data-pltdoc="x">cast</a></span> is commonly used to specify the type of a literal, which by themselves are generally untyped in Magnolisp. While the literal <span class="RktVal">"foo"</span> is treated as a <span class="RktSym">string?</span> value by Racket, the Magnolisp compiler will expect to determine the literal expression&rsquo;s Magnolisp type based on annotations. The <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._cast%29%29" class="RktStxLink" data-pltdoc="x">cast</a></span> form allows one to &ldquo;cast&rdquo; an expression to a specific type for the compiler.</div></p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._cast%29%29" class="RktStxLink" data-pltdoc="x">cast</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr></table></blockquote></div></p><p>While generally only declarations require annotations, <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._cast%29%29" class="RktStxLink" data-pltdoc="x">cast</a></span> demonstrates a specific case where it is useful to associate annotations with expressions.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._annotate))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._annotate%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">annotate</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">anno-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Explicitly annotates the expression <span class="RktVar">expr</span> with the specified annotations. May be used to specify annotations for an identifier that is bound using the regular Racket binding forms such as <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let*</a></span>, etc<span class="Sendabbrev">.</span></div></p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._annotate%29%29" class="RktStxLink" data-pltdoc="x">annotate</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ten</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._annotate%29%29" class="RktStxLink" data-pltdoc="x">annotate</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">ten</span></td></tr><tr><td><p><span class="RktRes">10</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._if-target))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-target%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">if-target</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">then-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">else-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A compile-time conditional expression that depends on the intended execution target. Currently the only meaningful target language <span class="RktVar">name</span> is <span class="RktSym">cxx</span>, which stands for C++. When code is being compiled for a target matching <span class="RktVar">name</span>, only <span class="RktVar">then-expr</span> will be included in generated executable code; otherwise it is <span class="RktVar">else-expr</span> that will be subject to evaluation in the target environment.</div></p><p>Note that there is no specific support for execution-target-conditional macro expansion in Magnolisp (such conditionality is possible, but Magnolisp itself has no supporting mechanisms for it). Instead, to generate different code for different targets, one may use <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-target%29%29" class="RktStxLink" data-pltdoc="x">if-target</a></span> to macro generate code for <span style="font-style: italic">all</span> targets at once (currently only C++ and Racket). The choice of which alternative code fragment to evaluate will be made after Magnolisp programs&rsquo; macros have been expanded, but still at compile-time, either during source-to-source or bytecode compilation (depending on the execution target).</p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-target%29%29" class="RktStxLink" data-pltdoc="x">if-target</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cxx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seven</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">five</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._if-cxx))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-cxx%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">if-cxx</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">then-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">else-expr</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A shorthand for <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-target%29%29" class="RktStxLink" data-pltdoc="x">if-target</a></span><span class="stt"> </span><span class="RktSym">cxx</span><span class="stt"> </span><span class="RktVar">then-expr</span><span class="stt"> </span><span class="RktVar">else-expr</span><span class="RktPn">)</span>.</div></p><p>See also: <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="RktStxLink" data-pltdoc="x">begin-racket</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._let-racket%29%29" class="RktStxLink" data-pltdoc="x">let-racket</a></span>.</p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Racket_Forms&quot;">3.5<tt>&nbsp;</tt><a name="(part._.Racket_.Forms)"></a>Racket Forms</h4><p>To include Racket code in a phase level 0 context that is significant to Magnolisp, you may wrap the code in a form that indicates that the code is only intended for parsing as Racket. Code so wrapped must be grammatically correct Racket, but not necessarily Magnolisp. The wrapping forms <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="RktStxLink" data-pltdoc="x">begin-racket</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._let-racket%29%29" class="RktStxLink" data-pltdoc="x">let-racket</a></span> merely switch syntaxes, and have no effect on the namespace used for evaluating the enclosed sub-forms; the surrounding namespace is still in effect. Nesting of the wrapping forms is allowed.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._begin-racket))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">begin-racket</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-form</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A Racket form that is equivalent to writing <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="stt"> </span><span class="RktVar">Racket-form</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span>, and hence not necessarily a Racket expression. Intended particularly for allowing the splicing of Racket definitions into the enclosing context, which is not possible with <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._let-racket%29%29" class="RktStxLink" data-pltdoc="x">let-racket</a></span>.</div></p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prefix-in%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">prefix-in</a></span><span class="hspace">&nbsp;</span><span class="RktSym">r.</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._only-in%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">only-in</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/base</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="RktStxLink" data-pltdoc="x">begin-racket</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">r.define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">six</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">r.define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">one-more</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dummy</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eight</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">one-more</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">one-more</span><span class="hspace">&nbsp;</span><span class="RktSym">six</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">eight</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">8</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/surface..rkt)._let-racket))"></a><span title="Provided from: magnolisp/surface | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._let-racket%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">let-racket</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A Racket expression that is equivalent to writing <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">Racket-expr</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span>. The Magnolisp semantics is to: ignore such forms when at module top-level; and treat them as uncompilable expressions when appearing in an expression position. Uncompilable expressions are acceptable for as long as they are not part of a compiled program, or can be optimized away.</div></p><p><div class="SIntrapara">For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">three</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#::</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._foreign%29%29" class="RktStxLink" data-pltdoc="x">foreign</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._let-racket%29%29" class="RktStxLink" data-pltdoc="x">let-racket</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=set_.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._set%2521%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dummy</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">one-more</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">three</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr></table></blockquote></div></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Runtime_Library&quot;">4<tt>&nbsp;</tt><a name="(part._.Runtime_.Library)"></a><a name="(mod-path._magnolisp/prelude)"></a>Runtime Library</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._magnolisp%2Fprelude%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/prelude</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/magnolisp" title="Install this package using `raco pkg install magnolisp`"><span class="stt">magnolisp</span></a></span></td></tr></table></p><p>The Magnolisp language includes a small number of predefined names (that are not syntax). Most notably,
the compiler expects expressions of type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValLink" data-pltdoc="x">Bool</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span> in
certain contexts, and it also recognizes their identifiers. While the C++
translation semantics of these types are <span style="font-style: italic">not</span> built into the compiler,
such semantics <span style="font-style: italic">are</span> predefined by the language. More specifically, the
<a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language uses the <a href="#%28mod-path._magnolisp%2Fprelude%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/prelude</span></a>
module as its &ldquo;runtime library,&rdquo; one that specifies the C++ runtime names to
which these known types correspond. The <a href="#%28mod-path._magnolisp%2Fprelude%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/prelude</span></a>
module only contains such compile-time information, and no Racket bindings are
exported from it.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>type</p></div></div><p class="RForeground"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValDef RktValLink" data-pltdoc="x">Bool</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A predefined type. The corresponding C++ type is <span class="RktSym">bool</span>, and the corresponding C++ constant values are <span class="RktSym">true</span> and <span class="RktSym">false</span>, respectively.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>type</p></div></div><p class="RForeground"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValDef RktValLink" data-pltdoc="x">Void</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A predefined type. Such values may not actually exist at C++ run time. The corresponding C++ type is <span class="RktSym">void</span>.</div></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Core_Magnolisp&quot;">5<tt>&nbsp;</tt><a name="(part._.Core_.Magnolisp)"></a><a name="(mod-path._magnolisp/core)"></a>Core Magnolisp</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._magnolisp%2Fcore%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/core</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/magnolisp" title="Install this package using `raco pkg install magnolisp`"><span class="stt">magnolisp</span></a></span></td></tr></table></p><p>There are a small number of Magnolisp-specific names that are treated specially by the Magnolisp compiler. These are bound in the <a href="#%28mod-path._magnolisp%2Fcore%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/core</span></a> module, and exported for phase level 0 by the <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language.</p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;built-ins&quot;">5.1<tt>&nbsp;</tt><a name="(part._built-ins)"></a>Magnolisp Built-Ins</h4><p>A boolean expression is simply an expression of type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValLink" data-pltdoc="x">Bool</a></span>, which is one of the two predefined types in Magnolisp. The other one is <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span>, which is Magnolisp&rsquo;s unit type (whose values carry no information).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>type</p></div></div><p class="RForeground"><a name="(def._((lib._magnolisp/core..rkt)._.Bool))"></a><span title="Provided from: magnolisp/core | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValDef RktValLink" data-pltdoc="x">Bool</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A predefined type. The literals of this type are <span class="RktVal">#t</span> and <span class="RktVal">#f</span> (which are also the only typed literals in the language). All conditional expressions in Magnolisp are of type <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValLink" data-pltdoc="x">Bool</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>type</p></div></div><p class="RForeground"><a name="(def._((lib._magnolisp/core..rkt)._.Void))"></a><span title="Provided from: magnolisp/core | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValDef RktValLink" data-pltdoc="x">Void</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A predefined type. There are no literals for <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Void%29%29" class="RktValLink" data-pltdoc="x">Void</a></span> values, but the Magnolisp core form <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="stt"> </span><span class="RktVar">expr</span><span class="stt"> </span><span class="RktVar">...</span><span class="RktPn">)</span> evaluates such a value, at least conceptually.</div></p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;core-syntax&quot;">5.2<tt>&nbsp;</tt><a name="(part._core-syntax)"></a>Magnolisp Core Syntax</h4><p>Magnolisp core syntax is encoded primarily in terms of Racket&rsquo;s core forms. Magnolisp core forms that have no Racket counterpart, however, are encoded in terms of the <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span> variable, which is treated specially by the Magnolisp compiler. The <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span> binding is exported from the <a href="#%28mod-path._magnolisp%2Fcore%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/core</span></a> module.</p><p>It is possible to define multiple different surface syntaxes for Magnolisp, and these can be defined as libraries similar to the <a href="#%28mod-path._magnolisp%2Fsurface%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/surface</span></a> syntax definition used by the <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language. All Magnolisp language variants must, however, refer to the same core bindings (i.e., as exported from <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a> and <a href="#%28mod-path._magnolisp%2Fcore%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/core</span></a>), as no other bindings are treated specially by the Magnolisp compiler.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>binding</p></div></div><p class="RForeground"><a name="(def._((lib._magnolisp/core..rkt)._~23~25magnolisp))"></a><span title="Provided from: magnolisp/core | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValDef RktValLink" data-pltdoc="x">#%magnolisp</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A value binding whose identifier is used to uniquely identify some Magnolisp core syntactic forms. It always appears in the applied-procedure position of a Racket <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span> core form. The value of the variable does not matter when compiling as Magnolisp, as it is never used. To prevent evaluation as Racket, all the syntactic constructs exported by <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> surround <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span> applications with a &ldquo;short-circuiting&rdquo; Racket expression.</div></p><h4 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Fully_Expanded_Programs&quot;">5.3<tt>&nbsp;</tt><a name="(part._.Fully_.Expanded_.Programs)"></a>Fully Expanded Programs</h4><p>As far as the Magnolisp compiler is concerned, a Magnolisp program is fully expanded if it conforms to the following grammar. Any syntactic ambiguities are resolved in favor of the first matching grammar rule.</p><p>A non-terminal <span class="RktVar">nt</span><span style="vertical-align: sub; font-size: 80%">rkt</span> is as documented for non-terminal <span class="RktVar">nt</span> in <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528part._fully-expanded%2529&amp;version=7.4" class="Sq" data-pltdoc="x">Fully Expanded Programs</a> of the Racket Reference.</p><p>A form <span class="RktVar">form</span><span style="vertical-align: sub; font-size: 80%">ign</span> denotes language that is ignored by the Magnolisp compiler, but which may be useful when evaluating as Racket.</p><p>A form <span class="RktVar">form</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVar">pname</span><span class="stt"> </span><span class="RktSym">=</span><span class="stt"> </span><span class="RktVar">pval</span></span> means the form <span class="RktVar">form</span> whose syntax object has the property named <span class="RktVar">pname</span> set to the value <span class="RktVar">pval</span>.
A form <span class="RktVar">form</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVar">pname</span><span class="stt"> </span><span class="RktSym">&#8800;</span><span class="stt"> </span><span class="RktVar">pval</span></span> means the form <span class="RktVar">form</span> whose syntax object has the property named <span class="RktVar">pname</span> set to some value that is not <span class="RktVar">pval</span>.
A form <span class="RktPn">(</span><span class="RktVar">sub-form</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVar">pname</span><span class="stt"> </span><span class="RktVar">=/&#8800;</span><span class="stt"> </span><span class="RktVar">pval</span></span> may alternatively be written as <span class="RktPn">(</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVar">pname</span><span class="stt"> </span><span class="RktVar">=/&#8800;</span><span class="stt"> </span><span class="RktVar">pval</span></span><span class="stt"> </span><span class="RktVar">sub-form</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span>.</p><p>Anything of the form <span class="RktVar">id</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">id-expr</span></span> is actually a non-terminal like <span class="RktVar">id-expr</span>, but for the specific identifier <span class="RktVar">id</span>.</p><p><table cellspacing="0" cellpadding="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-begin-form</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25module-begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%module-begin</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-modlv-form</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mgl-modlv-form</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">#%provide</span><span class="stt"> </span><span class="RktVar">raw-provide-spec</span><span style="vertical-align: sub; font-size: 80%">rkt</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">#%require</span><span class="stt"> </span><span class="RktVar">raw-require-spec</span><span style="vertical-align: sub; font-size: 80%">rkt</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">submodule-form</span><span style="vertical-align: sub; font-size: 80%">rkt,ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-modlv-form</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin-for-syntax%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin-for-syntax</a></span><span class="stt"> </span><span class="RktVar">module-level-form</span><span style="vertical-align: sub; font-size: 80%">rkt</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">module-level-def</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-syntaxes%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-syntaxes</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">trans-id</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">Racket-expr</span><span class="RktPn">)</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">in-racket-form</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-level-def</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declare</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">Racket-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">expr</span><span style="vertical-align: sub; font-size: 80%">rkt</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in-racket-form</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">Racket-form</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVal">'</span><span class="RktVal">for-target</span><span class="stt"> </span><span class="RktSym">&#8800;</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">cxx</span></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mgl-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">in-racket-form</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...+</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">begin0</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=__expression.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25expression%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%expression</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...+</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">if-target-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foreign-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">id-expr</span></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">id-expr</span></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">id-expr</span></span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktVar">id-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVal">'</span><span class="RktVal">annotate</span><span class="stt"> </span><span class="RktSym">&#8800;</span><span class="stt"> </span><span class="RktVal">#f</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._let-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-anno-expr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._let-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">let-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">bind-in-let</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...+</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._letrec-values%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">letrec-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">bind-in-let</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...+</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._letrec-syntaxes%252Bvalues%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">letrec-syntaxes+values</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">trans-id</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">bind-in-let</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...+</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=set_.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._set%2521%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">quote</a></span><span class="stt"> </span><span class="RktVar">datum</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=__top.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25top%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%top</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">id</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bind-in-let</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">id-expr</span></span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">if-target-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVal">'</span><span class="RktVal">if-target</span><span class="stt"> </span><span class="RktSym">=</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">cxx</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span style="vertical-align: sub; font-size: 80%"><span class="RktVal">'</span><span class="RktVal">if-target</span><span class="stt"> </span><span class="RktSym">&#8800;</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">cxx</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="hspace">&nbsp;</span><span class="RktVar">mgl-expr</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=__top.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25top%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%top</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">id</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=__expression.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25expression%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%expression</a></span><span class="hspace">&nbsp;</span><span class="RktVar">id-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mgl-anno-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="stt"> </span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="stt"> </span><span class="RktVar">anno-expr</span><span class="stt"> </span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">anno-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">anno</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">type</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">type-expr</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">anno</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">quote</a></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">anno-val-expr</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">anno-val-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">quote</a></span><span class="stt"> </span><span class="RktVar">datum</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">quote-syntax</span><span class="stt"> </span><span class="RktVar">datum</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">type-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">fn-type-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fn-type-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._~23~25magnolisp%29%29" class="RktValLink" data-pltdoc="x">#%magnolisp</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fn</span><span class="hspace">&nbsp;</span><span class="RktVar">type-expr</span><span class="hspace">&nbsp;</span><span class="RktSym">...+</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">Racket-expr</span><span style="vertical-align: sub; font-size: 80%">ign</span><span class="RktPn">)</span></td></tr></table></td></tr></table></p><p>where:</p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">id</span></td></tr></table></blockquote><p>An identifier.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">trans-id</span></td></tr></table></blockquote><p>An identifier with a <span style="font-style: italic">transformer binding</span>.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">datum</span></td></tr></table></blockquote><p>A piece of literal data. A <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">quote</a></span><span class="stt"> </span><span class="RktVar">datum</span><span class="RktPn">)</span> form is a literal in Magnolisp, and its type must be possible to infer from context. Boolean literals are an exception, as their Magnolisp type is recognized as <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcore..rkt%29._.Bool%29%29" class="RktValLink" data-pltdoc="x">Bool</a></span>.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">Racket-form</span></td></tr></table></blockquote><p>Any Racket core form.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">in-racket-form</span></td></tr></table></blockquote><p>Any Racket form that has the syntax property <span class="RktVal">'</span><span class="RktVal">for-target</span> set to some value that is not <span class="RktVal">'</span><span class="RktVal">cxx</span>, meaning that the form is not intended for compilation to C++. These are ignored by the Magnolisp compiler where possible, and it is an error if they persist in contexts where they ultimately cannot be ignored. (The <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._begin-racket%29%29" class="RktStxLink" data-pltdoc="x">begin-racket</a></span> and <span class="RktSym">begin-for-racket</span> forms are implemented through this mechanism.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">if-target-expr</span></td></tr></table></blockquote><p>Indicates a choice between two expressions that is conditional on the compilation target language. Where the syntax property <span class="RktVal">'</span><span class="RktVal">if-target</span> is set to the value <span class="RktVal">'</span><span class="RktVal">cxx</span>, the Magnolisp compiler will only compile the first expression. If it is set to some other value (indicating another target language), only the second expression will be compiled. (The <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._if-target%29%29" class="RktStxLink" data-pltdoc="x">if-target</a></span> form is implemented through this mechanism.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">submodule-form</span></td></tr></table></blockquote><p>A Racket submodule definition. Submodules are not actually supported by the <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language, but the Magnolisp compiler does allow them to appear, and merely ignores them.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">anno-expr</span></td></tr></table></blockquote><p>An annotation expression, containing an identifier <span class="RktVar">id</span> naming the kind of annotation, and an expression specifying the &ldquo;value&rdquo; of the annotation. In the generic case, any symbol can be used to name an annotation kind, and any <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">quote</a></span>d or <span class="RktSym">quote-syntax</span>ed datum can give the value. Only annotations of kind <span class="RktVal">'</span><span class="RktVal">type</span> are parsed in a specific way.</p></blockquote><p>(<span style="font-style: italic">Warning: </span>For some of the <span class="RktSym">id</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">id-expr</span></span> non-terminals, the current parser actually assumes a direct <span class="RktVar">id</span>.)</p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Evaluation&quot;">6<tt>&nbsp;</tt><a name="(part._.Evaluation)"></a>Evaluation</h3><p>Programs written in Magnolisp can be evaluated in the usual Racket way, provided that the <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> signature specifies the language as <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a>. Any module top-level phase level 0 expressions are evaluated, and the results are printed (as for Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25module-begin%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">#%module-begin</a></span>).</p><p>It is also possible to launch a Magnolisp REPL, by issuing the command:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">racket -I magnolisp</span></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Magnolisp-Based_Languages&quot;">7<tt>&nbsp;</tt><a name="(part._.Magnolisp-.Based_.Languages)"></a><a name="(mod-path._magnolisp/modbeg)"></a>Magnolisp-Based Languages</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._magnolisp%2Fmodbeg%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/modbeg</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/magnolisp" title="Install this package using `raco pkg install magnolisp`"><span class="stt">magnolisp</span></a></span></td></tr></table></p><p><div class="SIntrapara">It is possible to implement languages other than Magnolisp that are translatable into C++ using Magnolisp&rsquo;s compiler. To enable this, the language&rsquo;s implementation must conform to the following requirements:
</div><div class="SIntrapara"><ul><li><p>The macros of the language must target Magnolisp&rsquo;s <a href="#%28part._core-syntax%29" data-pltdoc="x">core syntax</a>.</p></li><li><p>It follows that the language must refer to Magnolisp&rsquo;s <a href="#%28part._built-ins%29" data-pltdoc="x">built-in types</a>, since certain core forms expect said types.</p></li><li><p>The language must export Magnolisp&rsquo;s <span class="RktSym">#%module-begin</span> macro, or its own variant thereof, one that prepares all the information that the Magnolisp compiler expects.</p></li><li><p>Where it is not the <a href="#%28mod-path._magnolisp%2Fprelude%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/prelude</span></a> module that specifies C++ mappings for the language&rsquo;s built-ins and primitives, the name of said module (or modules) must be communicated to the compiler via the language&rsquo;s own <span class="RktSym">#%module-begin</span> macro.</p></li></ul></div></p><p>For an example of a language targeting Magnolisp core language, see
<a href="https://bldl.github.io/erda/#%28part._.Erda.C__%29">Erda<span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">C++</span></span></a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._magnolisp/modbeg..rkt)._module-begin))"></a><span title="Provided from: magnolisp/modbeg | Package: magnolisp"><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fmodbeg..rkt%29._module-begin%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">module-begin</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">form</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">An implementation of Magnolisp&rsquo;s <span class="RktSym">#%module-begin</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._magnolisp/modbeg..rkt)._make-module-begin))"></a><span title="Provided from: magnolisp/modbeg | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fmodbeg..rkt%29._make-module-begin%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-module-begin</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">stx</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:prelude-path</span><span class="hspace">&nbsp;</span><span class="RktVar">prelude-stx</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">syntax?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">syntax?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prelude-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">syntax?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">magnolisp/prelude</span><span class="RktVal">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A helper function for implementing Magnolisp-compiler-compatible <span class="RktSym">#%module-begin</span> macros. The <span class="RktVar">stx</span> argument should be syntax for the <span class="RktSym">(#%module-begin<span class="stt"> </span>form<span class="stt"> </span>...)</span> macro invocation. The <span class="RktVar">prelude-stx</span> argument may be used to specify syntax for a list of module paths that should be loaded by the compiler, so that the compiler will know how to translate runtime support names into C++.</div></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;Compiler_API&quot;">8<tt>&nbsp;</tt><a name="(part._.Compiler_.A.P.I)"></a><a name="(mod-path._magnolisp/compiler-api)"></a>Compiler API</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._magnolisp%2Fcompiler-api%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/compiler-api</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/magnolisp" title="Install this package using `raco pkg install magnolisp`"><span class="stt">magnolisp</span></a></span></td></tr></table></p><p>The Magnolisp implementation includes a compiler targeting C++. The <a href="#%28mod-path._magnolisp%2Fcompiler-api%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp/compiler-api</span></a> library provides an API for invoking the compiler.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._magnolisp/compiler-api..rkt)._compile-modules))"></a><span title="Provided from: magnolisp/compiler-api | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compile-modules%29%29" class="RktValDef RktValLink" data-pltdoc="x">compile-modules</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">module-path-v</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktMeta">...</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:relative-to</span><span class="hspace">&nbsp;</span><span class="RktVar">rel-to-path-v</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compilation-state~3f%29%29" class="RktValLink" data-pltdoc="x">compilation-state?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">module-path?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rel-to-path-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._-~3e%29%29" class="RktStxLink" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">any</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">false/c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._magnolisp/compiler-api..rkt)._compile-files))"></a><span title="Provided from: magnolisp/compiler-api | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compile-files%29%29" class="RktValDef RktValLink" data-pltdoc="x">compile-files</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path-s</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compilation-state~3f%29%29" class="RktValLink" data-pltdoc="x">compilation-state?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path-s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Invoke the compiler front end for analysing a Magnolisp program, whose &ldquo;entry modules&rdquo; are specified either as module paths or files. Any specified modules that are not in the <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> language are effectively ignored, as they do not contain any <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span>ed Magnolisp definitions.
Both functions return an opaque compilation state object, which may be passed to <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._generate-files%29%29" class="RktValLink" data-pltdoc="x">generate-files</a></span> for code generation.</div></p><p>The optional argument <span class="RktVar">rel-to-path-v</span> is as for <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=syntax&amp;rel=module-helpers.html%23%2528def._%2528%2528lib._syntax%252Fmodresolve..rkt%2529._resolve-module-path%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">resolve-module-path</a></span>. It is only relevant for relative module paths, and indicates to which path such paths should be considered relative.</p><p>Any <span class="RktVar">path-s</span> is mapped to a <span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">file</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktVar">path-s</span><span class="RktVal">)</span> module path, coercing <span class="RktVar">path-s</span> to a string if necessary.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._magnolisp/compiler-api..rkt)._compilation-state~3f))"></a><span title="Provided from: magnolisp/compiler-api | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compilation-state~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">compilation-state?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a compilation state object (as returned by <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compile-modules%29%29" class="RktValLink" data-pltdoc="x">compile-modules</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compile-files%29%29" class="RktValLink" data-pltdoc="x">compile-files</a></span>), <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._magnolisp/compiler-api..rkt)._generate-files))"></a><span title="Provided from: magnolisp/compiler-api | Package: magnolisp"><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._generate-files%29%29" class="RktValDef RktValLink" data-pltdoc="x">generate-files</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">st</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">backends</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:outdir</span><span class="hspace">&nbsp;</span><span class="RktVar">outdir</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:basename</span><span class="hspace">&nbsp;</span><span class="RktVar">basename</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:out</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:banner</span><span class="hspace">&nbsp;</span><span class="RktVar">banner?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">st</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._magnolisp%2Fcompiler-api..rkt%29._compilation-state~3f%29%29" class="RktValLink" data-pltdoc="x">compilation-state?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">backends</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons/c</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">outdir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-directory</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">basename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">"output"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">output-port?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-output-port</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">banner?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr></table></blockquote></div><div class="SIntrapara">Performs code generation for the program whose intermediate representation (IR) is stored in the compilation state <span class="RktVar">st</span>. Code generation is only performed with the specified compiler back ends, and for the specified back end specific file types. For instance, to generate both a C++ header and implementation, you may pass <span class="RktVar">backends</span> as <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">cxx</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">parts</span><span class="stt"> </span><span class="RktVal">cc</span><span class="stt"> </span><span class="RktVal">hh</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span>. The <span class="RktVar">backends</span> argument is an association list with one entry per backend. Passing <span class="RktVar">out</span> as <span class="RktVal">#f</span> causes code generation into (separate) files; otherwise the specified output port is used. When <span class="RktVar">out</span> is a true value, the <span class="RktVar">banner?</span> argument indicates whether banners (with filenames) should be printed to precede individual output files. When <span class="RktVar">out</span> is <span class="RktVal">#f</span>, the <span class="RktVar">outdir</span> argument specifies the output directory for generated files. The <span class="RktVar">basename</span> string is used as the &ldquo;stem&rdquo; for output file names.</div></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;magnolisp-cli&quot;">9<tt>&nbsp;</tt><a name="(part._magnolisp-cli)"></a><span class="stt">mglc</span></h3><p>The compiler can also be invoked via the <span class="stt">mglc</span> command-line tool, specifying the program to compile. The tool gets installed by invoking <span class="stt">raco setup</span>. (Alternatively you may just run it as <span class="stt">./mglc</span> on Unix platforms.)</p><p>To compile a program with <span class="stt">mglc</span>, list the source files of the program as arguments; the program will consist of all the functions in the listed files that are annotated with the <span class="RktSym"><a href="#%28form._%28%28lib._magnolisp%2Fsurface..rkt%29._export%29%29" class="RktStxLink" data-pltdoc="x">export</a></span> flag, as well as any code on which they rely. A number of compiler options affecting compilation behavior may be passed, see <span class="stt">mglc --help</span> for a list.</p><p>An example invocation would be:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">mglc --stdout --banner --cxx my-program.rkt</span></p><p>which instructs the compiler to print out C++ code into standard output, with banners, for the program <span class="stt">"my-program.rkt"</span>.</p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;magnolisp-examples&quot;">10<tt>&nbsp;</tt><a name="(part._magnolisp-examples)"></a>Example Code</h3><p>For sample Magnolisp programs, see the <span class="stt">"test-*.rkt"</span> files in the <span class="stt">"tests"</span> directory of the Magnolisp implementation codebase.</p><p>Note that some of the example programs are written in Magnolisp language variants other than <a href="#%28mod-path._magnolisp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">magnolisp</span></a> (which is the only one documented here), but the differences are typically minor and superficial.</p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;magnolisp-repo&quot;">11<tt>&nbsp;</tt><a name="(part._magnolisp-repo)"></a>Source Code</h3><p><div class="SIntrapara">The Magnolisp source code repository is hosted at:
</div><div class="SIntrapara"><blockquote><p><a href="https://github.com/bldl/magnolisp"><span class="url">https://github.com/bldl/magnolisp</span></a></p></blockquote></div></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;magnolisp-install&quot;">12<tt>&nbsp;</tt><a name="(part._magnolisp-install)"></a>Installation</h3><p>Racket version 6.3 or higher is required to run the software; a known-compatible version is 6.5, but versions 6.3&ndash;6.6 are all expected to work. Version 6.2.1 will not work due to Racket 6.3 having a different <a href="http://www.cs.utah.edu/plt/scope-sets/">macro model</a>, and also due to differences in its <a href="https://blog.racket-lang.org/2015/10/retiring-unstable.html">organization of <span class="RktMod">unstable</span> libraries</a>.</p><p><div class="SIntrapara">The software is installable directly off GitHub with the command:
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco pkg install </span><span class="stt">git://github.com/bldl/magnolisp</span></div></p><h3 x-source-module="(lib &quot;magnolisp/manual-src/magnolisp.scrbl&quot;)" x-source-pkg="magnolisp" x-part-tag="&quot;magnolisp-license&quot;">13<tt>&nbsp;</tt><a name="(part._magnolisp-license)"></a>License</h3><p>Except where otherwise noted, the following license applies:</p><p>Copyright &#169; 2012&ndash;2016 University of Bergen and the authors.</p><p>Authors: Tero Hasu</p><p>Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation files
(the "Software"), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software,
and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:</p><p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p><p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>