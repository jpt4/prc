<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Dynamic FFI</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Dynamic FFI</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Warning__.Read_this_.Section_.Before_.Use%29" class="tocviewlink" data-pltdoc="x">Warning:<span class="mywbr"> &nbsp;</span> Read this Section Before Use</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Dependencies%29" class="tocviewlink" data-pltdoc="x">Dependencies</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Defining_.F.F.Is%29" class="tocviewlink" data-pltdoc="x">Defining FFIs</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Generating_.Static_.F.F.Is%29" class="tocviewlink" data-pltdoc="x">Generating Static FFIs</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Inline_.F.F.Is%29" class="tocviewlink" data-pltdoc="x">Inline FFIs</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Limitations%29" class="tocviewlink" data-pltdoc="x">Limitations</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Acknowledgements%29" class="tocviewlink" data-pltdoc="x">Acknowledgements</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Dynamic FFI</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Warning__.Read_this_.Section_.Before_.Use%29" class="tocsubseclink" data-pltdoc="x">Warning:<span class="mywbr"> &nbsp;</span> Read this Section Before Use</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Dependencies%29" class="tocsubseclink" data-pltdoc="x">Dependencies</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Defining_.F.F.Is%29" class="tocsubseclink" data-pltdoc="x">Defining FFIs</a></td></tr><tr><td><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>dynamic-<wbr></wbr>ffi</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._dynamic-ffi-lib%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dynamic-<wbr></wbr>ffi-<wbr></wbr>lib</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%2Fcached%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>dynamic-<wbr></wbr>ffi/<span class="mywbr"> &nbsp;</span>cached</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Generating_.Static_.F.F.Is%29" class="tocsubseclink" data-pltdoc="x">Generating Static FFIs</a></td></tr><tr><td><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._generate-static-ffi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generate-<wbr></wbr>static-<wbr></wbr>ffi</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._generate-mapped-static-ffi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generate-<wbr></wbr>mapped-<wbr></wbr>static-<wbr></wbr>ffi</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Inline_.F.F.Is%29" class="tocsubseclink" data-pltdoc="x">Inline FFIs</a></td></tr><tr><td><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-inline-ffi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>inline-<wbr></wbr>ffi</span></span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Limitations%29" class="tocsubseclink" data-pltdoc="x">Limitations</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Acknowledgements%29" class="tocsubseclink" data-pltdoc="x">Acknowledgements</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Dynamic_.F.F.I)"></a><a name="(mod-path._dynamic-ffi/unsafe)"></a>Dynamic FFI</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">David Benoit &lt;<a href="mailto:dbenoit@fedoraproject.org">dbenoit@fedoraproject.org</a>&gt;</p></span></div><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">dynamic-ffi/unsafe</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/dynamic-ffi" title="Install this package using `raco pkg install dynamic-ffi`"><span class="stt">dynamic-ffi</span></a></span></td></tr></table></div><div class="SIntrapara">This module produces automatic ABI-native ffi bindings to C libraries.</div><div class="SIntrapara">Dynamic FFI is a native Racket extension which embeds clang/llvm to
parse out declarations
from C headers and dynamically build ffi objects with correct type/size
information. This library is currently only availalable for GNU/Linux,
but should be easily portable to other operating systems.  If you are
experienced with building clang/llvm plugins on other OSes and would
like to contribute, please contact the author.</div><div class="SIntrapara">This module uses native extensions to Racket&rsquo;s C runtime, and is not
currently compatible with Racket-on-Chez.  Support for Racket-on-Chez
is planned for the future.</div></p><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Warning__Read_this_Section_Before_Use&quot;">1<tt>&nbsp;</tt><a name="(part._.Warning__.Read_this_.Section_.Before_.Use)"></a>Warning: Read this Section Before Use</h3><p>Like Racket&rsquo;s built-in <span class="RktSym">ffi/unsafe</span> module, this library allows Racket to
  use C functions and data structures that are not memory-managed by Racket.
  Racket can not provide safety guarantees by default for ffi objects created
  using this library.  Users of this library will be required to self-enforce
  memory management in C and/or manually expose ffi objects to Racket&rsquo;s garbage
  collector.  Extra care should be taken to ensure that C functions bound via
  this library or Racket&rsquo;s built-in ffi do not contain errors like buffer overflows,
  which could corrupt the runtime, cause undefined behavior, and prevent Racket from
  providing useful error messages.</p><p>Users of this library should be extremely cautious.  The library
  makes it easier to call C functions from Racket, but does <span style="font-weight: bold">not</span> make
  it safer.</p><p>Finally:</p><p><span style="font-weight: bold">Passing unsanitized user-input to any function in this library
is horribly dangerous.  You should never do it under any circumstance.</span></p><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Dependencies&quot;">2<tt>&nbsp;</tt><a name="(part._.Dependencies)"></a>Dependencies</h3><p>Dynamic FFI requires clang and llvm headers and libraries to work.
Clang versions 6 and 7 are both known to work with Dynamic FFI.
This library does not bundle clang or llvm.</p><p>To install a clang toolchain on Fedora:</p><blockquote class="SCodeFlow"><p><span class="RktSym">sudo</span><span class="hspace">&nbsp;</span><span class="RktSym">dnf</span><span class="hspace">&nbsp;</span><span class="RktSym">install</span><span class="hspace">&nbsp;</span><span class="RktVal">"@development tools"</span><span class="hspace">&nbsp;</span><span class="RktSym">racket</span><span class="hspace">&nbsp;</span><span class="RktSym">llvm-devel</span><span class="hspace">&nbsp;</span><span class="RktSym">clang-devel</span></p></blockquote><p><div class="SIntrapara">To install a clang toolchain on Ubuntu:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktSym">sudo</span><span class="hspace">&nbsp;</span><span class="RktSym">apt-get</span><span class="hspace">&nbsp;</span><span class="RktSym">install</span><span class="hspace">&nbsp;</span><span class="RktVal">"build-essential"</span><span class="hspace">&nbsp;</span><span class="RktSym">racket</span><span class="hspace">&nbsp;</span><span class="RktSym">llvm-dev</span><span class="hspace">&nbsp;</span><span class="RktSym">libclang-dev</span><span class="hspace">&nbsp;</span><span class="RktSym">clang</span></p></blockquote></div></p><p>During the raco package install, Dynamic FFI will compile itself and link
with the system clang libraries.  Dependencies should be installed before
the raco installation, or else the library will defer building itself, and will
complain about missing dependencies when you try to use it.  To finish the
installation process, install the required dependencies and run the following
command:</p><blockquote class="SCodeFlow"><p><span class="RktSym">raco</span><span class="hspace">&nbsp;</span><span class="RktSym">setup</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-p</span></span><span class="hspace">&nbsp;</span><span class="RktSym">dynamic-ffi</span></p></blockquote><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Defining_FFIs&quot;">3<tt>&nbsp;</tt><a name="(part._.Defining_.F.F.Is)"></a>Defining FFIs</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._dynamic-ffi/unsafe..rkt)._define-dynamic-ffi))"></a><span title="Provided from: dynamic-ffi/unsafe | Package: dynamic-ffi"><span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-dynamic-ffi</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">lib</span><span class="hspace">&nbsp;</span><span class="RktVar">header</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">id</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">lib</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">header</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Parses headers for syntax tree data and builds dynamic ffi bindings.
  The resulting <span class="RktSym">id</span> will be bound to a case-lambda function which
  takes the name of the C function as the first argument, and the C function
  parameters as the rest.  If the defined <span class="RktSym">id</span> is called with no
  arguments, a hash-map of all symbols and ffi objects in the library is returned.</div></p><p>The lib argument can be a relative library created using <span class="RktSym"><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._dynamic-ffi-lib%29%29" class="RktValLink" data-pltdoc="x">dynamic-ffi-lib</a></span>,
  or a hard-coded path omitting the object file extension.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dynamic-ffi/unsafe</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-dynamic-ffi</a></span><span class="hspace">&nbsp;</span><span class="RktSym">libc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._dynamic-ffi-lib%29%29" class="RktValLink" data-pltdoc="x">dynamic-ffi-lib</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"libc"</span><span class="hspace">&nbsp;</span><span class="RktVal">"6"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"/usr/include/stdio.h"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">libc</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"hello world"</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._dynamic-ffi/unsafe..rkt)._dynamic-ffi-lib))"></a><span title="Provided from: dynamic-ffi/unsafe | Package: dynamic-ffi"><span class="RktSym"><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._dynamic-ffi-lib%29%29" class="RktValDef RktValLink" data-pltdoc="x">dynamic-ffi-lib</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">lib</span><span class="hspace">&nbsp;</span><span class="RktVar">version</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">cons/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lib</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">version</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Takes a library base name and shared object versions, and produces
  a list argument which can be used in place of a hard-coded system
  object file path.  In the above <span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-dynamic-ffi</a></span> example,
  Racket will search for <span class="RktSym">libc.so.6</span> in the default system library paths.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._dynamic-ffi/unsafe..rkt)._define-dynamic-ffi/cached))"></a><span title="Provided from: dynamic-ffi/unsafe | Package: dynamic-ffi"><span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%2Fcached%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-dynamic-ffi/cached</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">lib</span><span class="hspace">&nbsp;</span><span class="RktVar">header</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">id</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">lib</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">header</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This form behaves the same way as <span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-dynamic-ffi</a></span>,
  except it caches static ffi bindings so that they do not need
  to be recomputed in future program executions.</div></p><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Generating_Static_FFIs&quot;">4<tt>&nbsp;</tt><a name="(part._.Generating_.Static_.F.F.Is)"></a>Generating Static FFIs</h3><p>This library has the ability to generate static ffi files that can be used
  without the dependency on <span class="RktSym">dynamic-ffi</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._dynamic-ffi/unsafe..rkt)._generate-static-ffi))"></a><span title="Provided from: dynamic-ffi/unsafe | Package: dynamic-ffi"><span class="RktSym"><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._generate-static-ffi%29%29" class="RktValDef RktValLink" data-pltdoc="x">generate-static-ffi</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">ffi-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">file</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">lib-path</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">headers</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ffi-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lib-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">headers</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Generates a static ffi where identifiers corresponding to C function names
  are prefixed with <span class="RktSym">ffi-name</span> and bound to their associated ffi objects.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._dynamic-ffi/unsafe..rkt)._generate-mapped-static-ffi))"></a><span title="Provided from: dynamic-ffi/unsafe | Package: dynamic-ffi"><span class="RktSym"><a href="#%28def._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._generate-mapped-static-ffi%29%29" class="RktValDef RktValLink" data-pltdoc="x">generate-mapped-static-ffi</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">ffi-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">file</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">lib-path</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">headers</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ffi-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lib-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">headers</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Generates a static ffi whose interface is equivalent to the case-lambda function
produced by <span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-dynamic-ffi</a></span>.</div></p><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Inline_FFIs&quot;">5<tt>&nbsp;</tt><a name="(part._.Inline_.F.F.Is)"></a>Inline FFIs</h3><p>This library allows users to write C functions inline, which will be compiled
at runtime and provided as a dynamic ffi.</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._dynamic-ffi/unsafe..rkt)._define-inline-ffi))"></a><span title="Provided from: dynamic-ffi/unsafe | Package: dynamic-ffi"><span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-inline-ffi%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-inline-ffi</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">code</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">#:compiler</span><span class="hspace">&nbsp;</span><span class="RktVar">compiler</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">#:compile-flags</span><span class="hspace">&nbsp;</span><span class="RktVar">flags</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">name</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">code</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">compiler</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">flags</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">auto</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote><p>Define ffi bindings by writing inline C code.  This form is designed for use
  with the at-reader.  For security reasons <span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-dynamic-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-dynamic-ffi</a></span> only
  accepts C code as string literals.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-inline-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-inline-ffi</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mylib</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"int add(int x, int y) {"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">return x + y;"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"}"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">mylib</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">add</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Extra compile flags can be passed to <span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-inline-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-inline-ffi</a></span>, and the
  default compiler can be overridden.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-inline-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-inline-ffi</a></span><span class="hspace">&nbsp;</span><span class="RktSym">libm</span><span class="hspace">&nbsp;</span><span class="RktPn">#:compile-flags</span><span class="hspace">&nbsp;</span><span class="RktVal">"-lm"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:compiler</span><span class="hspace">&nbsp;</span><span class="RktVal">"clang"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"#include &lt;math.h&gt;"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"double square_root(double x) {"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">return sqrt(x);"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"}"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">libm</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">square_root</span><span class="hspace">&nbsp;</span><span class="RktVal">16</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Limitations&quot;">6<tt>&nbsp;</tt><a name="(part._.Limitations)"></a>Limitations</h3><p>This library is able to generate dynamic ffi bindings for a fairly
  large portion of the C language standard.  Occasionally we find
  special declaration types that clang treats differently, which
  the library may not have support for yet.  When such declarations are
  encountered, <span class="RktSym">dynamic-ffi</span> will emit error messages with
  details about the missing functionality.  Please report any issues you
  find at
  <a href="https://github.com/dbenoit17/dynamic-ffi">the project issue tracker</a>.</p><p>As a workaround in almost every case, <span class="RktSym"><a href="#%28form._%28%28lib._dynamic-ffi%2Funsafe..rkt%29._define-inline-ffi%29%29" class="RktStxLink" data-pltdoc="x">define-inline-ffi</a></span> can be used to write
  a wrapper around functions that <span class="RktSym">dynamic-ffi</span> is unable to parse.</p><h3 x-source-module="(lib &quot;dynamic-ffi/scribblings/dynamic-ffi.scrbl&quot;)" x-source-pkg="dynamic-ffi" x-part-tag="&quot;Acknowledgements&quot;">7<tt>&nbsp;</tt><a name="(part._.Acknowledgements)"></a>Acknowledgements</h3><p>Special thanks to Jay McCarthy for suggesting this project idea,
  and for his advisership during its implementation.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>