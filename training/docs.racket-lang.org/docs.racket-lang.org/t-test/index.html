<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>T-Test: two popular functions</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">T-<wbr></wbr>Test:<span class="mywbr"> &nbsp;</span> two popular functions</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Acknowledgments%29" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">T-<wbr></wbr>Test:<span class="mywbr"> &nbsp;</span> two popular functions</a></td></tr><tr><td><a href="#%28def._%28%28lib._t-test%2Fmain..rkt%29._welch-t-test%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">welch-<wbr></wbr>t-<wbr></wbr>test</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._t-test%2Fmain..rkt%29._student-t-test%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">student-<wbr></wbr>t-<wbr></wbr>test</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Acknowledgments%29" class="tocsubseclink" data-pltdoc="x">Acknowledgments</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;t-test/t-test.scrbl&quot;)" x-source-pkg="t-test" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.T-.Test__two_popular_functions)"></a><a name="(mod-path._t-test)"></a>T-Test: two popular functions</h2><p>John Clements &lt;<a href="mailto:clements@racket-lang.org">clements@racket-lang.org</a>&gt;</p><p>This package provides both Welch&rsquo;s T-Test and the more well-known
Student&rsquo;s T-Test.</p><p>These functions both make Bayesians unhappy, and with some reason.
Specifically, these functions try to answer this question: "if
these two sets are chosen from the same distribution, what is the
likelihood of an outcome this strange or stranger?" The actual
question that people typically want to answer is instead: "given
these two sets of observations, what&rsquo;s the likelihood that the
two sets are chosen from the same distribution?" The problem is
that this Bayesian reversal is possible only with some assumption
about the prior likelihood of the various distributions, which
is generally not known. For this reason, experimenters often
just tell the Bayesians to go away and let them run their t-tests.</p><p>Separately, there are problems with the classic "Student&rsquo;s T-Test"
proposed by Gosset. Specifically, its results are valid only if
both samples are known to be drawn from distributions that are
normal, and that have the
same variance. In the case that the two variances are not known
to be equal, the correct choice is apparently to use Welch&rsquo;s
t-test, which does not make this assumption. Unsurprisingly, it
has less power, but apparently not hugely less.</p><p>A note about implementation: the interesting part of the computation
is determining the cumulative distribution function (CDF) of the
appropriate distribution. This library simply uses the built-in
"incomplete beta function" <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=math&amp;rel=special.html%23%2528def._%2528%2528lib._math%252Fspecial-functions..rkt%2529._beta-inc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">beta-inc</a></span>
from the math library to perform this computation. So really,
Neil Toronto did all of the heavy lifting, here.</p><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">t-test</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/t-test" title="Install this package using `raco pkg install t-test`"><span class="stt">t-test</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._t-test/main..rkt)._welch-t-test))"></a><span title="Provided from: t-test | Package: t-test"><span class="RktSym"><a href="#%28def._%28%28lib._t-test%2Fmain..rkt%29._welch-t-test%29%29" class="RktValDef RktValLink" data-pltdoc="x">welch-t-test</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">S1</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">S2</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:t-statistic</span><span class="hspace">&nbsp;</span><span class="RktVar">t-statistic?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">Real</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">S1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Sequenceof</span><span class="hspace">&nbsp;</span><span class="RktSym">Real</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">S2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Sequenceof</span><span class="hspace">&nbsp;</span><span class="RktSym">Real</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t-statistic?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">Boolean</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Given two sequences of reals (lists work fine), return the p-value
associated with a two-tailed t-test. If <span class="RktVar">t-statistic?</span> is
true, return instead the t-statistic.</div></p><p>The two-tailed p-value represents the likelihood of an occurrence
this strange or stranger given the null hypothesis that the two
distributions have the same mean.</p><p>Let&rsquo;s have an example. Suppose that the there are two sections
of a class, and in the first one, the final scores are given
by s1, and the second section&rsquo;s scores by s2:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">s1</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">63.9</span><span class="hspace">&nbsp;</span><span class="RktVal">92.3</span><span class="hspace">&nbsp;</span><span class="RktVal">80.9</span><span class="hspace">&nbsp;</span><span class="RktVal">85.9</span><span class="hspace">&nbsp;</span><span class="RktVal">86.8</span><span class="hspace">&nbsp;</span><span class="RktVal">87.6</span><span class="hspace">&nbsp;</span><span class="RktVal">91.7</span><span class="hspace">&nbsp;</span><span class="RktVal">84.4</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">s2</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">86.6</span><span class="hspace">&nbsp;</span><span class="RktVal">91.3</span><span class="hspace">&nbsp;</span><span class="RktVal">63.7</span><span class="hspace">&nbsp;</span><span class="RktVal">69.2</span><span class="hspace">&nbsp;</span><span class="RktVal">78.5</span><span class="hspace">&nbsp;</span><span class="RktVal">74.0</span><span class="hspace">&nbsp;</span><span class="RktVal">85.4</span><span class="hspace">&nbsp;</span><span class="RktVal">89.0</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>We want to test whether there&rsquo;s a significant difference between
the two. First, we choose a p-value, perhaps 0.02, representing
a two percent chance. Then, we run the test:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._t-test%2Fmain..rkt%29._welch-t-test%29%29" class="RktValLink" data-pltdoc="x">welch-t-test</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">s1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">s2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">=&gt;</span><span class="hspace">&nbsp;</span><span class="RktCmt">0.3630116587607044</span><span class="RktMeta"></span></td></tr></table></blockquote><p>That is, there&rsquo;s about a 36% chance of something this strange
or stranger occuring. This is way above our threshold of 2%,
so we conclude that there&rsquo;s insufficient evidence to reject
the null hypothesis.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._t-test/main..rkt)._student-t-test))"></a><span title="Provided from: t-test | Package: t-test"><span class="RktSym"><a href="#%28def._%28%28lib._t-test%2Fmain..rkt%29._student-t-test%29%29" class="RktValDef RktValLink" data-pltdoc="x">student-t-test</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">S1</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">S2</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:t-statistic</span><span class="hspace">&nbsp;</span><span class="RktVar">t-statistic?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">Real</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">S1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Sequenceof</span><span class="hspace">&nbsp;</span><span class="RktSym">Real</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">S2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Sequenceof</span><span class="hspace">&nbsp;</span><span class="RktSym">Real</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t-statistic?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">Boolean</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Given two sequences of reals (lists work fine), return the p-value
associated with a two-tailed t-test. If <span class="RktVar">t-statistic?</span> is
true, return instead the t-statistic.</div></p><p>This function uses the "Student&rsquo;s t-test", rather than Welch&rsquo;s
t-test.</p><h3 x-source-module="(lib &quot;t-test/t-test.scrbl&quot;)" x-source-pkg="t-test" x-part-tag="&quot;Acknowledgments&quot;">1<tt>&nbsp;</tt><a name="(part._.Acknowledgments)"></a>Acknowledgments</h3><p>Many thanks to Tim Brown for posting his translation of the C
code for Welch&rsquo;s t-test to Rosetta Code.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>