<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>AWS S3 Synchronization</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">AWS S3 Synchronization</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.S3_.Synchronization_.A.P.I%29" class="tocviewlink" data-pltdoc="x">S3 Synchronization API</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.S3_gzip_.Support%29" class="tocviewlink" data-pltdoc="x">S3 <span class="stt">gzip</span> Support</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.S3_.Web_.Page_.Support%29" class="tocviewlink" data-pltdoc="x">S3 Web Page Support</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.S3_.Web_.Page_.Configuration%29" class="tocviewlink" data-pltdoc="x">S3 Web Page Configuration</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.S3_.Routing_.Rules%29" class="tocviewlink" data-pltdoc="x">S3 Routing Rules</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">AWS S3 Synchronization</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.S3_.Synchronization_.A.P.I%29" class="tocsubseclink" data-pltdoc="x">S3 Synchronization API</a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fmain..rkt%29._s3-sync%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">s3-<wbr></wbr>sync</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.S3_gzip_.Support%29" class="tocsubseclink" data-pltdoc="x">S3 <span class="stt">gzip</span> Support</a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fgzip..rkt%29._make-gzip-handlers%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>gzip-<wbr></wbr>handlers</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.S3_.Web_.Page_.Support%29" class="tocsubseclink" data-pltdoc="x">S3 Web Page Support</a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb..rkt%29._s3-web-sync%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">s3-<wbr></wbr>web-<wbr></wbr>sync</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.S3_.Web_.Page_.Configuration%29" class="tocsubseclink" data-pltdoc="x">S3 Web Page Configuration</a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-acl%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">web-<wbr></wbr>acl</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-reduced-redundancy~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">web-<wbr></wbr>reduced-<wbr></wbr>redundancy?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-upload-metadata%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">web-<wbr></wbr>upload-<wbr></wbr>metadata</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-upload-metadata-mapping%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">web-<wbr></wbr>upload-<wbr></wbr>metadata-<wbr></wbr>mapping</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-rx%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">web-<wbr></wbr>gzip-<wbr></wbr>rx</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-min-size%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">web-<wbr></wbr>gzip-<wbr></wbr>min-<wbr></wbr>size</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.S3_.Routing_.Rules%29" class="tocsubseclink" data-pltdoc="x">S3 Routing Rules</a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._add-routing-rules%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>routing-<wbr></wbr>rules</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._redirect-prefix-routing-rule%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">redirect-<wbr></wbr>prefix-<wbr></wbr>routing-<wbr></wbr>rule</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._routing-rule~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">routing-<wbr></wbr>rule?</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;s3-sync/s3-sync.scrbl&quot;)" x-source-pkg="s3-sync" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.A.W.S_.S3_.Synchronization)"></a>AWS S3 Synchronization</h2><p><a name="(tech._synchronize)"></a><span style="font-style: italic">Synchronize</span> an S3 bucket and a filesystem directory using</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco s3-sync </span><span class="sroman">&#8249;<span style="font-style: italic">src</span>&#8250;</span><span class="stt"> </span><span class="sroman">&#8249;<span style="font-style: italic">dest</span>&#8250;</span></p><p>where either <span class="sroman">&#8249;<span style="font-style: italic">src</span>&#8250;</span> or <span class="sroman">&#8249;<span style="font-style: italic">dest</span>&#8250;</span> should start with
<span class="stt">s3://</span> to identify a bucket and item name or prefix, while the
other is a path in the local filesystem to a file or
directory. Naturally, a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span> within a bucket item&rsquo;s name
corresponds to a directory separator in the local filesystem, and a
trailing <span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span> syntactically indicates a prefix (as opposed to a
complete item name).<span class="refelem"><span class="refcolumn"><span class="refcontent">A bucket item is ignored if its name
ends in <span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span>. A bucket can contain an item whose name plus
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span> is a prefix for other bucket items, in which case
attempting to synchronize both from the bucket will produce an error,
since the name cannot be used for both a file and a directory.</span></span></span></p><p>For example, to upload the content of <span class="sroman">&#8249;<span style="font-style: italic">src-dir</span>&#8250;</span> with a prefix
<span class="sroman">&#8249;<span style="font-style: italic">dest-path</span>&#8250;</span> within <span class="sroman">&#8249;<span style="font-style: italic">bucket</span>&#8250;</span>, use</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco s3-sync </span><span class="sroman">&#8249;<span style="font-style: italic">src-dir</span>&#8250;</span><span class="stt"> s3://</span><span class="sroman">&#8249;<span style="font-style: italic">bucket</span>&#8250;</span><span class="stt">/</span><span class="sroman">&#8249;<span style="font-style: italic">dest-path</span>&#8250;</span></p><p>To download the items with prefix <span class="sroman">&#8249;<span style="font-style: italic">src-path</span>&#8250;</span> within
<span class="sroman">&#8249;<span style="font-style: italic">bucket</span>&#8250;</span> to <span class="sroman">&#8249;<span style="font-style: italic">dest-dir</span>&#8250;</span>, use</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco s3-sync s3://</span><span class="sroman">&#8249;<span style="font-style: italic">bucket</span>&#8250;</span><span class="stt">/</span><span class="sroman">&#8249;<span style="font-style: italic">src-path</span>&#8250;</span><span class="stt"> </span><span class="sroman">&#8249;<span style="font-style: italic">dest-dir</span>&#8250;</span></p><p>If <span class="sroman">&#8249;<span style="font-style: italic">src</span>&#8250;</span> refers to a directory or prefix (either syntactically
or as determined by consulting the filesystem or bucket),
<span class="sroman">&#8249;<span style="font-style: italic">dest</span>&#8250;</span> cannot refer to a file or bucket item. If
<span class="sroman">&#8249;<span style="font-style: italic">dest</span>&#8250;</span> refers to directory or prefix while <span class="sroman">&#8249;<span style="font-style: italic">src</span>&#8250;</span>
refers to a file or item, the <span class="sroman">&#8249;<span style="font-style: italic">src</span>&#8250;</span> file or item name is
implicitly added to the <span class="sroman">&#8249;<span style="font-style: italic">dest</span>&#8250;</span> directory or prefix.</p><p>The following options (supply them after <span class="stt">s3-sync</span> and before
<span class="sroman">&#8249;<span style="font-style: italic">src</span>&#8250;</span>) are supported:</p><ul><li><p><span class="nobreak"><span class="stt">--dry-run</span></span> &#8212;<wbr></wbr> report actions that would be taken, but
don&rsquo;t upload, download, delete, or change redirection rules.</p></li><li><p><span class="nobreak"><span class="stt">--jobs</span></span> <span class="sroman">&#8249;<span style="font-style: italic">n</span>&#8250;</span> or <span class="nobreak"><span class="stt">-j</span></span> <span class="sroman">&#8249;<span style="font-style: italic">n</span>&#8250;</span> &#8212;<wbr></wbr> perform up
to <span class="sroman">&#8249;<span style="font-style: italic">n</span>&#8250;</span> downloads or uploads in parallel.</p></li><li><p><span class="nobreak"><span class="stt">--shallow</span></span> &#8212;<wbr></wbr> when downloading, constrain downloads to
existing directories at <span class="sroman">&#8249;<span style="font-style: italic">dest</span>&#8250;</span> (i.e., no additional
subdirectories); in both upload and download modes, extract the
current bucket state in a directory-like way (which is useful
if the bucket contains many more nested items than the local
filesystem)</p></li><li><p><span class="nobreak"><span class="stt">--delete</span></span> &#8212;<wbr></wbr> delete destination items that have no
corresponding source item.</p></li><li><p><span class="nobreak"><span class="stt">--acl</span></span> <span class="sroman">&#8249;<span style="font-style: italic">acl</span>&#8250;</span> &#8212;<wbr></wbr> when uploading, use <span class="sroman">&#8249;<span style="font-style: italic">acl</span>&#8250;</span>
for the access control list; for example, use
<span class="stt">public-read</span> to make items public.</p></li><li><p><span class="nobreak"><span class="stt">--reduced</span></span> &#8212;<wbr></wbr> when uploading, specificy
reduced-redundancy storage.</p></li><li><p><span class="nobreak"><span class="stt">--check-metadata</span></span> &ndash; when uploading, check whether an
existing item has the metadata that would be uploaded
(including access control), and adjust the metadata if not.</p></li><li><p><span class="nobreak"><span class="stt">--include</span></span> <span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span> &#8212;<wbr></wbr> consider only items whose
name within the S3 bucket matches <span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span>, where
<span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span> uses &ldquo;Perl-compatible&rdquo; syntax.</p></li><li><p><span class="nobreak"><span class="stt">--exclude</span></span> <span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span> &#8212;<wbr></wbr> do not consider items
whose name within the S3 bucket matches <span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span> (even
if they match an inclusion pattern).</p></li><li><p><span class="nobreak"><span class="stt">--gzip</span></span> <span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span> &#8212;<wbr></wbr> on upload or for checking
download hashes (to avoid unnecessary downloads), compress files
whose name within the S3 bucket matches <span class="sroman">&#8249;<span style="font-style: italic">regexp</span>&#8250;</span>.</p></li><li><p><span class="nobreak"><span class="stt">--gzip-min</span></span> <span class="sroman">&#8249;<span style="font-style: italic">bytes</span>&#8250;</span> &#8212;<wbr></wbr> when combined with
<span class="nobreak"><span class="stt">--gzip</span></span>, compress only files that are at least
<span class="sroman">&#8249;<span style="font-style: italic">bytes</span>&#8250;</span> in size.</p></li><li><p><span class="nobreak"><span class="stt">++upload-metadata</span></span> <span class="sroman">&#8249;<span style="font-style: italic">name</span>&#8250;</span> <span class="sroman">&#8249;<span style="font-style: italic">value</span>&#8250;</span> &#8212;<wbr></wbr>
includes <span class="sroman">&#8249;<span style="font-style: italic">name</span>&#8250;</span> with <span class="sroman">&#8249;<span style="font-style: italic">value</span>&#8250;</span> as metadata when
uploading (without updating metadata for any file that is not
uploaded). Metadata specified this way overrides metadata
determined in other ways, except via
<span class="nobreak"><span class="stt">++upload-metadata-mapping</span></span>. This flag can be specified
multiple times to add multiple metadata entries.</p></li><li><p><span class="nobreak"><span class="stt">++upload-metadata-mapping</span></span> <span class="sroman">&#8249;<span style="font-style: italic">file</span>&#8250;</span> &#8212;<wbr></wbr>
<span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">read</a></span>s <span class="sroman">&#8249;<span style="font-style: italic">file</span>&#8250;</span> to obtain a hash table that maps
bucket-item names to a hash table of metadata, where a metadata
hash table maps symbols to strings. Metadata supplied this way
overrides metadata determined in other ways. This flag can be
specified multiple times, and the mappings are merged so that
later files override mappings supplied by earlier files.</p></li><li><p><span class="nobreak"><span class="stt">--s3-hostname</span></span> <span class="sroman">&#8249;<span style="font-style: italic">hostname</span>&#8250;</span> &#8212;<wbr></wbr> set the S3 hostname
to <span class="sroman">&#8249;<span style="font-style: italic">hostname</span>&#8250;</span> instead of <span class="stt">s3.amazon.com</span>.</p></li><li><p><span class="nobreak"><span class="stt">--region</span></span> <span class="sroman">&#8249;<span style="font-style: italic">region</span>&#8250;</span> &#8212;<wbr></wbr> set the S3 region to
<span class="sroman">&#8249;<span style="font-style: italic">region</span>&#8250;</span> (e.g., <span class="stt">us-east-1</span>) instead of issuing a
query to locate the bucket&rsquo;s region.</p></li><li><p><span class="nobreak"><span class="stt">--error-links</span></span> &#8212;<wbr></wbr> report an error if a soft link is found; this is the
default treatment of soft links.</p></li><li><p><span class="nobreak"><span class="stt">--follow-links</span></span> &#8212;<wbr></wbr> follow soft links.</p></li><li><p><span class="nobreak"><span class="stt">--redirect-links</span></span> &#8212;<wbr></wbr> treat soft links as redirection
rules to be installed for <span class="sroman">&#8249;<span style="font-style: italic">bucket</span>&#8250;</span> as a web site (upload only).</p></li><li><p><span class="nobreak"><span class="stt">--redirects-links</span></span> &#8212;<wbr></wbr> treat soft links as individual
redirections to be installed as metadata on a <span class="sroman">&#8249;<span style="font-style: italic">bucket</span>&#8250;</span>&rsquo;s
item, while the item itself is made empty (upload only).</p></li><li><p><span class="nobreak"><span class="stt">--ignore-links</span></span> &#8212;<wbr></wbr> ignore soft links.</p></li><li><p><span class="nobreak"><span class="stt">--web</span></span> &#8212;<wbr></wbr> sets defaults to <span class="stt">public-read</span> access, reduced
redundancy, compression for <span class="stt">".html"</span>, <span class="stt">".css"</span>,
<span class="stt">".js"</span>, and <span class="stt">".svg"</span> files that are 1K or larger,
<span class="stt">Content-Cache</span> <span class="stt">"max-age=0, no-cache"</span> metadata for most files,
and <span class="stt">Content-Cache</span> <span class="stt">"max-age=31536000, public"</span> metadata
for files with the following suffixes: <span class="stt">".css"</span>, <span class="stt">".js"</span>,
<span class="stt">".png"</span>, <span class="stt">".jpg"</span>, <span class="stt">".jpeg"</span>, <span class="stt">".gif"</span>,
<span class="stt">".svg"</span>, <span class="stt">".ico"</span>, or <span class="stt">".woff"</span>.</p></li></ul><h3 x-source-module="(lib &quot;s3-sync/s3-sync.scrbl&quot;)" x-source-pkg="s3-sync" x-part-tag="&quot;S3_Synchronization_API&quot;">1<tt>&nbsp;</tt><a name="(part._.S3_.Synchronization_.A.P.I)"></a><a name="(mod-path._s3-sync)"></a>S3 Synchronization API</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._s3-sync%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">s3-sync</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/s3-sync" title="Install this package using `raco pkg install s3-sync`"><span class="stt">s3-sync</span></a></span></td></tr></table></p><p>The <a href="#%28mod-path._s3-sync%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">s3-sync</span></a> library uses <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=aws&amp;rel=S3__Storage_.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">aws/s3</span></a>, so
use <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=aws&amp;rel=All_Services.html%23%2528def._%2528%2528lib._aws%252Fkeys..rkt%2529._ensure-have-keys%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">ensure-have-keys</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=aws&amp;rel=S3__Storage_.html%23%2528def._%2528%2528lib._aws%252Fs3..rkt%2529._s3-host%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">s3-host</a></span>, and <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=aws&amp;rel=S3__Storage_.html%23%2528def._%2528%2528lib._aws%252Fs3..rkt%2529._s3-region%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">s3-region</a></span>
before calling <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fmain..rkt%29._s3-sync%29%29" class="RktValLink" data-pltdoc="x">s3-sync</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top" colspan="3"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/main..rkt)._s3-sync))"></a><span title="Provided from: s3-sync | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fmain..rkt%29._s3-sync%29%29" class="RktValDef RktValLink" data-pltdoc="x">s3-sync</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">local-path</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">s3-bucket</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">s3-path</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:upload?</span><span class="hspace">&nbsp;</span><span class="RktVar">upload?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:jobs</span><span class="hspace">&nbsp;</span><span class="RktVar">jobs</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:shallow?</span><span class="hspace">&nbsp;</span><span class="RktVar">shallow?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:check-metadata?</span><span class="hspace">&nbsp;</span><span class="RktVar">check-metadata?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:dry-run?</span><span class="hspace">&nbsp;</span><span class="RktVar">dry-run?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:delete?</span><span class="hspace">&nbsp;</span><span class="RktVar">delete?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:include</span><span class="hspace">&nbsp;</span><span class="RktVar">include-rx</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:exclude</span><span class="hspace">&nbsp;</span><span class="RktVar">exclude-rx</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:make-call-with-input-file</span><span class="hspace">&nbsp;</span><span class="RktVar">make-call-with-file-stream</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:get-content-type</span><span class="hspace">&nbsp;</span><span class="RktVar">get-content-type</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:get-content-encoding</span><span class="hspace">&nbsp;</span><span class="RktVar">get-content-encoding</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:acl</span><span class="hspace">&nbsp;</span><span class="RktVar">acl</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:reduced-redundancy?</span><span class="hspace">&nbsp;</span><span class="RktVar">reduced-redundancy?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:upload-metadata</span><span class="hspace">&nbsp;</span><span class="RktVar">upload-metadata</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:upload-metadata-mapping</span><span class="hspace">&nbsp;</span><span class="RktVar">upload-metadata-mapping</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:link-mode</span><span class="hspace">&nbsp;</span><span class="RktVar">link-mode</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:log</span><span class="hspace">&nbsp;</span><span class="RktVar">log-info</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:error</span><span class="hspace">&nbsp;</span><span class="RktVar">raise-error</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">local-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">s3-bucket</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">s3-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">upload?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jobs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">inexact-positive-integer?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">shallow?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">check-metadata?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dry-run?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">delete?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">include-rx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">exclude-rx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">make-call-with-file-stream</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">get-content-type</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">get-content-encoding</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">acl</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reduced-redundancy?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">upload-metadata</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr></table></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#hash</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">upload-metadata-mapping</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#hash</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">link-mode</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">follow</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">redirect</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">redirects</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">ignore</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">log-info</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">log-s3-sync-info</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">raise-error</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._error%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">error</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><a href="#%28tech._synchronize%29" class="techoutside" data-pltdoc="x"><span class="techinside">Synchronizes</span></a> the content of <span class="RktVar">local-path</span> and
<span class="RktVar">s3-path</span> within <span class="RktVar">s3-bucket</span>, where <span class="RktVar">s3-path</span> can
be <span class="RktVal">#f</span> to indicate an upload to the bucket with no prefix
path. If <span class="RktVar">upload?</span> is true, <span class="RktVar">s3-bucket</span> at
<span class="RktVar">s3-path</span> is changed to have the content of
<span class="RktVar">local-path</span>, otherwise <span class="RktVar">local-path</span> is changed to have
the content of <span class="RktVar">s3-bucket</span> at <span class="RktVar">s3-path</span>.</div></p><p>Typically, <span class="RktVar">local-path</span> refers to a directory and
<span class="RktVar">s3-path</span> refers to a prefix for bucket item names.
If <span class="RktVar">local-path</span> refers to a file and <span class="RktVar">upload?</span> is true,
then a single file is synchronized to <span class="RktVar">s3-bucket</span> at
<span class="RktVar">s3-path</span>. In that case, if <span class="RktVar">s3-path</span> ends with a
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span> or it is already used as a prefix for bucket items, then
the file name of <span class="RktVar">local-path</span> is added to <span class="RktVar">s3-path</span> to
form the uploaded item&rsquo;s name; otherwise, <span class="RktVar">s3-path</span> names the
uploaded item. If <span class="RktVar">upload?</span> is <span class="RktVal">#f</span> and <span class="RktVar">s3-path</span>
is an item name (and not a prefix on other item names), then a single
bucket item is downloaded to <span class="RktVar">local-path</span>; if
<span class="RktVar">local-path</span> refers to a directory, then the portion of
<span class="RktVar">s3-path</span> after the last <span class="RktInBG"><span class="hspace"></span><span class="RktIn">/</span><span class="hspace"></span></span> is used as the downloaded
file name.</p><p>If <span class="RktVar">shallow?</span> is true, then in download mode, bucket items are
downloaded only when they correspond to directories that exist already
in <span class="RktVar">local-path</span> (which is useful when <span class="RktVar">local-path</span>
refers to a directory). In both download and upload modes, a true
value of <span class="RktVar">shallow?</span> causes the state of <span class="RktVar">s3-bucket</span> to
be queried in a directory-like way, exploring only relevant
directories; that exploration can be faster than querying the full
content of <span class="RktVar">s3-bucket</span> if it contains many more nested items
(with the prefix <span class="RktVar">s3-path</span>) than files within
<span class="RktVar">local-path</span>.</p><p>If <span class="RktVar">check-metadata?</span> is true, then in upload mode, bucket items
are checked to ensure that the current metadata matches the metadata
that would be uploaded, and the bucket item&rsquo;s metadata is adjust if
not.</p><p>If <span class="RktVar">dry-run?</span> is true, then actions needed for synchronization
are reported via <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._log%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">log</a></span>, but no uploads, downloads, deletions,
or redirection-rule updates are performed.</p><p>If <span class="RktVar">jobs</span> is more than <span class="RktVal">1</span>, then downloads and uploads
proceed in background threads.</p><p>If <span class="RktVar">delete?</span> is true, then destination items that have no
corresponding item at the source are deleted.</p><p>If <span class="RktVar">include-rx</span> is not <span class="RktVal">#f</span>, then it is matched against
bucket paths (including <span class="RktVar">s3-path</span> in the path). Only items that
match the regexp are considered for synchronization. If
<span class="RktVar">exclude-rx</span> is not <span class="RktVal">#f</span>, then any item whose path
matches is <span style="font-style: italic">not</span> considered for synchronization (even if it also
matches a provided <span class="RktVar">include-rx</span>).</p><p>If <span class="RktVar">make-call-with-file-stream</span> is not <span class="RktVal">#f</span>, it is
called to get a function that acts like <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._call-with-input-file%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">call-with-input-file</a></span>
to get the content of a file for upload or for hashing. The arguments
to <span class="RktVar">make-call-with-file-stream</span> are the S3 name and the local
file path. If <span class="RktVar">make-call-with-file-stream</span> or its result is
<span class="RktVal">#f</span>, then <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._call-with-input-file%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">call-with-input-file</a></span> is used. See also
<span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fgzip..rkt%29._make-gzip-handlers%29%29" class="RktValLink" data-pltdoc="x">make-gzip-handlers</a></span>.</p><p>If <span class="RktVar">get-content-type</span> is not <span class="RktVal">#f</span>, it is called to get
the <span class="stt">Content-Type</span> field for each file on upload. The arguments to
<span class="RktVar">get-content-type</span> are the S3 name and the local file path. If
<span class="RktVar">get-content-type</span> or its result is <span class="RktVal">#f</span>, then a default
value is used based on the file extension (e.g., <span class="RktVal">"text/css"</span>
for a <span class="stt">"css"</span> file).</p><p>The <span class="RktVar">get-content-encoding</span> argument is like
<span class="RktVar">get-content-type</span>, but for the <span class="stt">Content-Encoding</span> field. If
no encoding is provided for an item, a <span class="stt">Content-Encoding</span> field is
omitted on upload. Note that the <span class="stt">Content-Encoding</span> field of an
item can affect the way that it is downloaded from a bucket; for
example, a bucket item whose encoding is <span class="RktVal">"gzip"</span> will be
uncompressed on download, even though the item&rsquo;s hash (which is used
to avoid unnecessary downloads) is based on the encoded content.</p><p>If <span class="RktVar">acl</span> is not <span class="RktVal">#f</span>, then it use as the S3 access
control list on upload. For example, supply <span class="RktVal">"public-read"</span> to
make items public for reading. More specifically, if <span class="RktVar">acl</span> is
not <span class="RktVal">#f</span>, then <span class="RktVal">'</span><span class="RktVal">x-amz-acl</span> is set to <span class="RktVar">acl</span> in
<span class="RktVar">upload-metadata</span> (if it is not set already).</p><p>If <span class="RktVar">reduced-redundancy?</span> is true, then items are uploaded to S3
with reduced-redundancy storage (which costs less, so it is suitable
for files that are backed up elsewhere).  More specifically, if
<span class="RktSym">reduced-redundancy</span> is true, then
<span class="RktVal">'</span><span class="RktVal">x-amz-storage-class</span> is set to <span class="RktVal">"REDUCED_REDUNDANCY"</span>
in <span class="RktVar">upload-metadata</span> (if it is not set already).</p><p>The <span class="RktVar">upload-metadata</span> hash table provides metadata to include
with any file upload (and only to files that are otherwise determined
to need uploading). The <span class="RktVar">upload-metadata-mapping</span> provides a
mapping from bucket item names to metadata that adds and overrides
metadata for the specific item.</p><p>The <span class="RktVar">link-mode</span> argument determines the treatment of soft links
in <span class="RktVar">local-path</span>:</p><ul><li><p><span class="RktVal">'</span><span class="RktVal">error</span> &#8212;<wbr></wbr> reports an error</p></li><li><p><span class="RktVal">'</span><span class="RktVal">follow</span> &#8212;<wbr></wbr> follows soft links (i.e., treat it as a
file or directory)</p></li><li><p><span class="RktVal">'</span><span class="RktVal">redirect</span> &#8212;<wbr></wbr> treat it as a redirection rule to be
installed for <span class="RktVar">s3-bucket</span> as a web site on upload</p></li><li><p><span class="RktVal">'</span><span class="RktVal">redirects</span> &#8212;<wbr></wbr> treat it as a redirection rule to be
installed for <span class="RktVar">s3-bucket</span>&rsquo;s item as metadata on upload,
while the item itself is uploaded as empty</p></li><li><p><span class="RktVal">'</span><span class="RktVal">ignore</span> &#8212;<wbr></wbr> ignore</p></li></ul><p>The <span class="RktVar">log-info</span> and <span class="RktVar">raise-error</span> arguments determine how
progress is logged and errors are reported. The default
<span class="RktVar">log-info</span> function logs the given string at the <span class="RktVal">'</span><span class="RktVal">info</span>
level to a logger whose name is <span class="RktVal">'</span><span class="RktVal">s3-sync</span>.</p><p class="SHistory">Changed in version 1.2 of package <span class="stt">s3-sync</span>: Added <span class="RktVal">'</span><span class="RktVal">redirects</span> mode.<br/>Changed in version 1.3: Added the <span class="RktVar">upload-metadata</span> argument.<br/>Changed in version 1.4: Added support for a single file as <span class="RktVar">local-path</span>
and a bucket item name as <span class="RktVar">s3-path</span>.<br/>Changed in version 1.5: Added the <span class="RktVar">check-metadata?</span> argument.<br/>Changed in version 1.6: Added the <span class="RktVar">upload-metadata-mapping</span> argument.<br/>Changed in version 1.7: Changed <span class="RktVar">upload-metadata-mapping</span> to allow a procedure.</p><h3 x-source-module="(lib &quot;s3-sync/s3-sync.scrbl&quot;)" x-source-pkg="s3-sync" x-part-tag="&quot;S3_gzip_Support&quot;">2<tt>&nbsp;</tt><a name="(part._.S3_gzip_.Support)"></a><a name="(mod-path._s3-sync/gzip)"></a>S3 <span class="stt">gzip</span> Support</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._s3-sync%2Fgzip%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">s3-sync/gzip</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/s3-sync" title="Install this package using `raco pkg install s3-sync`"><span class="stt">s3-sync</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/gzip..rkt)._make-gzip-handlers))"></a><span title="Provided from: s3-sync/gzip | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fgzip..rkt%29._make-gzip-handlers%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-gzip-handlers</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">pattern</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:min-size</span><span class="hspace">&nbsp;</span><span class="RktVar">min-size</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pattern</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">min-size</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns values that are suitable as the
<span class="RktPn">#:make-call-with-input-file</span> and
<span class="RktPn">#:get-content-encoding</span> arguments to <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fmain..rkt%29._s3-sync%29%29" class="RktValLink" data-pltdoc="x">s3-sync</a></span> to
compress items whose name within the bucket matches <span class="RktVar">pattern</span>
and whose local file size is at least <span class="RktVar">min-size</span> bytes.</div></p><h3 x-source-module="(lib &quot;s3-sync/s3-sync.scrbl&quot;)" x-source-pkg="s3-sync" x-part-tag="&quot;S3_Web_Page_Support&quot;">3<tt>&nbsp;</tt><a name="(part._.S3_.Web_.Page_.Support)"></a><a name="(mod-path._s3-sync/web)"></a>S3 Web Page Support</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._s3-sync%2Fweb%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">s3-sync/web</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/s3-sync" title="Install this package using `raco pkg install s3-sync`"><span class="stt">s3-sync</span></a></span></td></tr></table></p><p class="SHistory">Added in version 1.3 of package <span class="stt">s3-sync</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/web..rkt)._s3-web-sync))"></a><span title="Provided from: s3-sync/web | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb..rkt%29._s3-web-sync%29%29" class="RktValDef RktValLink" data-pltdoc="x">s3-web-sync</a></span></span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Accepts the same arguments as <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fmain..rkt%29._s3-sync%29%29" class="RktValLink" data-pltdoc="x">s3-sync</a></span>, but adapts the
defaults to be suitable for web-page uploads:</div></p><ul><li><p><span class="RktPn">#:acl</span> &#8212;<wbr></wbr> defaults to <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-acl%29%29" class="RktValLink" data-pltdoc="x">web-acl</a></span></p></li><li><p><span class="RktPn">#:reduced-redundancy?</span> &#8212;<wbr></wbr> defaults to <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-reduced-redundancy~3f%29%29" class="RktValLink" data-pltdoc="x">web-reduced-redundancy?</a></span></p></li><li><p><span class="RktPn">#:upload-metadata</span> &#8212;<wbr></wbr> defaults to <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-upload-metadata%29%29" class="RktValLink" data-pltdoc="x">web-upload-metadata</a></span></p></li><li><p><span class="RktPn">#:upload-metadata-mapping</span> &#8212;<wbr></wbr> defaults to <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-upload-metadata-mapping%29%29" class="RktValLink" data-pltdoc="x">web-upload-metadata-mapping</a></span></p></li><li><p><span class="RktPn">#:make-call-with-input-file</span> &#8212;<wbr></wbr> defaults to
        a <span class="stt">gzip</span> of files that match <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-rx%29%29" class="RktValLink" data-pltdoc="x">web-gzip-rx</a></span>
        and <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-min-size%29%29" class="RktValLink" data-pltdoc="x">web-gzip-min-size</a></span></p></li><li><p><span class="RktPn">#:get-content-encoding</span> &#8212;<wbr></wbr> defaults to
        a <span class="stt">gzip</span> of files that match <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-rx%29%29" class="RktValLink" data-pltdoc="x">web-gzip-rx</a></span>
        and <span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-min-size%29%29" class="RktValLink" data-pltdoc="x">web-gzip-min-size</a></span></p></li></ul><h3 x-source-module="(lib &quot;s3-sync/s3-sync.scrbl&quot;)" x-source-pkg="s3-sync" x-part-tag="&quot;S3_Web_Page_Configuration&quot;">4<tt>&nbsp;</tt><a name="(part._.S3_.Web_.Page_.Configuration)"></a><a name="(mod-path._s3-sync/web-config)"></a>S3 Web Page Configuration</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._s3-sync%2Fweb-config%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">s3-sync/web-config</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/s3-sync" title="Install this package using `raco pkg install s3-sync`"><span class="stt">s3-sync</span></a></span></td></tr></table></p><p class="SHistory">Added in version 1.3 of package <span class="stt">s3-sync</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._s3-sync/web-config..rkt)._web-acl))"></a><span title="Provided from: s3-sync/web-config | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-acl%29%29" class="RktValDef RktValLink" data-pltdoc="x">web-acl</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The default access control list for web content, currently <span class="RktVal">"public-read"</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._s3-sync/web-config..rkt)._web-reduced-redundancy~3f))"></a><span title="Provided from: s3-sync/web-config | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-reduced-redundancy~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">web-reduced-redundancy?</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The default storage mode for web content, currently <span class="RktVal">#t</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><table cellspacing="0" cellpadding="0" class="argcontract RForeground"><tr><td valign="top"><a name="(def._((lib._s3-sync/web-config..rkt)._web-upload-metadata))"></a><span title="Provided from: s3-sync/web-config | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-upload-metadata%29%29" class="RktValDef RktValLink" data-pltdoc="x">web-upload-metadata</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Default metadata for web content, currently <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">Cache-Control</span><span class="stt"> </span><span class="RktVal">"max-age=0, no-cache"</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/web-config..rkt)._web-upload-metadata-mapping))"></a><span title="Provided from: s3-sync/web-config | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-upload-metadata-mapping%29%29" class="RktValDef RktValLink" data-pltdoc="x">web-upload-metadata-mapping</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">item</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">item</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Item-specific metadata for web content, currently produces <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">Cache-Control</span><span class="stt"> </span><span class="RktVal">"max-age=31536000, public"</span><span class="RktPn">)</span> for a <span class="RktVar">item</span>
that ends in <span class="stt">".css"</span>, <span class="stt">".js"</span>, <span class="stt">".png"</span>, <span class="stt">".jpg"</span>,
<span class="stt">".jpeg"</span>, <span class="stt">".gif"</span>, <span class="stt">".svg"</span>, <span class="stt">".ico"</span>,
or <span class="stt">".woff"</span>.</div></p><p class="SHistory">Added in version 1.7 of package <span class="stt">s3-sync</span>.<br/>Changed in version 1.8: Added <span class="stt">".woff"</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._s3-sync/web-config..rkt)._web-gzip-rx))"></a><span title="Provided from: s3-sync/web-config | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-rx%29%29" class="RktValDef RktValLink" data-pltdoc="x">web-gzip-rx</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Default regexp for paths to be <span class="stt">gzip</span>ped, currently
<span class="RktVal">#rx"[.](html|css|js|svg)$"</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._s3-sync/web-config..rkt)._web-gzip-min-size))"></a><span title="Provided from: s3-sync/web-config | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Fweb-config..rkt%29._web-gzip-min-size%29%29" class="RktValDef RktValLink" data-pltdoc="x">web-gzip-min-size</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Default minimum size for files to be <span class="stt">gzip</span>ped, currently
<span class="RktVal">#rx"[.](html|css|js)$"</span>.</div></p><h3 x-source-module="(lib &quot;s3-sync/s3-sync.scrbl&quot;)" x-source-pkg="s3-sync" x-part-tag="&quot;S3_Routing_Rules&quot;">5<tt>&nbsp;</tt><a name="(part._.S3_.Routing_.Rules)"></a><a name="(mod-path._s3-sync/routing-rule)"></a>S3 Routing Rules</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._s3-sync%2Frouting-rule%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">s3-sync/routing-rule</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/s3-sync" title="Install this package using `raco pkg install s3-sync`"><span class="stt">s3-sync</span></a></span></td></tr></table></p><p class="SHistory">Added in version 1.9 of package <span class="stt">s3-sync</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/routing-rule..rkt)._add-routing-rules))"></a><span title="Provided from: s3-sync/routing-rule | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._add-routing-rules%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-routing-rules</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">bucket</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">rules</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:preserve-existing?</span><span class="hspace">&nbsp;</span><span class="RktVar">preserve-existing?</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:log-info</span><span class="hspace">&nbsp;</span><span class="RktVar">log-info-proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:error</span><span class="hspace">&nbsp;</span><span class="RktVar">error-proc</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bucket</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rules</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._routing-rule~3f%29%29" class="RktValLink" data-pltdoc="x">routing-rule?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">preserve-existing?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">log-info-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=logging.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._log-info%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">log-info</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">error-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._error%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">error</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Configures the web-site routing rules at <span class="RktVar">bucket</span> to include
each of the routing rules in <span class="RktVar">rules</span>. Unless
<span class="RktVar">preserve-existing?</span> is false, existing routing rules are
preserved except as overridden by <span class="RktVar">rules</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/routing-rule..rkt)._redirect-prefix-routing-rule))"></a><span title="Provided from: s3-sync/routing-rule | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._redirect-prefix-routing-rule%29%29" class="RktValDef RktValLink" data-pltdoc="x">redirect-prefix-routing-rule</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:old-prefix</span><span class="hspace">&nbsp;</span><span class="RktVar">prefix</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:new-prefix</span><span class="hspace">&nbsp;</span><span class="RktVar">new-prefix</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:new-host</span><span class="hspace">&nbsp;</span><span class="RktVar">new-host</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:redirect-code</span><span class="hspace">&nbsp;</span><span class="RktVar">redirect-code</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._routing-rule~3f%29%29" class="RktValLink" data-pltdoc="x">routing-rule?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prefix</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">new-prefix</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">new-host</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">redirect-code</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a routing rule that redirects an access with a prefix matching
<span class="RktVar">prefix</span> so that the prefix is replaced by <span class="RktVar">new-prefix</span>,
the access is redirected to <span class="RktVar">new-host</span>, or both. At least one
of <span class="RktVar">new-prefix</span> or <span class="RktVar">new-host</span> must be non-<span class="RktVal">#f</span>.</div></p><p class="SHistory">Changed in version 1.10 of package <span class="stt">s3-sync</span>: Added <span class="RktPn">#:redirect-code</span> argument.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._s3-sync/routing-rule..rkt)._routing-rule~3f))"></a><span title="Provided from: s3-sync/routing-rule | Package: s3-sync"><span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._routing-rule~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">routing-rule?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a routing rule as created by
<span class="RktSym"><a href="#%28def._%28%28lib._s3-sync%2Frouting-rule..rkt%29._redirect-prefix-routing-rule%29%29" class="RktValLink" data-pltdoc="x">redirect-prefix-routing-rule</a></span>, <span class="RktVal">#f</span> otherwise.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>