<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Overeasy: Racket Language Test Engine</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Overeasy:<span class="mywbr"> &nbsp;</span> Racket Language Test Engine</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Interface%29" class="tocviewlink" data-pltdoc="x">Interface</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Deprecated%29" class="tocviewlink" data-pltdoc="x">Deprecated</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Known_.Issues%29" class="tocviewlink" data-pltdoc="x">Known Issues</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.History%29" class="tocviewlink" data-pltdoc="x">History</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Legal%29" class="tocviewlink" data-pltdoc="x">Legal</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Overeasy:<span class="mywbr"> &nbsp;</span> Racket Language Test Engine</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Simple_.Examples%29" class="tocsubseclink" data-pltdoc="x">Simple Examples</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Exceptions%29" class="tocsubseclink" data-pltdoc="x">Exceptions</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.Multiple_.Values%29" class="tocsubseclink" data-pltdoc="x">Multiple Values</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Custom_.Value_.Checks%29" class="tocsubseclink" data-pltdoc="x">Custom Value Checks</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._.Output_.Ports%29" class="tocsubseclink" data-pltdoc="x">Output Ports</a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part._.Test_.Sections%29" class="tocsubseclink" data-pltdoc="x">Test Sections</a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._.Expected_.Failures%29" class="tocsubseclink" data-pltdoc="x">Expected Failures</a></td></tr><tr><td><span class="tocsublinknumber">1.8<tt>&nbsp;</tt></span><a href="#%28part._.Intermixed_.Racket_.Code%29" class="tocsubseclink" data-pltdoc="x">Intermixed Racket Code</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Interface%29" class="tocsubseclink" data-pltdoc="x">Interface</a></td></tr><tr><td><a href="#%28form._%28%28lib._overeasy%2Fmain..rkt%29._test-section%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">test-<wbr></wbr>section</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._overeasy%2Fmain..rkt%29._test%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">test</span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Deprecated%29" class="tocsubseclink" data-pltdoc="x">Deprecated</a></td></tr><tr><td><a href="#%28form._%28%28lib._overeasy%2Fmain..rkt%29._with-test-usection%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">with-<wbr></wbr>test-<wbr></wbr>usection</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Known_.Issues%29" class="tocsubseclink" data-pltdoc="x">Known Issues</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.History%29" class="tocsubseclink" data-pltdoc="x">History</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Legal%29" class="tocsubseclink" data-pltdoc="x">Legal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">4:2</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Overeasy__.Racket_.Language_.Test_.Engine)"></a><a name="(mod-path._overeasy)"></a>Overeasy: Racket Language Test Engine</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Neil Van Dyke</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara">License: <a href="#%28part._.Legal%29" class="plainlink" data-pltdoc="x">LGPLv3</a> <span class="hspace">&nbsp;</span> Web: <a href="http://www.neilvandyke.org/racket/overeasy/" class="plainlink">http://www.neilvandyke.org/racket/overeasy/</a>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">overeasy</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/overeasy" title="Install this package using `raco pkg install overeasy`"><span class="stt">overeasy</span></a></span></td></tr></table></div></p><h3 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p><div class="SIntrapara">Overeasy is a software test engine for the Racket programming
language.  It designed for all of:</div><div class="SIntrapara"><ul><li><p>interspersing unit tests in-line with implementation code, using
the Racket <span class="stt">test</span> submodule, or in separate files;</p></li><li><p>unit testing of individual modules, either from within DrRacket,
or from the command line or Emacs;</p></li><li><p>rapid interactive testing of expressions in the REPL; and</p></li><li><p>running hierarchical sets of individual module unit tests at
once.</p></li></ul></div><div class="SIntrapara">An individual test case, or <span style="font-style: italic">test</span>, is specified by the programmer with the <span class="RktSym">test</span> syntax, and evaluation of that syntax causes the test to be
run.  Properties that are checked by tests are:</div><div class="SIntrapara"><ul><li><p>values of expressions (single value, or multiple value);</p></li><li><p>exceptions raised; and</p></li><li><p>output to <span class="RktSym">current-output-port</span> and <span class="RktSym">current-error-port</span>.</p></li></ul></div><div class="SIntrapara">Tests can also be marked as expected to fail.  Tests can be
organized into hierarchically-nested sections.</div><div class="SIntrapara">Some checking is also done to help protect test suites from
crashing due to errors in the setup of the test itself, such as errors in
evaluating an expression that provides an expected value for a test.</div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Simple_Examples&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Simple_.Examples)"></a>Simple Examples</h4><p><div class="SIntrapara">Here&rsquo;s a simple test, with the first argument the expression under
test, and the other argument the expected value.</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">How the results of tests are reported varies depending on how the
tests are run.  For purposes of these examples, we will pretend we are running
tests in the simplest way.  In this way, tests that fail produce one-line
error-messages to <span class="RktSym">current-error-port</span>, which in DrRacket show up as red italic text by default.  Tests
that pass in this way do not produce any message at all.  So, our first example
above, does not produce any message.</div><div class="SIntrapara">Now, for a test that fails:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [???] Value 6 did not match expected
value 7 by equal?.</span></p></blockquote></div><div class="SIntrapara">That&rsquo;s a quick way to do a test in a REPL or when you&rsquo;re otherwise
in a hurry, but if you&rsquo;re reviewing a report of failed tests for one or more
modules, you&rsquo;d probably like a more descriptive way of seeing which tests
failed.  That&rsquo;s what the <span style="font-style: italic">test ID</span> is for, and to specify it, we can use a three-argument form of <span class="RktSym">test</span>:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">simple-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [simple-addition] Value 6 did not match
expected value 7 by equal?.</span></p></blockquote></div><div class="SIntrapara">Quick note on syntax.  The above is actually shorthand syntax.  In
the non-shorthand syntax, every argument to <span class="RktSym">test</span> has a keyword, so the above is actually shorthand for:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">#:id</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">simple-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:code</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:val</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This three-argument form is used so often that the keywords can be
left off.</div><div class="SIntrapara">In the rest of these examples, we&rsquo;ll use the shorthand syntax,
because it&rsquo;s quicker to type.</div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Exceptions&quot;">1.2<tt>&nbsp;</tt><a name="(part._.Exceptions)"></a>Exceptions</h4><p><div class="SIntrapara">So far, we&rsquo;ve been checking the values of code, and we haven&rsquo;t yet
dealt in exceptions.  Exceptions, such as due to programming errors in the code
being tested, can also be reported:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">error</span><span class="hspace">&nbsp;</span><span class="RktVal">"help!"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [???] Got exception #(struct:exn:fail
"help!"), but expected value 3.</span></p></blockquote></div><div class="SIntrapara">And if an exception is the correct behavior, instead of specifying
an expected value, we can use <span class="RktPn">#:exn</span> to specify predicate just like for <span class="RktSym">with-handlers</span>:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">error</span><span class="hspace">&nbsp;</span><span class="RktVal">"help!"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:exn</span><span class="hspace">&nbsp;</span><span class="RktSym">exn:fail?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">That test passed.  But if our code under test doesn&rsquo;t throw an
exception matched by our <span class="RktPn">#:exn</span> predicate, that&rsquo;s a test failure:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:exn</span><span class="hspace">&nbsp;</span><span class="RktSym">exn:fail?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [???] Got value 6, but expected
exception matched by predicate exn:fail?.</span></p></blockquote></div><div class="SIntrapara">Of course, when you want finer discrimination of exceptions than,
say,<span class="RktSym">exn:fail?</span> or <span class="RktSym">exn:fail:filesystem?</span>, you can write a custom predicate that uses <span class="RktSym">exn-message</span> or other information, and supply it to <span class="RktSym">test</span>&rsquo;s <span class="RktPn">#:exn</span>.</div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Multiple_Values&quot;">1.3<tt>&nbsp;</tt><a name="(part._.Multiple_.Values)"></a>Multiple Values</h4><p><div class="SIntrapara">Multiple values are supported:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">values</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [???] Value 3 did not match expected
values (1 2 3) by equal?.</span></p></blockquote></div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Custom_Value_Checks&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Custom_.Value_.Checks)"></a>Custom Value Checks</h4><p><div class="SIntrapara">You might have noticed that a lot of the test failure messages say
&ldquo;by equal?&rdquo;.  That&rsquo;s referring to the default predicate, so, the following
test passes:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"abc"</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">But we let&rsquo;s say we wanted the expected and actual values to not
necessarily be <span class="RktSym">equal?</span> but to be numbers within 3 decimal places of being equal:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">close-enough-val-check</span><span class="hspace">&nbsp;</span><span class="RktSym">a-values</span><span class="hspace">&nbsp;</span><span class="RktSym">b-values</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">a-values</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">b-values</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">a-values</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">b-values</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">round</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">round</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktVal">3.142</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">3.14159</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:val-check</span><span class="hspace">&nbsp;</span><span class="RktSym">close-enough-val-check</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Note that, since expressions can produce multiple values, the <span class="RktPn">#:val-check</span> predicate receives lists of values instead of single values.</div><div class="SIntrapara">As mentioned earlier, the checker does not have to be an equality
predicate, and it can use whatever reasoning you like in rendering its verdict
on whether the actual value should be considered OK.</div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Output_Ports&quot;">1.5<tt>&nbsp;</tt><a name="(part._.Output_.Ports)"></a>Output Ports</h4><p><div class="SIntrapara">In addition to values and exceptions, <span class="RktSym">test</span> also intercepts and permits checking of <span class="RktSym">current-output-port</span> and <span class="RktSym">current-error-port</span>.  By default, it assumes no output to either of those ports, which
is especially good for catching programming errors like neglecting to specify
an output port to a procedure for which the port is optional:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">o</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">open-output-string</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktSym">o</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktSym">o</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-output-string</span><span class="hspace">&nbsp;</span><span class="RktSym">o</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"abc"</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [???] Value "ac" did not match
expected value "abc" by equal?. Out bytes #"b" did not match expected #""
by equal?.</span></p></blockquote></div><div class="SIntrapara">Likewise, messages to <span class="RktSym">current-error-port</span>, such as warnings and errors from legacy code, are also caught by
default:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fprintf</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-error-port</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"%W%SYS$FROBINATOR_OVERHEAT\n"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [???] Value 0 did not match expected
value 42 by equal?. Err bytes #"%W%SYS$FROBINATOR_OVERHEAT\n" did not match
expected #"" by equal?.</span></p></blockquote></div><div class="SIntrapara">Now we know why we&rsquo;ve started getting 0, which information might
have gone unnoticed had our test engine not captured error port output: the
frobinator is failing, after all these years of valiant service.</div><div class="SIntrapara">With the <span class="RktPn">#:out-check</span> and <span class="RktPn">#:err-check</span> keyword arguments to <span class="RktSym">test</span>, you can specify predicates other than <span class="RktSym">equal?</span>.  Also, by setting one of these predicates to <span class="RktVal">#f</span>, you can cause the output to be consumed but not stored and
checked.  This is useful if, for example, the code produces large amounts of
debugging message output.</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"blah"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"blah"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">display</span><span class="hspace">&nbsp;</span><span class="RktVal">"blah"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">44</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">88</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:out-check</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Test_Sections&quot;">1.6<tt>&nbsp;</tt><a name="(part._.Test_.Sections)"></a>Test Sections</h4><p><div class="SIntrapara">Sequences of tests can be nested in a <a name="(tech._test._section)"></a><span style="font-style: italic">test section</span>, and the test section given an ID.  Test sections can be nested
within each other.</div><div class="SIntrapara">For example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test-section</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fundamentals</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test-section</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">writing</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">abcs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"abc"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test-section</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">arithmetic</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">one-two-three</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">for-fife-sax</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">666</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [fundamentals arithmetic for-fife-sax]
Value 15 did not match expected value 666 by equal?.</span></p></blockquote></div><div class="SIntrapara">Note that the reference to test ID <span class="stt">for-fife-sax</span> in the error message is qualified with the path through the test
sections: section <span class="stt">fundamentals</span> and its child section, <span class="stt">arithmetic</span>.  In large test suites, this can help to locate the test.</div><div class="SIntrapara">Note that a given instance <span class="RktSym">test-section</span> syntax may appear inside procedures and loops.  This can be very
useful for testing code with different arguments or context, when the behavior
is the same or similar for many of the combinations.  When doing this, note
that a <span class="RktSym">test-section</span> ID need not be a constant symbol like <span class="RktVal">'</span><span class="RktVal">for-fife-sax</span>, but can also be a Racket expression, so it could be used to
indicate one or more of the arguments.  For example, suppose that there is a
case for three-argument procedure <span class="RktSym">foo</span> in which, if the third argument is <span class="RktVal">0</span>, the answer should be <span class="RktVal">42</span>:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test-section</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo-constant-with-z-arg-zero</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">bar?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#true</span><span class="hspace">&nbsp;</span><span class="RktVal">#false</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test-section</span><span class="hspace">&nbsp;</span><span class="RktSym">bar?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">power</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-range</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktPn">#:id</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">power</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:code</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">foo</span><span class="hspace">&nbsp;</span><span class="RktSym">bar?</span><span class="hspace">&nbsp;</span><span class="RktSym">power</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:val</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">When this test code is run, Racket logger entries starting with the
following should be made (and can be viewed in the DrRacket Log window, and
elsewhere):</div><div class="SIntrapara"><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">overeasy: Start Test Section [foo-constant-with-z-arg-zero]</span></p></td></tr><tr><td><p><span class="stt">overeasy: Start Test Section [foo-constant-with-z-arg-zero #t]</span></p></td></tr><tr><td><p><span class="stt">overeasy: Test Passed [foo-constant-with-z-arg-zero #t 1]</span></p></td></tr><tr><td><p><span class="stt">overeasy: Test Passed [foo-constant-with-z-arg-zero #t 2]</span></p></td></tr><tr><td><p><span class="stt">overeasy: Test Passed [foo-constant-with-z-arg-zero #t 3]</span></p></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Expected_Failures&quot;">1.7<tt>&nbsp;</tt><a name="(part._.Expected_.Failures)"></a>Expected Failures</h4><p><div class="SIntrapara">Sometimes, you&rsquo;ll have a test case that is known to fail, but that
you are deferring fixing, and that you don&rsquo;t want distracting you from other
test cases at this time.  Rather than commenting-out the test case code, which
might result in being lost or forgotten, you can instead mark the test case
with <span class="RktPn">#:fail</span>.  For example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">basic-arithmetic</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plussy</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">6</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fail</span><span class="hspace">&nbsp;</span><span class="RktVal">"bug til move to new library"</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">In this example, the string <span class="RktVal">"bug til move to new library"</span> gives the rationale for expecting the test to fail but deferring
corrective action on it.  When this <span class="RktSym">test</span> syntax is evaluated, instead of an exception being raised, instead a <span class="stt">warning</span> level message is sent to the Racket logger:</div><div class="SIntrapara"><blockquote><p><span class="stt">overeasy: Test Failed Expectedly [basic-arithmetic] Value 5.9
did not match expected value 6 by equal?. (#:fail "bug til move to new
library")</span></p></blockquote></div><div class="SIntrapara">Note that if <span class="RktPn">(</span><span class="RktSym">plussy</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">3</span><span class="RktPn">)</span> <span style="font-style: italic">does</span> produce the correct <span class="RktVal">6</span> value, but the <span class="RktPn">#:fail</span> argument is still present, then the test will actually be
considered to fail:</div><div class="SIntrapara"><blockquote><p><span class="RktErr">TEST FAILED [basic-arithmetic] Passed
unexpectedly. (#:fail "bug til move to new library")</span></p></blockquote></div></p><h4 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Intermixed_Racket_Code&quot;">1.8<tt>&nbsp;</tt><a name="(part._.Intermixed_.Racket_.Code)"></a>Intermixed Racket Code</h4><p>There are some more tricks you can do with <span class="RktSym">test</span>.  Most notably,
you&rsquo;ll sometimes want to set up state in the system &ndash; Racket parameters, test
input files, whatever.  Because the <span class="RktSym">test</span> syntax can appear anywhere normal Racket code can, you can set up
this state using normal Racket code.  No special forms for setup and tear-down
are required, nor are they provided.</p><h3 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Interface&quot;">2<tt>&nbsp;</tt><a name="(part._.Interface)"></a>Interface</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._overeasy/main..rkt)._test-section))"></a><span title="Provided from: overeasy | Package: overeasy"><span class="RktSym"><span class="RktSymDef RktSym">test-section</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-id-kw</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-id-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:id</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">See above.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._overeasy/main..rkt)._test))"></a><span title="Provided from: overeasy | Package: overeasy"><span class="RktSym"><span class="RktSymDef RktSym">test</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">!!!</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">See above.</div></p><h3 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Deprecated&quot;">3<tt>&nbsp;</tt><a name="(part._.Deprecated)"></a>Deprecated</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._overeasy/main..rkt)._with-test-usection))"></a><span title="Provided from: overeasy | Package: overeasy"><span class="RktSym"><span class="RktSymDef RktSym">with-test-usection</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-id-kw</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-id-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:id</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Deprecated.  Alias for <span class="RktSym">test-section</span>.</div></p><h3 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Known_Issues&quot;">4<tt>&nbsp;</tt><a name="(part._.Known_.Issues)"></a>Known Issues</h3><ul><li><p>Sanity-check how keyword argument shortcuts are done, and which
combinations make sense.</p></li><li><p>Document the support for <span class="stt">#rx</span> with <span class="RktPn">#:exn</span>.</p></li><li><p>Document the support for <span class="RktPn">#:notes</span>, but rename it to <span class="RktPn">#:note</span> and support the old name (which some package might have already
used, even though undocumented) as an alias.</p></li><li><p>Document how to use with submodules and DrRacket.  Just examples of <span class="RktSym">test</span> submodule, and tests run when hitting the Run button with
particular DrRacket option set.</p></li><li><p>In documentation, fill out the <span class="RktSym">defproc</span> for <span class="RktSym">test</span> form.</p></li><li><p>For <span class="RktPn">#:out</span> and <span class="RktPn">#:err</span>, force expected value to bytes (convert using UTF-8 if string),
and also ensure that port encoding is UTF-8 (or whatever encoding makes
sense).</p></li><li><p>Add conveniences for defining <span class="RktPn">#:val-check</span> predicates.  For example, a convenient way to specify <span class="RktSym">eq?</span> of a single value (not multiple values).</p></li><li><p>Try to mess with the continuation marks for test failues due to
unexpected exceptions, so that user can navigate first to the <span class="RktSym">test</span> form, and then to the origin of the exception.</p></li><li><p>Provide convenience for running tests from multiple files, in <span class="RktSym">test</span> submodules, and possibly entire files/modules.</p></li><li><p>This package does not yet expose an interface so that alternative
means of reporting (e.g., GUI) can be added easily.  This is intentional, until
we can be comfortable that the existing internal interface won&rsquo;t be changing
soon.</p></li></ul><h3 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;History&quot;">5<tt>&nbsp;</tt><a name="(part._.History)"></a>History</h3><ul><li><p><div class="SIntrapara">Version 4:2 &#8212;<wbr></wbr> 2016-02-26</div><div class="SIntrapara"><ul><li><p>Commented out some tests that have to be run manually.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 4:1 &#8212;<wbr></wbr> 2016-02-25</div><div class="SIntrapara"><ul><li><p>Fixed deps.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 4:0 &#8212;<wbr></wbr> 2016-02-21</div><div class="SIntrapara"><ul><li><p>Moving from PLaneT to new package system.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:2 &#8212;<wbr></wbr> 2015-12-19</div><div class="SIntrapara"><ul><li><p>Removed documentation that wrongly claimed <span class="RktPn">#:id</span> as the only keyword argument worked, since there might
have been a regression 3+ years ago, but only just now reported. (Thanks to
David Storrs for reporting.)</p></li><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:1 &#8212;<wbr></wbr> 2012-12-26</div><div class="SIntrapara"><ul><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:0 &#8212;<wbr></wbr> 2012-12-25</div><div class="SIntrapara"><ul><li><p>Now requires Racket 5.3.1.</p></li><li><p>Converted to use the Racket logger facility, and format
of the messages changed.  This is reason for the change to the major version
number of the PLaneT package.</p></li><li><p><span class="RktPn">#:fail</span> feature added.</p></li><li><p>Messages regarding tests now qualify the test ID with
the IDs of the parent test sections.</p></li><li><p>Documentation changes.</p></li><li><p>Internal simplifications to test contexts.  There are no
longer parent and child test contexts, but a single test context.  Test
contexts no longer have handlers for the start and end of tests.  When there is
not yet any test context, previously a <span class="RktSym">test-section</span> would create one kind of transient context, and <span class="RktSym">test</span> would create a different kind of transient context;
now, both forms create the same kind of context, and it is not transient.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:1 &#8212;<wbr></wbr> 2012-11-15</div><div class="SIntrapara"><ul><li><p>Fixed bug regarding &ldquo;fprintf: format string requires 1
arguments, given 2; arguments were: #&lt;output-port&gt; "TEST BROKEN!~A\
"
...</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:0 &#8212;<wbr></wbr> 2012-06-11</div><div class="SIntrapara"><ul><li><p>Converted to McFly.</p></li><li><p>The default test context now raises an exception with
syntax location info for failed test cases, rather than only writing a message
to <span class="RktSym">current-error-port</span>.</p></li><li><p>The <span class="RktSym">test</span> syntax now preserves syntax location info better.</p></li><li><p>Added shorthand syntax <span class="RktPn">(</span><span class="RktSym">test</span><span class="stt"> </span><span style="font-style: italic">ID</span><span class="stt"> </span><span style="font-style: italic">CODE</span><span class="stt"> </span><span style="font-style: italic">VAL</span><span class="stt"> </span><span style="font-style: italic">RESTn</span><span class="stt"> </span><span class="RktSym">...</span><span class="RktPn">)</span>.</p></li><li><p>The new name <span class="RktSym">test-section</span> is now preferred to the old name <span class="RktSym">with-test-section</span>.</p></li><li><p>In <span class="RktSym">test-section</span> syntax, the <span class="RktPn">#:id</span> keyword itself is now optional.</p></li><li><p><span class="RktSym">test-section</span> may have no <span style="font-style: italic">body</span> forms.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.1 &#8212;<wbr></wbr> Version 1:0 &#8212;<wbr></wbr> 2011-08-26</div><div class="SIntrapara">Initial release.</div></p></li></ul><h3 x-source-module="(lib &quot;overeasy/overeasy.scrbl&quot;)" x-source-pkg="overeasy" x-part-tag="&quot;Legal&quot;">6<tt>&nbsp;</tt><a name="(part._.Legal)"></a>Legal</h3><p>Copyright 2011, 2012, 2015, 2016 Neil Van Dyke.  This program is Free
Software; you can redistribute it and/or modify it under the terms of the GNU
Lesser General Public License as published by the Free Software Foundation;
either version 3 of the License, or (at your option) any later version.  This
program is distributed in the hope that it will be useful, but without any
warranty; without even the implied warranty of merchantability or fitness for a
particular purpose.  See http://www.gnu.org/licenses/ for details.  For other
licenses and consulting, please contact the author.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>