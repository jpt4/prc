<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Vector Struct: Performant Fake Structs</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Vector Struct:<span class="mywbr"> &nbsp;</span> Performant Fake Structs</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Examples%29" class="tocviewlink" data-pltdoc="x">Examples</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.A.P.I%29" class="tocviewlink" data-pltdoc="x">API</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Vector Struct:<span class="mywbr"> &nbsp;</span> Performant Fake Structs</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Examples%29" class="tocsubseclink" data-pltdoc="x">Examples</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.A.P.I%29" class="tocsubseclink" data-pltdoc="x">API</a></td></tr><tr><td><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">vecstruct</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;vector-struct/scribblings/vector-struct.scrbl&quot;)" x-source-pkg="vector-struct" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Vector_.Struct__.Performant_.Fake_.Structs)"></a><a name="(mod-path._vector-struct)"></a>Vector Struct: Performant Fake Structs</h2><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">vector-struct</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/vector-struct" title="Install this package using `raco pkg install vector-struct`"><span class="stt">vector-struct</span></a></span></td></tr></table></p><p>This module provides utilities for "faking" structs using vectors. In Racket, struct allocation can be
expensive, while vectors are relatively cheap. Since the complex featureset of structs is often
unnecessary, this module allows using vectors while still having the convenience of the basic struct
API to aid in clarity.</p><p>For a version of this module that is compatible with Typed Racket, see
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=vector-struct&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">typed/vector-struct</span></a>.</p><h3 x-source-module="(lib &quot;vector-struct/scribblings/vector-struct.scrbl&quot;)" x-source-pkg="vector-struct" x-part-tag="&quot;Examples&quot;">1<tt>&nbsp;</tt><a name="(part._.Examples)"></a>Examples</h3><p>Using this library is mostly equivalent to using ordinary structs. To create a structure type, use the
<span class="RktSym"><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="RktStxLink" data-pltdoc="x">vecstruct</a></span> form.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="RktStxLink" data-pltdoc="x">vecstruct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">point</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>Just like ordinary structs, this will create a <span class="RktSym">point</span> function to serve as the struct
constructor, and it will also define <span class="RktSym">point-x</span> and <span class="RktSym">point-y</span> accessors.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">point</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">point-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">=&gt; 4</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">point-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">=&gt; 5</span></td></tr></table></blockquote><p>You can also create mutable structs using the <span class="RktPn">#:mutable</span> keyword.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="RktStxLink" data-pltdoc="x">vecstruct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mpoint</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></p></blockquote><p>This will generate the corresponding <span class="RktSym">set-point-x!</span> and <span class="RktSym">set-point-y!</span> mutators.</p><p>The <span class="RktSym"><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="RktStxLink" data-pltdoc="x">vecstruct</a></span> form also creates a predicate function (e.g. <span class="RktSym">point?</span>), which can be
used to test for values. Note that a properly-formed vector will pass this test, but
<span class="RktSym"><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="RktStxLink" data-pltdoc="x">vecstruct</a></span> puts a symbol corresponding to the vector name as the first element of the vector
to help identify well-formed values.</p><h3 x-source-module="(lib &quot;vector-struct/scribblings/vector-struct.scrbl&quot;)" x-source-pkg="vector-struct" x-part-tag="&quot;API&quot;">2<tt>&nbsp;</tt><a name="(part._.A.P.I)"></a>API</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._vector-struct/main..rkt)._vecstruct))"></a><span title="Provided from: vector-struct | Package: vector-struct"><span class="RktSym"><a href="#%28form._%28%28lib._vector-struct%2Fmain..rkt%29._vecstruct%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">vecstruct</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">field-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">struct-option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">struct-option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:mutable</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates utility functions for creating and manipulating vectors to emulate structs. Defines
<span class="RktVar">id</span> as a constructor taking the number of parameters as there are <span class="RktVar">field-id</span> elements.
Also defines <span class="RktSym">id?</span> as a predicate to identify if a given object fits the proper underlying
struct format.</div></p><p>Subsequently generates a series of <span class="RktSym">id-field-id</span> accessors. If <span class="RktPn">#:mutable</span> is specified,
also generates <span class="RktSym">set-id-field-id!</span> mutators.</p><p>If <span class="RktPn">#:mutable</span> is specified, then the underlying datatype will be a mutable vector, otherwise
it will be an immutable vector.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>