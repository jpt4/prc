<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Component</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Component</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._intro%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._reference%29" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._ack%29" class="tocviewlink" data-pltdoc="x">Acknowledgements</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Component</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._intro%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Guide%29" class="tocsubseclink" data-pltdoc="x">Guide</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._limitations%29" class="tocsubseclink" data-pltdoc="x">Limitations</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._reference%29" class="tocsubseclink" data-pltdoc="x">Reference</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._components%29" class="tocsubseclink" data-pltdoc="x">Components</a></td></tr><tr><td><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._gen~3acomponent%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">gen:<span class="mywbr"> &nbsp;</span>component</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">component?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-start%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">component-<wbr></wbr>start</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-stop%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">component-<wbr></wbr>stop</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._systems%29" class="tocsubseclink" data-pltdoc="x">Systems</a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._make-system%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>system</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._define-system%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>system</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-start%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system-<wbr></wbr>start</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-stop%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system-<wbr></wbr>stop</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-ref%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system-<wbr></wbr>ref</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-replace%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system-<wbr></wbr>replace</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-~3edot%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system-<wbr></wbr>&gt;dot</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-~3epng%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">system-<wbr></wbr>&gt;png</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._ack%29" class="tocsubseclink" data-pltdoc="x">Acknowledgements</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Component)"></a><a name="(mod-path._component)"></a>Component</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Bogdan Popa &lt;<a href="mailto:bogdan@defn.io">bogdan@defn.io</a>&gt;</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">component</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/component-lib" title="Install this package using `raco pkg install component-lib`"><span class="stt">component-lib</span></a></span></td></tr></table></p><h3 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;intro&quot;">1<tt>&nbsp;</tt><a name="(part._intro)"></a>Introduction</h3><p>This library helps you manage the lifecycle of stateful objects in
your application.  It ensures that objects are started, linked
together and stopped in the correct order.</p><p>By writing programs in this style, you trade some flexibility for
clarity around how and when your objects are initialized and your code
becomes easier to test since swapping out real implementations of
components for stubs is trivial.</p><h4 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;Guide&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Guide)"></a>Guide</h4><p>Let&rsquo;s assume that you&rsquo;re writing a web application that emails users
when they sign up.  Your components are probably going to be:</p><ul><li><p>the database (no dependencies),</p></li><li><p>the mailer (no dependencies),</p></li><li><p>the user manager (depends on the database) and</p></li><li><p>the http frontend (depends on each of the above).</p></li></ul><p>Assuming that each of the identified components is a struct that
implements the <span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._gen~3acomponent%29%29" class="RktStxLink" data-pltdoc="x">gen:component</a></span> interface, your system might
look something like this:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._define-system%29%29" class="RktStxLink" data-pltdoc="x">define-system</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prod</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktSym">make-database</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktSym">make-mailer</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">user-manager</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-user-manager</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">http</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktSym">user-manager</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktSym">user-manager</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-http</span><span class="hspace">&nbsp;</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktSym">user-manager</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-start%29%29" class="RktValLink" data-pltdoc="x">system-start</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prod-system</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-stop%29%29" class="RktValLink" data-pltdoc="x">system-stop</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prod-system</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The system specification is made up of a list of component
specifications.  Each component specification is made up of the unique
name of a component in the system, an optional list of dependencies
(other component names) and a function that can be used to construct
that component from its dependencies.  There are no constraints on the
names of the components in the system and you can have multiple
components of the same type.</p><p>The <span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._define-system%29%29" class="RktStxLink" data-pltdoc="x">define-system</a></span> form builds the system struct and its
internal dependency graph but does not start the system.</p><p>The call to <span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-start%29%29" class="RktValLink" data-pltdoc="x">system-start</a></span> starts the db and the mailer first
(one or the other may be first since neither has any dependencies),
then the user-manager and finally the http server.</p><p>Finally, the call to <span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-stop%29%29" class="RktValLink" data-pltdoc="x">system-stop</a></span> stops all the components in
the system in the reverse order that they were started in.</p><h4 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;limitations&quot;">1.2<tt>&nbsp;</tt><a name="(part._limitations)"></a>Limitations</h4><p>Components that have no dependencies <span style="font-style: italic">and</span> no dependents are
never started.</p><p>When a component fails during startup or shutdown (i.e. raises an
exception), systems don&rsquo;t attempt to perform any sort of cleanup.
This isn&rsquo;t really a limitation, but something to be aware of.</p><h3 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;reference&quot;">2<tt>&nbsp;</tt><a name="(part._reference)"></a>Reference</h3><h4 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;components&quot;">2.1<tt>&nbsp;</tt><a name="(part._components)"></a>Components</h4><p>Components are the basic building blocks of this library.  Every
component needs to know how to start and stop itself.</p><p>To define your own components, implement the <span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._gen~3acomponent%29%29" class="RktStxLink" data-pltdoc="x">gen:component</a></span>
interface and its <span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-start%29%29" class="RktValLink" data-pltdoc="x">component-start</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-stop%29%29" class="RktValLink" data-pltdoc="x">component-stop</a></span>
functions.  Here&rsquo;s an minimal component implementation:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">started</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._gen~3acomponent%29%29" class="RktStxLink" data-pltdoc="x">gen:component</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-start%29%29" class="RktValLink" data-pltdoc="x">component-start</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-mailer</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=struct-copy.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct-copy%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct-copy</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktSym">a-mailer</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">started</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-stop%29%29" class="RktValLink" data-pltdoc="x">component-stop</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a-mailer</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=struct-copy.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct-copy%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct-copy</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mailer</span><span class="hspace">&nbsp;</span><span class="RktSym">a-mailer</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">started</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The implementations of <span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-start%29%29" class="RktValLink" data-pltdoc="x">component-start</a></span> and
<span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-stop%29%29" class="RktValLink" data-pltdoc="x">component-stop</a></span> must follow the contracts defined below.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>interface</p></div></div><p class="RForeground"><a name="(form._((lib._component/main..rkt)._gen~3acomponent))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._gen~3acomponent%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">gen:component</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._component~3f))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">component?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">component</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">component</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The generic interface that specifies components.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._component-start))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-start%29%29" class="RktValDef RktValLink" data-pltdoc="x">component-start</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">component</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="RktValLink" data-pltdoc="x">component?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">component</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="RktValLink" data-pltdoc="x">component?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Starts a component.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._component-stop))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component-stop%29%29" class="RktValDef RktValLink" data-pltdoc="x">component-stop</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">component</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="RktValLink" data-pltdoc="x">component?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">component</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="RktValLink" data-pltdoc="x">component?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Stops a component.</div></p><h4 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;systems&quot;">2.2<tt>&nbsp;</tt><a name="(part._systems)"></a>Systems</h4><p>Systems group components together according to a declarative
specification.</p><p>When a system is started, its components are each started in
dependency order (if <span class="RktSym">a</span> depends on <span class="RktSym">b</span> which depends on
<span class="RktSym">c</span> then <span class="RktSym">c</span> is started first, then <span class="RktSym">b</span> then
<span class="RktSym">a</span>) and injected into their dependents&rsquo; factory functions
(<span class="RktSym">c</span> is passed to <span class="RktSym">b</span> which is finally passed to
<span class="RktSym">a</span>).</p><p>When a system is stopped, its components are stopped in the reverse
order that they were started in.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system~3f))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">system?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">system</span> is a system.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._make-system))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._make-system%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-system</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">spec</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates a system object according to the given dependency
specification, but does not start it.  A user error is raised if the
spec contains any circular dependencies between components.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._component/main..rkt)._define-system))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._define-system%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-system</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">component</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">component</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">component-name</span><span class="hspace">&nbsp;</span><span class="RktVar">factory</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">component-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">dependency-name</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">factory</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">dependency-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">component-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">component-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">factory</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">expr</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Syntactic sugar for <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._make-system%29%29" class="RktValLink" data-pltdoc="x">make-system</a></span>.
<span class="RktSym"><span class="nobreak">-s</span>ystem</span> is appended to the given name so</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._component%2Fmain..rkt%29._define-system%29%29" class="RktStxLink" data-pltdoc="x">define-system</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prod</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">db</span><span class="hspace">&nbsp;</span><span class="RktSym">make-db</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">app</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">db</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">make-app</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>defines a system called <span class="RktSym">prod-system</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system-start))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-start%29%29" class="RktValDef RktValLink" data-pltdoc="x">system-start</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Starts a system.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system-stop))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-stop%29%29" class="RktValDef RktValLink" data-pltdoc="x">system-stop</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Stops a system.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system-ref))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-ref%29%29" class="RktValDef RktValLink" data-pltdoc="x">system-ref</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._component~3f%29%29" class="RktValLink" data-pltdoc="x">component?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get a component by its name from a system.  Raises <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span>
if called before the system is started or if <span class="RktVar">name</span> refers to
a component that wasn&rsquo;t defined.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system-replace))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-replace%29%29" class="RktValDef RktValLink" data-pltdoc="x">system-replace</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">factory</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">factory</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a new, stopped, system with the factory for the <span class="RktVar">id</span>
component replaced by <span class="RktVar">factory</span>.  This is useful if you have
a large system and you want to replace one of its components with a
stub (eg. for a web app&rsquo;s end-to-end tests).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system-~3edot))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-~3edot%29%29" class="RktValDef RktValLink" data-pltdoc="x">system-&gt;dot</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Generate <a href="https://www.graphviz.org/doc/info/lang.html">dot</a>
notation representing a system&rsquo;s dependency graph.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._component/main..rkt)._system-~3epng))"></a><span title="Provided from: component | Package: component-lib"><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system-~3epng%29%29" class="RktValDef RktValLink" data-pltdoc="x">system-&gt;png</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span><span class="RktVar">output-path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">system</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._component%2Fmain..rkt%29._system~3f%29%29" class="RktValLink" data-pltdoc="x">system?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">output-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Generate a PNG of a system&rsquo;s dependency graph.  Requires Graphviz to
be installed and its dot command to be on the PATH.</div></p><h3 x-source-module="(lib &quot;component/component.scrbl&quot;)" x-source-pkg="component-doc" x-part-tag="&quot;ack&quot;">3<tt>&nbsp;</tt><a name="(part._ack)"></a>Acknowledgements</h3><p>This library draws inspiration from Stuart Sierra&rsquo;s "component"
library for Clojure.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>