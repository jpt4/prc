<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>ccnum: Credit Card Number Utilities</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">ccnum:<span class="mywbr"> &nbsp;</span> Credit Card Number Utilities</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Validation%29" class="tocviewlink" data-pltdoc="x">Validation</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Formatting%29" class="tocviewlink" data-pltdoc="x">Formatting</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.History%29" class="tocviewlink" data-pltdoc="x">History</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Legal%29" class="tocviewlink" data-pltdoc="x">Legal</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">ccnum:<span class="mywbr"> &nbsp;</span> Credit Card Number Utilities</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Validation%29" class="tocsubseclink" data-pltdoc="x">Validation</a></td></tr><tr><td><a href="#%28def._%28%28lib._ccnum%2Fmain..rkt%29._check-credit-card-number%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">check-<wbr></wbr>credit-<wbr></wbr>card-<wbr></wbr>number</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ccnum%2Fmain..rkt%29._credit-card-number-check-digit-ok~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">credit-<wbr></wbr>card-<wbr></wbr>number-<wbr></wbr>check-<wbr></wbr>digit-<wbr></wbr>ok?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ccnum%2Fmain..rkt%29._credit-card-number-seems-ok~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">credit-<wbr></wbr>card-<wbr></wbr>number-<wbr></wbr>seems-<wbr></wbr>ok?</span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Formatting%29" class="tocsubseclink" data-pltdoc="x">Formatting</a></td></tr><tr><td><a href="#%28def._%28%28lib._ccnum%2Fmain..rkt%29._write-formatted-credit-card-number%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">write-<wbr></wbr>formatted-<wbr></wbr>credit-<wbr></wbr>card-<wbr></wbr>number</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ccnum%2Fmain..rkt%29._formatted-credit-card-number%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">formatted-<wbr></wbr>credit-<wbr></wbr>card-<wbr></wbr>number</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.History%29" class="tocsubseclink" data-pltdoc="x">History</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Legal%29" class="tocsubseclink" data-pltdoc="x">Legal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">3:0</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;ccnum/ccnum.scrbl&quot;)" x-source-pkg="ccnum" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._ccnum__.Credit_.Card_.Number_.Utilities)"></a><a name="(mod-path._ccnum)"></a>ccnum: Credit Card Number Utilities</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Neil Van Dyke</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara">License: <a href="#%28part._.Legal%29" class="plainlink" data-pltdoc="x">LPGLv3</a> <span class="hspace">&nbsp;</span> Web: <a href="http://www.neilvandyke.org/racket/ccnum/" class="plainlink">http://www.neilvandyke.org/racket/ccnum/</a>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">ccnum</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/ccnum" title="Install this package using `raco pkg install ccnum`"><span class="stt">ccnum</span></a></span></td></tr></table></div></p><h3 x-source-module="(lib &quot;ccnum/ccnum.scrbl&quot;)" x-source-pkg="ccnum" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p><div class="SIntrapara">The <span class="RktSym">ccnum</span><span class="RktMeta"></span> package defines a few utilities for validating and formatting
credit card numbers.  Credit card numbers are represented as strings containing
digits and arbitrary whitespace.  The procedures are based on information
gleaned from dozens of written artifacts of credit card number oral tradition.
The author invites free copies of authoritative documentation.</div><div class="SIntrapara">Some references that were used:</div><div class="SIntrapara"><ul><li><p>Jeremy Scott Bradbury, &ldquo;<a href="http://www.cs.queensu.ca/~bradbury/checkdigit/creditcardcheck.htm">Credit Card Check Digit</a>,&rdquo; Web page, viewed 2004-05-15.</p></li><li><p>Michael Gilleland, &ldquo;<a href="http://www.merriampark.com/anatomycc.htm">Anatomy of Credit Card Numbers</a>,&rdquo; Web page, viewed 2004-05-15.</p></li><li><p>Happy Hippy, &ldquo;<a href="http://www.hippy.freeserve.co.uk/credcard.htm">Credit Card Magic</a>,&rdquo; Web page, viewed 2004-05-15.</p></li></ul></div><div class="SIntrapara">Achtung!  Do not use this library as anything other than a novelty
unless you understand the code thoroughly and can invest in verifying its
correctness.  I will not be held liable if you say, &ldquo;Hey, <span class="RktSym">ccnum</span><span class="RktMeta"></span> says the credit card number is good!  So mail grandma&rsquo;s jewelry to
that nice man in Nigeria; we&rsquo;re rich, baby!&rdquo;</div></p><h3 x-source-module="(lib &quot;ccnum/ccnum.scrbl&quot;)" x-source-pkg="ccnum" x-part-tag="&quot;Validation&quot;">2<tt>&nbsp;</tt><a name="(part._.Validation)"></a>Validation</h3><p><div class="SIntrapara">The following procedures provide different ways of validating
credit card numbers.  Most applications will use <span class="RktSym">credit-card-number-check-digit-ok?</span>  or <span class="RktSym">credit-card-number-seems-ok?</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ccnum/main..rkt)._check-credit-card-number))"></a><span title="Provided from: ccnum | Package: ccnum"><span class="RktSym"><span class="RktSymDef RktSym">check-credit-card-number</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exact-positive-integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">american-express</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">australian-bankcard</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">carte-blanche</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">diners-club</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">discover-novus</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">jcb</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">mastercard</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">visa</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Performs a partial validation of the credit card number in <span class="RktVar">str</span>.  If the check digit is incorrect, then <span class="RktVal">#f</span> is yielded:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">check-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"4408041234567890"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">If the check digit is correct, but the issuer cannot be
determined, then an integer representing the digit count is yielded:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">check-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"1234567890123452"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">16</span></td></tr></table></blockquote></div><div class="SIntrapara">If the check digit is correct and issuer can be determined, then
a list of three elements is returned.  The first element is a boolean value for
whether or not the digit count matches what is known about how many digits the
issuer uses for this class of cards.  The second element is the digit count.
The third element is a symbol loosely identifying the issuer.  For example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">check-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"5551 2121 9"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(#f<span class="stt"> </span>9<span class="stt"> </span>mastercard)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">check-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"4408041234567893"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(#t<span class="stt"> </span>16<span class="stt"> </span>visa)</span></td></tr></table></blockquote></div><div class="SIntrapara">Note: The above particular interface for return values is for
historical reasons, and is not particularly good form.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ccnum/main..rkt)._credit-card-number-check-digit-ok~3f))"></a><span title="Provided from: ccnum | Package: ccnum"><span class="RktSym"><span class="RktSymDef RktSym">credit-card-number-check-digit-ok?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for whether or not the check digit of credit card
number <span class="RktVar">str</span> is correct.</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">credit-card-number-check-digit-ok?</span><span class="hspace">&nbsp;</span><span class="RktVal">"4408 0412 3456 7893"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#t</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">credit-card-number-check-digit-ok?</span><span class="hspace">&nbsp;</span><span class="RktVal">"4408 0412 3456 7890"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#f</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">credit-card-number-check-digit-ok?</span><span class="hspace">&nbsp;</span><span class="RktVal">"trump"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#f</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ccnum/main..rkt)._credit-card-number-seems-ok~3f))"></a><span title="Provided from: ccnum | Package: ccnum"><span class="RktSym"><span class="RktSymDef RktSym">credit-card-number-seems-ok?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for whether or not the credit card number <span class="RktVar">str</span> &ldquo;seems&rdquo; to be valid.  For a credit card number to &ldquo;seem&rdquo;
valid, the check digit must be correct, the issuer must be identified, and the
digit count must match what is known about issuer digit counts.  In the
following example the check digit is correct, and the issuer (MasterCard) has
been identified, but the digit count is too low for a MasterCard number:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">credit-card-number-check-digit-ok?</span><span class="hspace">&nbsp;</span><span class="RktVal">"5551 2121 9"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#t</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">credit-card-number-seems-ok?</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"5551 2121 9"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#f</span></td></tr></table></blockquote></div></p><h3 x-source-module="(lib &quot;ccnum/ccnum.scrbl&quot;)" x-source-pkg="ccnum" x-part-tag="&quot;Formatting&quot;">3<tt>&nbsp;</tt><a name="(part._.Formatting)"></a>Formatting</h3><p><div class="SIntrapara">Two procedures are provided for formatting credit card numbers.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._ccnum/main..rkt)._write-formatted-credit-card-number))"></a><span title="Provided from: ccnum | Package: ccnum"><span class="RktSym"><span class="RktSymDef RktSym">write-formatted-credit-card-number</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">str</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">port</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">output-port?</span></td></tr></table></blockquote></div><div class="SIntrapara">Writes credit card number <span class="RktVar">str</span> to output port <span class="RktVar">port</span>, using a format similar to that used on many credit cards.  In
the current version of this package, the format is always groups of four digits
separated by single space characters, although a future version might mimic the
format used by the issuer.  For example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">write-formatted-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">" 1 23 456</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">7890 12345 6 "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-output-port</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Outputs:</div><div class="SIntrapara"><blockquote><p><span class="RktOut">1234 5678 9012 3456</span></p></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ccnum/main..rkt)._formatted-credit-card-number))"></a><span title="Provided from: ccnum | Package: ccnum"><span class="RktSym"><span class="RktSymDef RktSym">formatted-credit-card-number</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Yields a formatted string representation of credit card number <span class="RktVar">str</span> like that written by <span class="RktSym">write-formatted-credit-card-number</span>.</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">formatted-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"1234567890123456"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"1234 5678 9012 3456"</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">formatted-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">12 34 56</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">7890 1234 56"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"1234 5678 9012 3456"</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">formatted-credit-card-number</span><span class="hspace">&nbsp;</span><span class="RktVal">"123 abc"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Note that <span class="RktPn">(</span><span class="RktSym">write-formatted-credit-card-number</span><span class="stt"> </span><span class="RktSym">n</span><span class="stt"> </span><span class="RktSym">p</span><span class="RktPn">)</span> might be more efficient than <span class="RktPn">(</span><span class="RktSym">display</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">formatted-credit-card-number</span><span class="stt"> </span><span class="RktSym">n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">p</span><span class="RktPn">)</span>.</div></p><h3 x-source-module="(lib &quot;ccnum/ccnum.scrbl&quot;)" x-source-pkg="ccnum" x-part-tag="&quot;History&quot;">4<tt>&nbsp;</tt><a name="(part._.History)"></a>History</h3><ul><li><p><div class="SIntrapara">Version 3:0 &#8212;<wbr></wbr> 2016-02-28</div><div class="SIntrapara"><ul><li><p>Moving from PLaneT to new package system.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:0 &#8212;<wbr></wbr> 2012-06-14</div><div class="SIntrapara">Converted to McFly and Overeasy.</div></p></li><li><p><div class="SIntrapara">Version 0.4 &#8212;<wbr></wbr> Version 1:2 &#8212;<wbr></wbr> 2009-03-11</div><div class="SIntrapara"><ul><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.3 &#8212;<wbr></wbr> Version 1:1 &#8212;<wbr></wbr> 2009-03-03</div><div class="SIntrapara"><ul><li><p>License is now LGPL 3.  Converted to author&rsquo;s new Scheme administration
system.  Tweaks for PLT 4.x.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.2 &#8212;<wbr></wbr> Version 1:0 &#8212;<wbr></wbr> 2005-03-29</div><div class="SIntrapara"><ul><li><p>Minus characters (<span class="RktVal">#\-</span>) are now accepted as blanks in credit card numbers.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.1 &#8212;<wbr></wbr> 2004-05-15</div><div class="SIntrapara"><ul><li><p>First release.</p></li></ul></div></p></li></ul><h3 x-source-module="(lib &quot;ccnum/ccnum.scrbl&quot;)" x-source-pkg="ccnum" x-part-tag="&quot;Legal&quot;">5<tt>&nbsp;</tt><a name="(part._.Legal)"></a>Legal</h3><p>Copyright 2004, 2005, 2009, 2012, 2016 Neil Van Dyke.  This program is Free
Software; you can redistribute it and/or modify it under the terms of the GNU
Lesser General Public License as published by the Free Software Foundation;
either version 3 of the License, or (at your option) any later version.  This
program is distributed in the hope that it will be useful, but without any
warranty; without even the implied warranty of merchantability or fitness for a
particular purpose.  See http://www.gnu.org/licenses/ for details.  For other
licenses and consulting, please contact the author.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>