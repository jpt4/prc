<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Packrat: Simple Packrat Parsing</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Packrat:<span class="mywbr"> &nbsp;</span> Simple Packrat Parsing</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Combinator_library%29" class="tocviewlink" data-pltdoc="x">Combinator library</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Parser_syntax%29" class="tocviewlink" data-pltdoc="x">Parser syntax</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Examples%29" class="tocviewlink" data-pltdoc="x">Examples</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Test_suite%29" class="tocviewlink" data-pltdoc="x">Test suite</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Packrat:<span class="mywbr"> &nbsp;</span> Simple Packrat Parsing</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Combinator_library%29" class="tocsubseclink" data-pltdoc="x">Combinator library</a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>position</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>error</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._top-parse-position%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">top-<wbr></wbr>parse-<wbr></wbr>position</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._update-parse-position%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">update-<wbr></wbr>parse-<wbr></wbr>position</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._empty-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">empty-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-error-expected%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>error-<wbr></wbr>expected</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-error-message%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>error-<wbr></wbr>message</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error-~3eparse-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>error-<wbr></wbr>&gt;parse-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-expected-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>expected-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-message-result%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>message-<wbr></wbr>result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._base-generator-~3eresults%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">base-<wbr></wbr>generator-<wbr></wbr>&gt;results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results-next%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>results-<wbr></wbr>next</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._results-~3eresult%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">results-<wbr></wbr>&gt;result</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3e~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>position&gt;?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error-empty~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parse-<wbr></wbr>error-<wbr></wbr>empty?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._merge-parse-errors%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">merge-<wbr></wbr>parse-<wbr></wbr>errors</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._merge-result-errors%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">merge-<wbr></wbr>result-<wbr></wbr>errors</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-base%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>check-<wbr></wbr>base</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-pred%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>check-<wbr></wbr>pred</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>check</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-or%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>or</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-unless%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>unless</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-port-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>port-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-string-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>string-<wbr></wbr>results</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-list-results%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">packrat-<wbr></wbr>list-<wbr></wbr>results</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Parser_syntax%29" class="tocsubseclink" data-pltdoc="x">Parser syntax</a></td></tr><tr><td><a href="#%28form._%28%28lib._packrat%2Fparse..rkt%29._parse%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">parse</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Examples%29" class="tocsubseclink" data-pltdoc="x">Examples</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Test_suite%29" class="tocsubseclink" data-pltdoc="x">Test suite</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">2.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;packrat/scribblings/packrat.scrbl&quot;)" x-source-pkg="Packrat" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Packrat__.Simple_.Packrat_.Parsing)"></a><a name="(mod-path._packrat)"></a>Packrat: Simple Packrat Parsing</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">David Van Horn &lt;<a href="mailto:dvanhorn@ccs.neu.edu">dvanhorn@ccs.neu.edu</a>&gt;<br/>and Simon Haines &lt;<a href="mailto:simon.haines@scalardata.com">simon.haines@scalardata.com</a>&gt;</p></span></div><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">packrat</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/Packrat" title="Install this package using `raco pkg install Packrat`"><span class="stt">Packrat</span></a></span></td></tr></table></div><div class="SIntrapara">This module provides a small library of parsing combinators and a syntax for defining parsers based on the portable packrat parsing library by Tony Garnock-Jones: <a href="http://www.lshift.net/~tonyg/packrat.pdf"><span class="url">http://www.lshift.net/~tonyg/packrat.pdf</span></a></div><div class="SIntrapara">Bug reports, suggestions and pull requests are welcome via <a href="https://github.com/simonhaines/packrat">GitHub</a>.</div></p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Combinator_library%29" class="toptoclink" data-pltdoc="x">1<span class="hspace">&nbsp;</span>Combinator library</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Parser_syntax%29" class="toptoclink" data-pltdoc="x">2<span class="hspace">&nbsp;</span>Parser syntax</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Examples%29" class="toptoclink" data-pltdoc="x">3<span class="hspace">&nbsp;</span>Examples</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Test_suite%29" class="toptoclink" data-pltdoc="x">4<span class="hspace">&nbsp;</span>Test suite</a></p></td></tr></table><h3 x-source-module="(lib &quot;packrat/scribblings/packrat.scrbl&quot;)" x-source-pkg="Packrat" x-part-tag="&quot;Combinator_library&quot;">1<tt>&nbsp;</tt><a name="(part._.Combinator_library)"></a><a name="(mod-path._packrat/combinator)"></a>Combinator library</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._packrat%2Fcombinator%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">packrat/combinator</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/Packrat" title="Install this package using `raco pkg install Packrat`"><span class="stt">Packrat</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._packrat/combinator..rkt)._parse-position-column))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-position-line))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-position-filename))"></a><a name="(def._((lib._packrat/combinator..rkt)._make-parse-position))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-position~3f))"></a><a name="(def._((lib._packrat/combinator..rkt)._struct~3aparse-position))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-position))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-position</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">filename</span><span class="stt"> </span><span class="RktSym">line</span><span class="stt"> </span><span class="RktSym">column</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-parse-position%29%29" class="RktValLink" data-pltdoc="x">make-parse-position</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">filename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">line</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">column</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">number?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValLink" data-pltdoc="x">parse-position</a></span> structure represents a character location in an input stream.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._packrat/combinator..rkt)._parse-result-error))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-result-next))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-result-semantic-value))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-result-successful~3f))"></a><a name="(def._((lib._packrat/combinator..rkt)._make-parse-result))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-result~3f))"></a><a name="(def._((lib._packrat/combinator..rkt)._struct~3aparse-result))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-result))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-result</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">successful?</span><span class="stt"> </span><span class="RktSym">semantic-value</span><span class="stt"> </span><span class="RktSym">next</span><span class="stt"> </span><span class="RktSym">error</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-parse-result%29%29" class="RktValLink" data-pltdoc="x">make-parse-result</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">successful?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">semantic-value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">next</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">error</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> structure describes the results of an attempt at a parse at a particular position in the input stream. It can either record a successful parse, in which case it contains an associated semantic-value, or a failed parse, in which case it contains a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> structure.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._packrat/combinator..rkt)._parse-results-map))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-results-next*))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-results-base))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-results-position))"></a><a name="(def._((lib._packrat/combinator..rkt)._make-parse-results))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-results~3f))"></a><a name="(def._((lib._packrat/combinator..rkt)._struct~3aparse-results))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-results))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">position</span><span class="stt"> </span><span class="RktSym">base</span><span class="stt"> </span><span class="RktSym">next*</span><span class="stt"> </span><span class="RktSym">map</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-parse-results%29%29" class="RktValLink" data-pltdoc="x">make-parse-results</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">position</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">base</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">next*</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> structure notionally describes all possible parses that can be attempted from a particular point in an input stream, and the results of those parses. It contains a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValLink" data-pltdoc="x">parse-position</a></span> structure, which corresponds to the position in the input stream that this <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> represents, and a map associated "key objects" with instances of <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span>.</div></p><p>Atomic objects (known as "base values"; usually either character or token/semantic-value pairs) are represented specially in the <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> data structure, as an optimisation: the two fields <span class="RktSym">base</span> and <span class="RktSym">next*</span> represent the implicit successful parse of a base value at the current position. The <span class="RktSym">base</span> field contains a pair of a token-class-identifier and a semantic value unless the parse-results data structure as a whole is representing the end of the input stream, in which case it will contain <span class="RktVal">#f</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._packrat/combinator..rkt)._parse-error-messages))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-error-expected))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-error-position))"></a><a name="(def._((lib._packrat/combinator..rkt)._make-parse-error))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-error~3f))"></a><a name="(def._((lib._packrat/combinator..rkt)._struct~3aparse-error))"></a><a name="(def._((lib._packrat/combinator..rkt)._parse-error))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-error</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">position</span><span class="stt"> </span><span class="RktSym">expected</span><span class="stt"> </span><span class="RktSym">messages</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-parse-error%29%29" class="RktValLink" data-pltdoc="x">make-parse-error</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">position</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">expected</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">messages</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> structure represents collected error information from attempted parses. It contains two kinds of error report: a collection of "expected token" messages, and a collection of free-format message strings.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._top-parse-position))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._top-parse-position%29%29" class="RktValDef RktValLink" data-pltdoc="x">top-parse-position</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">filename</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValLink" data-pltdoc="x">parse-position</a></span> representing the very beginning of an input stream. The argument is passed into <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-parse-position%29%29" class="RktValLink" data-pltdoc="x">make-parse-position</a></span> as the <span class="RktVar">filename</span> parameter.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._update-parse-position))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._update-parse-position%29%29" class="RktValDef RktValLink" data-pltdoc="x">update-parse-position</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span><span class="RktVar">ch</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ch</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=characters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._char%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">char?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a position, and the character occuring at that position, returns the position of the next character in the input stream. Most characters simple increment the column number. Expections to this rule are: <span class="RktVal">#\return</span>, which resets the column number to zero; <span class="RktVal">#\newline</span>, which both resets the column number to zero and increments the line number; and <span class="RktVal">#\tab</span>, which increments the column number to the nearest multiple of eight, just as a terminal with an eight-column tab stop setting might do.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._empty-results))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._empty-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">empty-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates an empty <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> structure using the <span class="RktVar">pos</span> argument as the current position.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._make-results))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span><span class="RktVar">base</span><span class="hspace">&nbsp;</span><span class="RktVar">next-generator</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">base</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons/c</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">next-generator</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> instance with the supplied <span class="RktVar">pos</span>, <span class="RktVar">base</span> and <span class="RktVar">next-generator</span>, and a <span class="RktSym">hash-eq</span> dictionary for the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._make-error-expected))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-error-expected%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-error-expected</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span><span class="RktVar">thing</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> with the supplied <span class="RktVar">pos</span> and <span class="RktVar">thing</span> as the "expected token" message.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._make-error-message))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-error-message%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-error-message</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span><span class="RktVar">msg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">msg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> with the supplied <span class="RktVar">pos</span> and <span class="RktVar">msg</span> as the "general error" message.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._make-result))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-result</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">semantic-value</span><span class="hspace">&nbsp;</span><span class="RktVar">next</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">semantic-value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">next</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a successful <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> with the supplied <span class="RktVar">semantic-value</span> and <span class="RktVar">next</span> instance.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._parse-error-~3eparse-result))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error-~3eparse-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-error-&gt;parse-result</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">err</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">err</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Transforms the <span class="RktVar">err</span> into a failed <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._make-expected-result))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-expected-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-expected-result</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span><span class="RktVar">thing</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thing</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Combines <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-error-expected%29%29" class="RktValLink" data-pltdoc="x">make-error-expected</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error-~3eparse-result%29%29" class="RktValLink" data-pltdoc="x">parse-error-&gt;parse-result</a></span> to construct a failed <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> with the supplied <span class="RktVar">pos</span> and <span class="RktVar">thing</span> as the "expected token" message.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._make-message-result))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-message-result%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-message-result</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span><span class="RktVar">msg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pos</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">msg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Combines <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._make-error-message%29%29" class="RktValLink" data-pltdoc="x">make-error-message</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error-~3eparse-result%29%29" class="RktValLink" data-pltdoc="x">parse-error-&gt;parse-result</a></span> to construct a failed <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> with the supplied <span class="RktVar">pos</span> and <span class="RktVar">msg</span> as the "general error" message.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._base-generator-~3eresults))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._base-generator-~3eresults%29%29" class="RktValDef RktValLink" data-pltdoc="x">base-generator-&gt;results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">generator</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">generator</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons/c</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">This function is used to set up an initial input stream of base tokens. The argument is to be a nullary function returning multiple values, the first is a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValLink" data-pltdoc="x">parse-position</a></span> or <span class="RktVal">#f</span>, and the second is a base token&ndash;a pair of a token class identifier and a semantic value. The argument is called every time the parser needs to read a fresh base token from the input stream.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._parse-results-next))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results-next%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-results-next</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">results</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">results</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Accesses the <span class="RktSym">next</span> value of a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> instance, and removes this value from the list of <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span>. If the <span class="RktSym">next</span> value is <span class="RktVal">#f</span> an error is generated.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._results-~3eresult))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._results-~3eresult%29%29" class="RktValDef RktValLink" data-pltdoc="x">results-&gt;result</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">results</span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">fn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">results</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This is the central function that drives the parsing process. It examines the result map in the <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span>, searching for an entry matching the <span class="RktVar">key</span>. If an entry is found, the associated <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> is returned; otherwise, the <span class="RktVar">fn</span> is called and the resulting <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> is both stored in the result map and returned.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._parse-position~3e~3f))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3e~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-position&gt;?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">a</span><span class="hspace">&nbsp;</span><span class="RktVar">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">a</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">b</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position~3f%29%29" class="RktValLink" data-pltdoc="x">parse-position?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Compares the two <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValLink" data-pltdoc="x">parse-position</a></span> instances, and returns true if the first position is later in the input stream (according to the <span class="RktSym">line</span> and <span class="RktSym">col</span> values) than the second position.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._parse-error-empty~3f))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error-empty~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">parse-error-empty?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">e</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate for <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> instances that returns <span class="RktVal">#t</span> if the instance contains no "expected token" or "general error" messages.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._merge-parse-errors))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._merge-parse-errors%29%29" class="RktValDef RktValLink" data-pltdoc="x">merge-parse-errors</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">e1</span><span class="hspace">&nbsp;</span><span class="RktVar">e2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">e1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">e2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Merges two <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> instances. If one instance represents a position earlier in the input stream than the other, that instance is returned. If they both represent the same position, the "expected token" sets are united and the "general error" sets are appended to form a new <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> at the same position.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._merge-result-errors))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._merge-result-errors%29%29" class="RktValDef RktValLink" data-pltdoc="x">merge-result-errors</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">result</span><span class="hspace">&nbsp;</span><span class="RktVar">errs</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">result</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">errs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error~3f%29%29" class="RktValLink" data-pltdoc="x">parse-error?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">false?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Merges <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-error%29%29" class="RktValLink" data-pltdoc="x">parse-error</a></span> instances to create a new <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result%29%29" class="RktValLink" data-pltdoc="x">parse-result</a></span> with the errors merged with <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._merge-parse-errors%29%29" class="RktValLink" data-pltdoc="x">merge-parse-errors</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-check-base))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-base%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-check-base</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token-kind</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token-kind</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a combinator which, if the next base token has a token class identifier equal to <span class="RktVar">token-kind</span>, evaluates <span class="RktVar">k</span> with the semantic value of the next base token. The result should be another parser combinator, which is applied to the <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results%29%29" class="RktValLink" data-pltdoc="x">parse-results</a></span> representing the remainder of the input stream.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-check-pred))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-pred%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-check-pred</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token-pred</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token-pred</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a combinator which tests the next base token with <span class="RktVar">token-pred</span> and if the result is <span class="RktVal">#t</span>, evaluates <span class="RktVar">k</span> with the semantic value of the token, similarly to <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-base%29%29" class="RktValLink" data-pltdoc="x">packrat-check-base</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-check))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-check</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">parser</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">parser</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">k</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a combinator which attempts to parse using <span class="RktVar">parser</span>, and if the parse is successful, hands the resulting semantic value to <span class="RktVar">k</span> and continues parsing using the resulting combinator.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-or))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-or%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-or</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p1</span><span class="hspace">&nbsp;</span><span class="RktVar">p2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a combinator which attempts to parse using <span class="RktVar">p1</span>, only trying <span class="RktVar">p2</span> if <span class="RktVar">p1</span> fails to parse the input. This is the basic combinator used to implement a choice among several alternative means of parsing an input stream.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-unless))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-unless%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-unless</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">explanation</span><span class="hspace">&nbsp;</span><span class="RktVar">p1</span><span class="hspace">&nbsp;</span><span class="RktVar">p2</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">explanation</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result~3f%29%29" class="RktValLink" data-pltdoc="x">parse-result?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The combinator returned from this function first tries <span class="RktVar">p1</span>. If it fails, <span class="RktVar">p2</span> is tried; otherwise an error containing <span class="RktVar">explanation</span> is returned. This can be used to assert that a particular sequence of tokens does not occur at the current position before continuing.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-port-results))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-port-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-port-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns an input stream generator from the <span class="RktVar">filename</span> and <span class="RktVar">p</span> port. See <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._base-generator-~3eresults%29%29" class="RktValLink" data-pltdoc="x">base-generator-&gt;results</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-string-results))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-string-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-string-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span><span class="RktVar">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns an input stream generator from the <span class="RktVar">filename</span> and <span class="RktVar">s</span> string. See <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._base-generator-~3eresults%29%29" class="RktValLink" data-pltdoc="x">base-generator-&gt;results</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._packrat/combinator..rkt)._packrat-list-results))"></a><span title="Provided from: packrat/combinator | Package: Packrat"><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-list-results%29%29" class="RktValDef RktValLink" data-pltdoc="x">packrat-list-results</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tokens</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-results~3f%29%29" class="RktValLink" data-pltdoc="x">parse-results?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tokens</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns an input stream generator from the <span class="RktVar">tokens</span>. See <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._base-generator-~3eresults%29%29" class="RktValLink" data-pltdoc="x">base-generator-&gt;results</a></span>.</div></p><h3 x-source-module="(lib &quot;packrat/scribblings/packrat.scrbl&quot;)" x-source-pkg="Packrat" x-part-tag="&quot;Parser_syntax&quot;">2<tt>&nbsp;</tt><a name="(part._.Parser_syntax)"></a><a name="(mod-path._packrat/parse)"></a>Parser syntax</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._packrat%2Fparse%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">packrat/parse</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/Packrat" title="Install this package using `raco pkg install Packrat`"><span class="stt">Packrat</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._packrat/parse..rkt)._parse))"></a><span title="Provided from: packrat/parse | Package: Packrat"><span class="RktSym"><a href="#%28form._%28%28lib._packrat%2Fparse..rkt%29._parse%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">parse</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">nonterminal-id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">sequence</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktVar">body0</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">sequence</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">part</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">part</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">!</span><span class="hspace">&nbsp;</span><span class="RktVar">part</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252F%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktVar">sequence</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">?</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">nonterminal-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">kind</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">@</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktVar">nonterminal-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">?</span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">This macro provides syntactic sugar for building complex parser combinators from simpler combinators.</div></p><p>Each nonterminal definition expands into a parser-combinator, and the result of the form is the parser-combinator for the <span class="RktVar">id</span> nonterminal, which must be defined as one of the <span class="RktVar">nonterminal-id</span> forms.</p><p>The <span class="RktPn">(</span><span class="RktSym">!</span><span class="stt"> </span><span class="RktVar">part</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> syntax expands into a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-unless%29%29" class="RktValLink" data-pltdoc="x">packrat-unless</a></span> form.</p><p>The <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252F%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">/</a></span><span class="stt"> </span><span class="RktVar">sequence</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> syntax expands into a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-or%29%29" class="RktValLink" data-pltdoc="x">packrat-or</a></span> form.</p><p>The <span class="RktPn">(</span><span class="RktSym">?</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span> syntax expands into a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-pred%29%29" class="RktValLink" data-pltdoc="x">packrat-check-pred</a></span> form.</p><p>Each <span class="RktVar">nonterminal-id</span> expands into a <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._results-~3eresult%29%29" class="RktValLink" data-pltdoc="x">results-&gt;result</a></span> formed from the body of the nonterminal definition.</p><p><div class="SIntrapara">The <span class="RktVar">id</span><span class="stt"> </span><span class="RktSym">:=</span> parts create a variable binding for <span class="RktVar">id</span> in the <span class="RktVar">body</span> expressions:
</div><div class="SIntrapara"><ul><li><p>The <span class="RktVal">'</span><span class="RktVal">kind</span> form expands into <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-base%29%29" class="RktValLink" data-pltdoc="x">packrat-check-base</a></span>.</p></li><li><p>The <span class="RktSym">@</span> binds <span class="RktVar">id</span> to the <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-position%29%29" class="RktValLink" data-pltdoc="x">parse-position</a></span> at that point in the input stream.</p></li><li><p>The <span class="RktVar">nonterminal-id</span> form expands into <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check%29%29" class="RktValLink" data-pltdoc="x">packrat-check</a></span> with the procedure associated with the nonterminal passed as the combinator argument.</p></li><li><p>The <span class="RktSym">?</span> expands into <span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-check-pred%29%29" class="RktValLink" data-pltdoc="x">packrat-check-pred</a></span>.</p></li></ul></div></p><h3 x-source-module="(lib &quot;packrat/scribblings/packrat.scrbl&quot;)" x-source-pkg="Packrat" x-part-tag="&quot;Examples&quot;">3<tt>&nbsp;</tt><a name="(part._.Examples)"></a>Examples</h3><p>Here is an example of a simple calculator.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">calc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._packrat%2Fparse..rkt%29._parse%29%29" class="RktStxLink" data-pltdoc="x">parse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">expr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">mulexp</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">+</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">mulexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">mulexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mulexp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">*</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">*</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktVal">'</span><span class="RktVal">oparen</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">:=</span><span class="hspace">&nbsp;</span><span class="RktSym">expr</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">cparen</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">g</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._packrat-list-results%29%29" class="RktValLink" data-pltdoc="x">packrat-list-results</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">num</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">+</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">num</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">*</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">num</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._packrat%2Fcombinator..rkt%29._parse-result-semantic-value%29%29" class="RktValLink" data-pltdoc="x">parse-result-semantic-value</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calc</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">7</span></p></td></tr></table></blockquote></div></p><p>See the tests source file for an example of a parser for a simplified Scheme grammar.</p><h3 x-source-module="(lib &quot;packrat/scribblings/packrat.scrbl&quot;)" x-source-pkg="Packrat" x-part-tag="&quot;Test_suite&quot;">4<tt>&nbsp;</tt><a name="(part._.Test_suite)"></a><a name="(mod-path._packrat/test)"></a>Test suite</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._packrat%2Ftest%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">packrat/test</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/Packrat" title="Install this package using `raco pkg install Packrat`"><span class="stt">Packrat</span></a></span></td></tr></table></p><p>This module contains the test suite which is run during package installation, or from the command line: <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">test</span><span class="stt"> </span><span class="RktSym"><span class="nobreak">-p</span></span><span class="stt"> </span><span class="RktSym">packrat</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>