<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>csv-reading: Comma-Separated Value (CSV) Parsing</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">csv-<wbr></wbr>reading:<span class="mywbr"> &nbsp;</span> Comma-<wbr></wbr>Separated Value (CSV) Parsing</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Reader_.Specs%29" class="tocviewlink" data-pltdoc="x">Reader Specs</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Making_.Reader_.Makers%29" class="tocviewlink" data-pltdoc="x">Making Reader Makers</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Making_.Readers%29" class="tocviewlink" data-pltdoc="x">Making Readers</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.High-.Level_.Conveniences%29" class="tocviewlink" data-pltdoc="x">High-<wbr></wbr>Level Conveniences</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Converting_.C.S.V_to_.S.X.M.L%29" class="tocviewlink" data-pltdoc="x">Converting CSV to SXML</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.History%29" class="tocviewlink" data-pltdoc="x">History</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._.Legal%29" class="tocviewlink" data-pltdoc="x">Legal</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">csv-<wbr></wbr>reading:<span class="mywbr"> &nbsp;</span> Comma-<wbr></wbr>Separated Value (CSV) Parsing</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Reader_.Specs%29" class="tocsubseclink" data-pltdoc="x">Reader Specs</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Making_.Reader_.Makers%29" class="tocsubseclink" data-pltdoc="x">Making Reader Makers</a></td></tr><tr><td><a href="#%28def._%28%28lib._csv-reading%2Fmain..rkt%29._make-csv-reader-maker%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>csv-<wbr></wbr>reader-<wbr></wbr>maker</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Making_.Readers%29" class="tocsubseclink" data-pltdoc="x">Making Readers</a></td></tr><tr><td><a href="#%28def._%28%28lib._csv-reading%2Fmain..rkt%29._make-csv-reader%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>csv-<wbr></wbr>reader</span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.High-.Level_.Conveniences%29" class="tocsubseclink" data-pltdoc="x">High-<wbr></wbr>Level Conveniences</a></td></tr><tr><td><a href="#%28def._%28%28lib._csv-reading%2Fmain..rkt%29._csv-for-each%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">csv-<wbr></wbr>for-<wbr></wbr>each</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._csv-reading%2Fmain..rkt%29._csv-map%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">csv-<wbr></wbr>map</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._csv-reading%2Fmain..rkt%29._csv-~3elist%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">csv-<wbr></wbr>&gt;list</span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Converting_.C.S.V_to_.S.X.M.L%29" class="tocsubseclink" data-pltdoc="x">Converting CSV to SXML</a></td></tr><tr><td><a href="#%28def._%28%28lib._csv-reading%2Fmain..rkt%29._csv-~3esxml%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">csv-<wbr></wbr>&gt;sxml</span></a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.History%29" class="tocsubseclink" data-pltdoc="x">History</a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._.Legal%29" class="tocsubseclink" data-pltdoc="x">Legal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">3:4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._csv-reading__.Comma-.Separated_.Value__.C.S.V__.Parsing)"></a><a name="(mod-path._csv-reading)"></a>csv-reading: Comma-Separated Value (CSV) Parsing</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Neil Van Dyke</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara">License: <a href="#%28part._.Legal%29" class="plainlink" data-pltdoc="x">LGPLv3</a> <span class="hspace">&nbsp;</span> Web: <a href="http://www.neilvandyke.org/racket/csv-reading/" class="plainlink">http://www.neilvandyke.org/racket/csv-reading/</a>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">csv-reading</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/csv-reading" title="Install this package using `raco pkg install csv-reading`"><span class="stt">csv-reading</span></a></span></td></tr></table></div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p><div class="SIntrapara">The <span class="RktSym">csv-reading</span><span class="RktMeta"></span> package for Racket provides utilities for reading various kinds of
what are commonly known as &ldquo;comma-separated value&rdquo; (CSV) files.  Since there
is no standard CSV format, this library permits CSV readers to be constructed
from a specification of the peculiarities of a given variant.  A default reader
handles the majority of formats.</div><div class="SIntrapara">One of the main uses of this library is to import data from old
crusty legacy applications into Scheme for data conversion and other
processing.  To that end, this library includes various conveniences for
iterating over parsed CSV rows, and for converting CSV input to <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?tag=%28part._%28.%27%28lib._sxml-intro%2Fsxml-intro..scrbl%29.%27._.%27top.%27%29%29&amp;version=7.4" class="Sq" data-pltdoc="x">SXML</a> format.</div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;Reader_Specs&quot;">2<tt>&nbsp;</tt><a name="(part._.Reader_.Specs)"></a>Reader Specs</h3><p><div class="SIntrapara">CSV readers are constructed using <a name="(tech._reader._spec)"></a><span style="font-style: italic">reader specs</span>, which are sets of attribute-value pairs, represented in Scheme as
association lists keyed on symbols.  Each attribute has a default value if not
specified otherwise.  The attributes are:</div><div class="SIntrapara"><ul><li><p><span class="stt">newline-type</span> &#8212;<wbr></wbr> Symbol representing the newline, or record-terminator,
convention.  The convention can be a fixed character sequence (<span class="RktVal">'</span><span class="RktVal">lf</span>, <span class="RktVal">'</span><span class="RktVal">crlf</span>, or <span class="RktVal">'</span><span class="RktVal">cr</span>, corresponding to combinations of line-feed and carriage-return),
any string of one or more line-feed and carriage-return characters (<span class="RktVal">'</span><span class="RktVal">lax</span>), or adaptive (<span class="RktVal">'</span><span class="RktVal">adapt</span>).  <span class="RktVal">'</span><span class="RktVal">adapt</span> attempts to detect
the newline convention at the start of the input and assume that convention
for the remainder of the input.  Default: <span class="RktVal">'</span><span class="RktVal">lax</span></p></li><li><p><span class="stt">separator-chars</span> &#8212;<wbr></wbr> Non-null list of characters that serve as field separators.
Normally, this will be a list of one character.  Default: <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#\,</span><span class="RktVal">)</span> (list of the comma character)</p></li><li><p><span class="stt">quote-char</span> &#8212;<wbr></wbr> Character that should be treated as the quoted field
delimiter character,or <span class="RktVal">#f</span> if fields cannot be quoted.  Note that there can be only one
quote character.  Default: <span class="RktVal">#\"</span> (double-quote)</p></li><li><p><span class="stt">quote-doubling-escapes?</span> &#8212;<wbr></wbr> Boolean for whether or not a sequence of two <span class="stt">quote-char</span> quote characters within a quoted field constitute an escape
sequence for including a single <span class="stt">quote-char</span> within the string.  Default: <span class="RktVal">#t</span></p></li><li><p><span class="stt">comment-chars</span> &#8212;<wbr></wbr> List of characters, possibly null, which comment out the
entire line of input when they appear as the first character in a line.
Default: <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span> (null list)</p></li><li><p><span class="stt">whitespace-chars</span> &#8212;<wbr></wbr> List of characters, possibly null, that are considered <a name="(tech._whitespace)"></a><span style="font-style: italic">whitespace</span> constituents for purposes of the <span class="RktSym">strip-leading-whitespace?</span> and <span class="RktSym">strip-trailing-whitespace?</span> attributes described below. Default: <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">#\space</span><span class="RktVal">)</span> (list of the space character)</p></li><li><p><span class="stt">strip-leading-whitespace?</span> &#8212;<wbr></wbr> Boolean for whether or not leading whitespace in fields
should be stripped.  Note that whitespace within a quoted field is never
stripped.  Default: <span class="RktVal">#f</span></p></li><li><p><span class="stt">strip-trailing-whitespace?</span> &#8212;<wbr></wbr> Boolean for whether or not trailing whitespace in fields
should be stripped.  Note that whitespace within a quoted field is never
stripped.  Default: <span class="RktVal">#f</span></p></li><li><p><span class="stt">newlines-in-quotes?</span> &#8212;<wbr></wbr> Boolean for whether or not newline sequences are permitted
within quoted fields.  If true, then the newline characters are included as
part of the field value; if false, then the newline sequence is treated as a
premature record termination.  Default: <span class="RktVal">#t</span></p></li></ul></div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;Making_Reader_Makers&quot;">3<tt>&nbsp;</tt><a name="(part._.Making_.Reader_.Makers)"></a>Making Reader Makers</h3><p><div class="SIntrapara">CSV readers are procedures that are constructed dynamically to
close over a particular CSV input and yield a parsed row value each time the
procedure is applied.  For efficiency reasons, the reader procedures are
themselves constructed by another procedure, <span class="RktSym">make-csv-reader-maker</span>, for particular CSV reader specs.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._csv-reading/main..rkt)._make-csv-reader-maker))"></a><span title="Provided from: csv-reading | Package: csv-reading"><span class="RktSym"><span class="RktSymDef RktSym">make-csv-reader-maker</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">reader-spec</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">input-port?</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reader-spec</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">csv-reader-spec?</span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a CSV reader constructor procedure from the <span class="RktVar">reader-spec</span>, with unspecified attributes having their default values.</div><div class="SIntrapara">For example, given the input file <span class="stt">"fruits.csv"</span> with the content:</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"fruits.csv"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">apples</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">2 |</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">0.42</span></p></td></tr><tr><td><p><span class="stt">bananas | 20 | 13.69</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></blockquote></blockquote></div><div class="SIntrapara">a reader for the file&rsquo;s apparent format can be constructed like:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">make-food-csv-reader</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-csv-reader-maker</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">separator-chars</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#\|</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">strip-leading-whitespace?</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#t</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">strip-trailing-whitespace?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#t</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The resulting <span class="RktSym">make-food-csv-reader</span> procedure accepts one argument, which is either an input port
from which to read, or a string from which to read.  Our example input file
then can be be read by opening an input port on a file and using our new
procedure to construct a reader on it:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">next-row</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-food-csv-reader</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">open-input-file</span><span class="hspace">&nbsp;</span><span class="RktVal">"fruits.csv"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This reader, <span class="RktSym">next-row</span>, can then be called repeatedly to yield a parsed representation
of each subsequent row.  The parsed format is a list of strings, one string for
each column.  The null list is yielded to indicate that all rows have already
been yielded.</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">next-row</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("apples"<span class="stt"> </span>"2"<span class="stt"> </span>"0.42")</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">next-row</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">("bananas"<span class="stt"> </span>"20"<span class="stt"> </span>"13.69")</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">next-row</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">()</span></td></tr></table></blockquote></div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;Making_Readers&quot;">4<tt>&nbsp;</tt><a name="(part._.Making_.Readers)"></a>Making Readers</h3><p><div class="SIntrapara">In addition to being constructed from the result of <span class="RktSym">make-csv-reader-maker</span>, CSV readers can also be constructed using <span class="RktSym">make-csv-reader</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._csv-reading/main..rkt)._make-csv-reader))"></a><span title="Provided from: csv-reading | Package: csv-reading"><span class="RktSym"><span class="RktSymDef RktSym">make-csv-reader</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>[<span class="RktVar">reader-spec</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">input-port?</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reader-spec</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">csv-reader-spec</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Construct a CSV reader on the input <span class="RktVar">in</span>, which is an input port or a string.  If <span class="RktVar">reader-spec</span> is given, and is not the null list, then a &ldquo;one-shot&rdquo; reader
constructor is constructed with that spec and used.  If <span class="RktVar">reader-spec</span> is not given, or is the null list, then the default CSV reader
constructor is used.  For example, the reader from the <span class="RktSym">make-csv-reader-maker</span> example could alternatively have been constructed like:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">next-row</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-csv-reader</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">open-input-file</span><span class="hspace">&nbsp;</span><span class="RktVal">"fruits.csv"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">separator-chars</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#\|</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">strip-leading-whitespace?</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#t</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">strip-trailing-whitespace?</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#t</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;High-Level_Conveniences&quot;">5<tt>&nbsp;</tt><a name="(part._.High-.Level_.Conveniences)"></a>High-Level Conveniences</h3><p><div class="SIntrapara">Several convenience procedures are provided for iterating over the
CSV rows and for converting the CSV to a list.</div><div class="SIntrapara">To the dismay of some Scheme purists, each of these procedures
accepts a <span class="RktSym">reader-or-in</span> argument, which can be a CSV reader, an input port, or a string.
If not a CSV reader, then the default reader constructor is used.  For example,
all three of the following are equivalent:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">csv-&gt;list</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-style: italic">string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">csv-&gt;list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-csv-reader</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-style: italic">string</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">csv-&gt;list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-csv-reader</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">open-input-string</span><span class="hspace">&nbsp;</span><span style="font-style: italic">string</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._csv-reading/main..rkt)._csv-for-each))"></a><span title="Provided from: csv-reading | Package: csv-reading"><span class="RktSym"><span class="RktSymDef RktSym">csv-for-each</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span><span class="RktVar">reader-or-in</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">any</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">any</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">reader-or-in</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">input-port?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similar to Racket&rsquo;s <span class="RktSym">for-each</span>, applies <span class="RktSym">proc</span>, a procedure of one argument, to each parsed CSV row in series. <span class="RktSym">reader-or-in</span> is the CSV reader, input port, or string.  The return value is
undefined.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._csv-reading/main..rkt)._csv-map))"></a><span title="Provided from: csv-reading | Package: csv-reading"><span class="RktSym"><span class="RktSymDef RktSym">csv-map</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span><span class="RktVar">reader-or-in</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">reader-or-in</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">input-port?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similar to Racket&rsquo;s <span class="RktSym">map</span>, applies <span class="RktVar">proc</span>, a procedure of one argument, to each parsed CSV row in series,
and yields a list of the values of each application of <span class="RktVar">proc</span>, in order. <span class="RktVar">reader-or-in</span> is the CSV reader, input port, or string.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._csv-reading/main..rkt)._csv-~3elist))"></a><span title="Provided from: csv-reading | Package: csv-reading"><span class="RktSym"><span class="RktSymDef RktSym">csv-&gt;list</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">reader-or-in</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">reader-or-in</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">input-port?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Yields a list of CSV row lists from input <span class="RktVar">reader-or-in</span>, which is a CSV reader, input port, or string.</div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;Converting_CSV_to_SXML&quot;">6<tt>&nbsp;</tt><a name="(part._.Converting_.C.S.V_to_.S.X.M.L)"></a>Converting CSV to SXML</h3><p><div class="SIntrapara">The <span class="RktSym">csv-&gt;sxml</span> procedure can be used to convert CSV to SXML format,
for processing with various XML tools.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._csv-reading/main..rkt)._csv-~3esxml))"></a><span title="Provided from: csv-reading | Package: csv-reading"><span class="RktSym"><span class="RktSymDef RktSym">csv-&gt;sxml</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">reader-or-in</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktVar">row-element</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">col-elements</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">sxml/xexp</span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">reader-or-in</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">input-port?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">row-element</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">row</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">col-elements</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Reads CSV from input <span class="RktVar">reader-or-in</span> (which is a CSV reader, input port, or string), and yields an
SXML/xexp representation.  If given, <span class="RktVar">row-element</span> is a symbol for the XML row element.  If <span class="RktVar">row-element</span> is not given, the default is the symbol <span class="RktSym">row</span>.  If given <span class="RktVar">col-elements</span> is a list of symbols for the XML column elements.  If not given,
or there are more columns in a row than given symbols, column element symbols
are of the format &ldquo;<span class="RktSym">col-</span><span class="RktMeta"></span><span style="font-style: italic">n</span>&rdquo; where <span style="font-style: italic">n</span> is the column number (the first column being number 0, not 1).</div><div class="SIntrapara">For example, given a CSV-format file <span class="stt">"friends.csv"</span> that has the contents:</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"friends.csv"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">Binoche,Ste. Brune,33-1-2-3</span></p></td></tr><tr><td><p><span class="stt">Posey,Main St.,555-5309</span></p></td></tr><tr><td><p><span class="stt">Ryder,Cellblock 9,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></blockquote></blockquote></div><div class="SIntrapara">with elements not given, the result is:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">csv-&gt;sxml</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">open-input-file</span><span class="hspace">&nbsp;</span><span class="RktVal">"friends.csv"</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">*TOP*</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">row</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-0</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Binoche"</span><span class="RktRes">)</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-1</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Ste. Brune"</span><span class="RktRes">)</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-2</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"33-1-2-3"</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">row</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-0</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Posey"</span><span class="RktRes">)</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-1</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Main St."</span><span class="RktRes">)</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-2</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"555-5309"</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">row</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-0</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Ryder"</span><span class="RktRes">)</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-1</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Cellblock 9"</span><span class="RktRes">)</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">col-2</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">""</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div><div class="SIntrapara">With elements given, the result is like:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">csv-&gt;sxml</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">open-input-file</span><span class="hspace">&nbsp;</span><span class="RktVal">"friends.csv"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">friend</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktVal">address</span><span class="hspace">&nbsp;</span><span class="RktVal">phone</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">*TOP*</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">friend</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">"Binoche"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">address</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Ste. Brune"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">phone</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">"33-1-2-3"</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">friend</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">"Posey"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">address</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Main St."</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">phone</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">"555-5309"</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">friend</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">"Ryder"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">address</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">"Cellblock 9"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">phone</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">""</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div></p><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;History&quot;">7<tt>&nbsp;</tt><a name="(part._.History)"></a>History</h3><ul><li><p><div class="SIntrapara">Version 3:4 &#8212;<wbr></wbr> 2016-12-09</div><div class="SIntrapara"><ul><li><p>Fixed bug of various <span class="RktSym">%csv-reading:reader-or-in-arg</span> calls passing string instead of symbol as first
argument, which resulted in an error when an error-raising call was
made. (Thanks to John B. Clements.)</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:3 &#8212;<wbr></wbr> 2016-03-02</div><div class="SIntrapara"><ul><li><p>Tweaked info.rkt, filenames.</p></li><li><p>Linked to sxml-intro package, and changed &ldquo;SXML/xexp&rdquo; references to &ldquo;SXML&rdquo;.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:2 &#8212;<wbr></wbr> 2016-02-27</div><div class="SIntrapara"><ul><li><p>Updated home page URL.</p></li><li><p>Separated deps and build-deps.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:1 &#8212;<wbr></wbr> 2016-02-25</div><div class="SIntrapara"><ul><li><p>Fixed deps.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 3:0 &#8212;<wbr></wbr> 2016-02-21</div><div class="SIntrapara"><ul><li><p>Moving PLaneT <span class="RktSym">csv</span><span class="RktMeta"></span> package to new package system as <span class="RktSym">csv-reading</span><span class="RktMeta"></span> package, due to naming conflict.</p></li><li><p>Moved test suite into main source file.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:0 &#8212;<wbr></wbr> 2012-06-13</div><div class="SIntrapara"><ul><li><p>Converted to McFly and Overeasy.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.11 &#8212;<wbr></wbr> Version 1:7 &#8212;<wbr></wbr> 2011-08-22</div><div class="SIntrapara"><ul><li><p>Changed URL.</p></li><li><p>Changed references to Scheme to Racket.
A little code cleanup, including using Racket <span class="RktSym">error</span> better.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.10 &#8212;<wbr></wbr> Version 1:6 &#8212;<wbr></wbr> 2010-04-13</div><div class="SIntrapara"><ul><li><p>Documentation fix.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.9 &#8212;<wbr></wbr> Version 1:5 &#8212;<wbr></wbr> 2009-03-14</div><div class="SIntrapara"><ul><li><p>Documentation fix.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.8 &#8212;<wbr></wbr> Version 1:4 &#8212;<wbr></wbr> 2009-02-23</div><div class="SIntrapara"><ul><li><p>Documentation changes.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.7 &#8212;<wbr></wbr> Version 1:3 &#8212;<wbr></wbr> 2009-02-22</div><div class="SIntrapara"><ul><li><p>License is now LGPL 3.</p></li><li><p>Moved to author&rsquo;s new Scheme administration system.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.6 &#8212;<wbr></wbr> Version 1:2 &#8212;<wbr></wbr> 2008-08-12</div><div class="SIntrapara"><ul><li><p>For PLT 4 compatibility, new versions of <span class="RktSym">csv-map</span> and <span class="RktSym">csv-&gt;list</span> that don&rsquo;t use <span class="RktSym">set-cdr!</span>.  (Thanks to Doug Orleans.)</p></li><li><p>PLT 4 <span class="RktSym">if</span> compatibility change.</p></li><li><p>Minor documentation fixes.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.5 &#8212;<wbr></wbr> 2005-12-09</div><div class="SIntrapara"><ul><li><p>Changed a non-R5RS use of <span class="RktSym">letrec</span> to <span class="RktSym">let*</span>.  (Thanks to David Pirotte and Guile.)</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.4 &#8212;<wbr></wbr>  2005-06-07</div><div class="SIntrapara"><ul><li><p>Converted to Testeez.</p></li><li><p>Minor documentation changes.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.3 &#8212;<wbr></wbr>  2004-07-21</div><div class="SIntrapara"><ul><li><p>Minor documentation changes.</p></li><li><p>Test suite now disabled by default.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.2 &#8212;<wbr></wbr>  2004-06-01</div><div class="SIntrapara"><ul><li><p>Work-around for <span class="RktSym">case</span>-related bug in Gauche 0.8 and 0.7.4.2 that was tickled by <span class="RktSym">csv-internal:make-portreader/positional</span>.  (Thanks to Grzegorz Chrupala for reporting.)</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 0.1 &#8212;<wbr></wbr>  2004-05-31</div><div class="SIntrapara"><ul><li><p>First release, for testing with real-world input.</p></li></ul></div></p></li></ul><h3 x-source-module="(lib &quot;csv-reading/csv-reading.scrbl&quot;)" x-source-pkg="csv-reading" x-part-tag="&quot;Legal&quot;">8<tt>&nbsp;</tt><a name="(part._.Legal)"></a>Legal</h3><p>Copyright 2004, 2005, 2008&ndash;2012, 2016 Neil Van Dyke.  This program is Free
Software; you can redistribute it and/or modify it under the terms of the GNU
Lesser General Public License as published by the Free Software Foundation;
either version 3 of the License, or (at your option) any later version.  This
program is distributed in the hope that it will be useful, but without any
warranty; without even the implied warranty of merchantability or fitness for a
particular purpose.  See http://www.gnu.org/licenses/ for details.  For other
licenses and consulting, please contact the author.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>