<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Enumerating Haiku</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Enumerating Haiku</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Enumerating Haiku</a></td></tr><tr><td><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">rule</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._starters%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">starters</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;haiku-enum/doc.scrbl&quot;)" x-source-pkg="haiku-enum" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Enumerating_.Haiku)"></a><a name="(mod-path._haiku-enum)"></a>Enumerating Haiku</h2><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">haiku-enum</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/haiku-enum" title="Install this package using `raco pkg install haiku-enum`"><span class="stt">haiku-enum</span></a></span></td></tr></table></div><div class="SIntrapara">Programs written in the
<a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">haiku-enum</span></a> language define an enumeration of
Haiku use the same concrete syntax as for Scribble
(described in
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=scribble&amp;rel=reader.html&amp;version=7.4" class="Sq" data-pltdoc="x">@ Syntax</a>),
except starting in normal racket mode instead of starting in
text mode.</div><div class="SIntrapara">The haiku generated by a program in
<a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">haiku-enum</span></a> follow the rules and the
vocabulary specified in the program. Rules are defined in
two parts: a use of <span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._starters%29%29" class="RktStxLink" data-pltdoc="x">starters</a></span> that indicates how the
haiku begin and then a series of uses of <span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span> that
determine how the haiku continue (and end).</div><div class="SIntrapara">The vocabulary is specified at the end of the file, using the
parts of speech introduced by the rules.</div><div class="SIntrapara"><p><div class="SIntrapara">For example, consider this simple program in <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">haiku-enum</span></a>
that has a set of rules that generate some especially boring Haiku:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">haiku-enum</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._starters%29%29" class="RktStxLink" data-pltdoc="x">starters</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">adjective</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">noun</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">noun</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">verb</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">verb</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:comma</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">adjective</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">adjective</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">noun</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">@</span><span class="RktSym">adjective</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">black</span><span class="hspace">&nbsp;</span><span class="RktMeta">fierce</span><span class="hspace">&nbsp;</span><span class="RktMeta">gray</span><span class="hspace">&nbsp;</span><span class="RktMeta">plump</span><span class="hspace">&nbsp;</span><span class="RktMeta">wet</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">@</span><span class="RktSym">adjective</span><span class="RktPn">[</span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">achy</span><span class="hspace">&nbsp;</span><span class="RktMeta">agile</span><span class="hspace">&nbsp;</span><span class="RktMeta">dormant</span><span class="hspace">&nbsp;</span><span class="RktMeta">mangy</span><span class="hspace">&nbsp;</span><span class="RktMeta">sober</span><span class="hspace">&nbsp;</span><span class="RktMeta">wrinkled</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">@</span><span class="RktSym">noun</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">ant</span><span class="hspace">&nbsp;</span><span class="RktMeta">owl</span><span class="hspace">&nbsp;</span><span class="RktMeta">stag</span><span class="hspace">&nbsp;</span><span class="RktMeta">wasp</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">@</span><span class="RktSym">noun</span><span class="RktPn">[</span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">duckling</span><span class="hspace">&nbsp;</span><span class="RktMeta">panda</span><span class="hspace">&nbsp;</span><span class="RktMeta">songbird</span><span class="hspace">&nbsp;</span><span class="RktMeta">swordfish</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">@</span><span class="RktSym">verb</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">aches</span><span class="hspace">&nbsp;</span><span class="RktMeta">barks</span><span class="hspace">&nbsp;</span><span class="RktMeta">claws</span><span class="hspace">&nbsp;</span><span class="RktMeta">climbs</span><span class="hspace">&nbsp;</span><span class="RktMeta">roves</span><span class="hspace">&nbsp;</span><span class="RktMeta">snarls</span><span class="hspace">&nbsp;</span><span class="RktMeta">weeps</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">@</span><span class="RktSym">verb</span><span class="RktPn">[</span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">awaits</span><span class="hspace">&nbsp;</span><span class="RktMeta">beckons</span><span class="hspace">&nbsp;</span><span class="RktMeta">gallops</span><span class="hspace">&nbsp;</span><span class="RktMeta">gambols</span><span class="hspace">&nbsp;</span><span class="RktMeta">slobbers</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr></table></div></p></div><div class="SIntrapara">The <span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._starters%29%29" class="RktStxLink" data-pltdoc="x">starters</a></span> part of the program declares that the
Haiku must all begin with an adjective and then transition
to the noun state (multiple possible starting parts of
speech are allowed; just parenthesize each possibility).</div><div class="SIntrapara">The rules describe the valid states. When in the <span class="stt">noun</span>
state, the language will generate a noun and then transition
to the <span class="stt">verb</span> state, as declared just below the
<span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._starters%29%29" class="RktStxLink" data-pltdoc="x">starters</a></span> section in the first <span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span>.
Similarly, a <span class="stt">verb</span> must be followed by a comma and then
an adjective, and the cycle continues.</div><div class="SIntrapara">After all of the rules, the vocabulary is declared. Each
vocabulary declaration consists of the number of syllables,
followed by words that are in that category of the part of
speech and have that many syllables. Use one declaration for
each different number of syllables that words in the part of
speech may have.</div><div class="SIntrapara"><p><div class="SIntrapara">This file then provides:
</div><div class="SIntrapara"><ul><li><p><span class="stt">random-haiku</span>: a function that accepts no
arguments and returns a random haiku (as a string),</p></li><li><p><span class="stt">how-many-haiku</span>:, a natural number that indicates
how many different haiku this program generates,</p></li><li><p><span class="stt">nth-haiku</span>: a function that accepts a natural
number less than <span class="stt">how-many-haiku</span> and returns the
corresponding haiku, and</p></li><li><p><span class="stt">enum/e</span>: a
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=data&amp;rel=Enumerations.html%23%2528tech._one._way._enumeration%2529&amp;version=7.4" class="techoutside Sq" data-pltdoc="x"><span class="techinside">one-way
enumeration</span></a> of the same haiku that <span class="stt">nth-haiku</span> returns</p></li><li><p><span class="stt">structured-haiku/e</span>: a
<a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=data&amp;rel=Enumerations.html%23%2528tech._two._way._enumeration%2529&amp;version=7.4" class="techoutside Sq" data-pltdoc="x"><span class="techinside">two-way
enumeration</span></a> that maps the naturals to an sexpression
representing the choices made to construct a particular
haiku</p></li></ul></div></p></div><div class="SIntrapara"><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nth-haiku</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">fierce wasp snarls, fierce wasp</span></p></td></tr><tr><td><p><span class="RktOut">snarls, fierce wasp snarls, fierce wasp snarls,</span></p></td></tr><tr><td><p><span class="RktOut">fierce wasp snarls, fierce wasp</span></p></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nth-haiku</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._-%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">how-many-haiku</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">achy panda aches,</span></p></td></tr><tr><td><p><span class="RktOut">achy panda slobbers, wet</span></p></td></tr><tr><td><p><span class="RktOut">panda slobbers, wet</span></p></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nth-haiku</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._quotient%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">quotient</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._-%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">how-many-haiku</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">plump panda barks, gray</span></p></td></tr><tr><td><p><span class="RktOut">stag climbs, wet stag claws, black wasp</span></p></td></tr><tr><td><p><span class="RktOut">weeps, plump stag roves, plump</span></p></td></tr></table></td></tr></table></blockquote></div></p></div><div class="SIntrapara"><p><div class="SIntrapara">The library also contains the file <span class="stt">"haiku.rkt"</span>, a more
elaborate example that contains haiku such as these:
 </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nth-haiku</span><span class="hspace">&nbsp;</span><span class="RktVal">145095608713658901635917363016718021515</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">drab geese smear, Bela</span></p></td></tr><tr><td><p><span class="RktOut">blares, cool plain hag grunts, shy hawks</span></p></td></tr><tr><td><p><span class="RktOut">drink, great green pines rage</span></p></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._display%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">display</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nth-haiku</span><span class="hspace">&nbsp;</span><span class="RktVal">5842574289046493184639147839447824095</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">drab palms weep, lush broad</span></p></td></tr><tr><td><p><span class="RktOut">hog bolts, moths hobble, spear freezes,</span></p></td></tr><tr><td><p><span class="RktOut">chaste pain blazes, alert</span></p></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="stt">"haiku.rkt"</span> program is a reimplementation of the program
 that generates random haiku from <a href="http://www.everypoet.com/haiku/"><span class="url">http://www.everypoet.com/haiku/</span></a>.</div></p></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._haiku-enum/main..rkt)._rule))"></a><span title="Provided from: haiku-enum | Package: haiku-enum"><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">rule</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">haiku-state-id</span><span class="hspace">&nbsp;</span><span class="RktVar">word-class-id</span><span class="hspace">&nbsp;</span><span class="RktVar">-&gt;</span><span class="hspace">&nbsp;</span><span class="RktVar">next-state</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">rule</a></span><span class="hspace">&nbsp;</span><span class="RktVar">haiku-state-id</span><span class="hspace">&nbsp;</span><span class="RktVar">-&gt;</span><span class="hspace">&nbsp;</span><span class="RktVar">next-state</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">next-state</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">maybe-lastness</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-comma</span><span class="hspace">&nbsp;</span><span class="RktVar">haiku-state-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-lastness</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:only-last</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:not-last</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-comma</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:comma</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a state for haiku named <span class="RktVar">haiku-state-id</span> that, when entered,
generates a word from <span class="RktVar">word-class-id</span> and then
transitions to one of the states listed in <span class="RktVar">next-state</span>. If
<span class="RktVar">word-class-id</span> does not appear, then <span class="RktVar">haiku-state-id</span>
is taken as both the name of the state and the name of the class of
words to generate.</div></p><p>If <span class="RktPn">#:only-last</span> appears, then this state is entered
only when it would be the last word in the haiku. If
<span class="RktPn">#:not-last</span> appears, then this state is entered
only when it would not be the last word in the haiku.</p><p>If <span class="RktPn">#:comma</span> appears, then a comma is generated in the haiku before
continuing into the next state.</p><p>In addition to defining a new rule, a use of <span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span>
defines <span class="RktVar">word-class-id</span> (if the first case is used)
or <span class="RktVar">haiku-state-id</span> (if the second case is used). It
is defined to accept a natural number and a sequence of
strings that are assumed to be words that all have the given
number of syllables. The name can be used multiple times
with different numbers of syllables.</p><p><div class="SIntrapara">For example, the rule
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._rule%29%29" class="RktStxLink" data-pltdoc="x">rule</a></span><span class="hspace">&nbsp;</span><span class="RktSym">adjective</span><span class="hspace">&nbsp;</span><span class="RktVar">-&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">noun</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"> generates a rule that
transitions from the adjective state to the noun state and
admits the possibility of defining adjectives by using
<span class="RktSym">adjective</span>, e.g.,
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">adjective</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">"tall"</span><span class="hspace">&nbsp;</span><span class="RktVal">"fast"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">adjective</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">"three-point"</span><span class="hspace">&nbsp;</span><span class="RktVal">"driven"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">adjective</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">"athletic"</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Use underscores in the word if it should be rendered with
a space but count as a single item in a haiku (i.e., it should
either appear entirely or not at all), e.g.:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">noun</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">"Michael_Jordan"</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">which appears as <span class="RktVal">"Michael Jordan"</span> but never
<span class="RktVal">"Michael"</span> or <span class="RktVal">"Jordan"</span> on their own.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._haiku-enum/main..rkt)._starters))"></a><span title="Provided from: haiku-enum | Package: haiku-enum"><span class="RktSym"><a href="#%28form._%28%28lib._haiku-enum%2Fmain..rkt%29._starters%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">starters</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">word-class-id</span><span class="hspace">&nbsp;</span><span class="RktVar">haiku-state-id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Starts a haiku.</div></p><p>Each clause indicates one way that a haiku can start, namely
by generating a word from <span class="RktVar">word-class-id</span> and then
moving into the state <span class="RktVar">haiku-state-id</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>