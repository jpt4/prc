<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>rackonsole: Lightweight Operator Console for Server Processes</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">rackonsole:<span class="mywbr"> &nbsp;</span> Lightweight Operator Console for Server Processes</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.User_.Interface%29" class="tocviewlink" data-pltdoc="x">User Interface</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Programming_.Interface%29" class="tocviewlink" data-pltdoc="x">Programming Interface</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Known_.Issues%29" class="tocviewlink" data-pltdoc="x">Known Issues</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.History%29" class="tocviewlink" data-pltdoc="x">History</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Legal%29" class="tocviewlink" data-pltdoc="x">Legal</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">rackonsole:<span class="mywbr"> &nbsp;</span> Lightweight Operator Console for Server Processes</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Features%29" class="tocsubseclink" data-pltdoc="x">Features</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Easy_to_.Add%29" class="tocsubseclink" data-pltdoc="x">Easy to Add</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.See_a_.Demo%29" class="tocsubseclink" data-pltdoc="x">See a Demo</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.User_.Interface%29" class="tocsubseclink" data-pltdoc="x">User Interface</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.When_.Changing_or_.Resizing_.Terminals%29" class="tocsubseclink" data-pltdoc="x">When Changing or Resizing Terminals</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Setting_.What_to_.Capture_and_.View%29" class="tocsubseclink" data-pltdoc="x">Setting What to Capture and View</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Debugging%29" class="tocsubseclink" data-pltdoc="x">Debugging</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._.Quitting%29" class="tocsubseclink" data-pltdoc="x">Quitting</a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#%28part._.Handling_.Log_.Flood%29" class="tocsubseclink" data-pltdoc="x">Handling Log Flood</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Programming_.Interface%29" class="tocsubseclink" data-pltdoc="x">Programming Interface</a></td></tr><tr><td><a href="#%28def._%28%28lib._rackonsole%2Fmain..rkt%29._program-rackonsole-title%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">program-<wbr></wbr>rackonsole-<wbr></wbr>title</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rackonsole%2Fmain..rkt%29._hostname-rackonsole-title%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">hostname-<wbr></wbr>rackonsole-<wbr></wbr>title</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rackonsole%2Fmain..rkt%29._program-on-hostname-rackonsole-title%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">program-<wbr></wbr>on-<wbr></wbr>hostname-<wbr></wbr>rackonsole-<wbr></wbr>title</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rackonsole%2Fmain..rkt%29._rackonsole%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">rackonsole</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Known_.Issues%29" class="tocsubseclink" data-pltdoc="x">Known Issues</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.History%29" class="tocsubseclink" data-pltdoc="x">History</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Legal%29" class="tocsubseclink" data-pltdoc="x">Legal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">2:3</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._rackonsole__.Lightweight_.Operator_.Console_for_.Server_.Processes)"></a><a name="(mod-path._rackonsole)"></a>rackonsole: Lightweight Operator Console for Server Processes</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Neil Van Dyke</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara">License: <a href="#%28part._.Legal%29" class="plainlink" data-pltdoc="x">LGPLv3</a> <span class="hspace">&nbsp;</span> Web: <a href="http://www.neilvandyke.org/racket/rackonsole/" class="plainlink">http://www.neilvandyke.org/racket/rackonsole/</a>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">rackonsole</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/rackonsole" title="Install this package using `raco pkg install rackonsole`"><span class="stt">rackonsole</span></a></span></td></tr></table></div></p><h3 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a><a name="(idx._(gentag._0._(lib._rackonsole/rackonsole..scrbl)))"></a><a name="(idx._(gentag._1._(lib._rackonsole/rackonsole..scrbl)))"></a><a name="(idx._(gentag._2._(lib._rackonsole/rackonsole..scrbl)))"></a><a name="(idx._(gentag._3._(lib._rackonsole/rackonsole..scrbl)))"></a><a name="(idx._(gentag._4._(lib._rackonsole/rackonsole..scrbl)))"></a><a name="(idx._(gentag._5._(lib._rackonsole/rackonsole..scrbl)))"></a>Introduction</h3><p><div class="SIntrapara">The <span class="RktSym">rackonsole</span><span class="RktMeta"></span> package provides an easy way to add a user interface for system
operators to server processes implemented in Racket.  This interface may be run
within a detachable <a href="https://en.wikipedia.org/wiki/Tmux"><span class="RktSym">tmux</span><span class="RktMeta"></span></a> or <a href="https://en.wikipedia.org/wiki/GNU_Screen">GNU Screen</a> session, such as when accessing a <a name="(idx._(gentag._6._(lib._rackonsole/rackonsole..scrbl)))"></a>cloud server via SSH.</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>ProTip: In 2012, spelling &ldquo;server&rdquo; as &ldquo;cloud server&rdquo;
gets you more money.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Rackonsole is intended to run for GNU/Linux, and similar Unix-like
systems.  It works with terminals supported by the <a href="http://www.neilvandyke.org/racket-charterm/"><span class="RktSym">charterm</span><span class="RktMeta"></span></a> package.  A Rackonsole user interface can be accessed from Apple
Macintosh and Microsoft Windows systems as well, if they are running compatible
terminals (such as in SSH programs, terminal emulators, or some &ldquo;terminal&rdquo; or
&ldquo;command&rdquo; windows.</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Features&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Features)"></a>Features</h4><p><div class="SIntrapara"><span class="RktSym">rackonsole</span><span class="RktMeta"></span> currently provides the following features to the operator:</div><div class="SIntrapara"><ul><li><p>View logging information from the application, including ability
to change both what levels of log messages are captured and which are displayed
on the screen.  So, for example, <span class="RktSym">rackonsole</span><span class="RktMeta"></span> might be capturing all log levels at the moment, but the operator
can temporarily narrow the display to only errors.  The operator can also
increase and lower the level of messages captured dynamically, to adjust the
balance between information and performance.</p></li><li><p>Quit the application in a manner specified by the developer,
rather than merely Ctrl-C-ing or sending other signals that might not cause an
orderly shutdown.  The application can specify a shutdown procedure in the
code, in the call to <span class="RktSym">rackonsole</span>.</p></li><li><p>Generate debugging information to provide to a developer who does
not have access to the server.  In the current version, this is via <a href="http://www.neilvandyke.org/racket-gdbdump/"><span class="RktSym">gdbdump</span><span class="RktMeta"></span></a>.</p></li><li><p>A sense that the application is running.  Also, by default, the
title includes the application name and server name, for ease when dealing with
multiple applications and servers.</p></li></ul></div><div class="SIntrapara"><span class="RktSym">rackonsole</span><span class="RktMeta"></span> may be used in conjunction with the <span class="RktSym">PLTSYSLOG</span><span class="RktMeta"></span> environment variable, with <span class="RktSym">racksonsole</span><span class="RktMeta"></span> providing an easy display of current activity of a process, and Syslog providing centralized and long-term logging.</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Easy_to_Add&quot;">1.2<tt>&nbsp;</tt><a name="(part._.Easy_to_.Add)"></a>Easy to Add</h4><p><div class="SIntrapara">Adding <span class="RktSym">rackonsole</span><span class="RktMeta"></span> to an existing application can be done in a couple lines of code,
depending on how you count lines of code.  Basically, you add a <span class="RktSym">require</span> for the <span class="RktSym">rackonsole</span><span class="RktMeta"></span> PLaneT package, and you apply the <span class="RktSym">rackonsole</span> procedure in a thread near the start of your program.  For
example, if your application looks like this:</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"myserver.rkt"</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"myinternals.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">for</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">request</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-start-server</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-handlers</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">exn:fail?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">log-error</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Request failed: "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exn-message</span><span class="hspace">&nbsp;</span><span class="RktSym">exn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-handle-request</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote></div><div class="SIntrapara">Then, if you just want the default options for <span class="RktSym">rackonsole</span><span class="RktMeta"></span>, you can simply add a <span class="RktSym">require</span> and a call to start <span class="RktSym">racksonsole</span> in a thread.</div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Talk about rapid agile development!</p></blockquote></blockquote></blockquote></div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"myserver.rkt"</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"myinternals.rkt"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="highlighted"><span class="RktSym">rackonsole</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">thread</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktSym">rackonsole</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">for</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">request</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-start-server</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-handlers</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">exn:fail?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">log-error</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Request failed: "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exn-message</span><span class="hspace">&nbsp;</span><span class="RktSym">exn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-handle-request</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote></div><div class="SIntrapara">If you want to set some options, such as a quit procedure, changing
the default capture level to include warning messages, and the identifying
title to be displayed on the <span class="RktSym">rackonsole</span><span class="RktMeta"></span> screen, it&rsquo;s only slightly more complicated:</div><div class="SIntrapara"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"myserver.rkt"</span></span></p><blockquote class="Rfilecontent"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=7.4" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"myinternals.rkt"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="highlighted"><span class="RktSym">rackonsole</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">thread</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">lambda</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">rackonsole</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">#:title</span></span><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktVal">"MyApp 2000"</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">#:capture-level</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">'</span></span><span class="highlighted"><span class="RktVal">warning</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">#:quit-proc</span></span><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">lambda</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">display</span></span><span class="highlighted"><span class="hspace">&nbsp;</span></span><span class="highlighted"><span class="RktVal">"Farewell!\n"</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="highlighted"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="highlighted"><span class="RktPn">(</span></span><span class="highlighted"><span class="RktSym">exit</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span><span class="highlighted"><span class="RktPn">)</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">for</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">request</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-start-server</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-handlers</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">exn:fail?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">log-error</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"Request failed: "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exn-message</span><span class="hspace">&nbsp;</span><span class="RktSym">exn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-handle-request</span><span class="hspace">&nbsp;</span><span class="RktSym">request</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote></div><div class="SIntrapara">That&rsquo;s pretty much all you have to do (or can do, for that
matter).</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;See_a_Demo&quot;">1.3<tt>&nbsp;</tt><a name="(part._.See_a_.Demo)"></a>See a Demo</h4><p><div class="SIntrapara">After installing the <span class="RktSym">rackonsole</span><span class="RktMeta"></span> package, you can run a demonstration of it with the command:</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">racket -W none -em "(require rackonsole/demo)"</span></div><div class="SIntrapara">Following sections of this documentation describe how to operate <span class="RktSym">rackonsole</span><span class="RktMeta"></span>, and provide details of the programming interface.</div></p><h3 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;User_Interface&quot;">2<tt>&nbsp;</tt><a name="(part._.User_.Interface)"></a>User Interface</h3><p><div class="SIntrapara">The Rackonsole user interface has a few parts:</div><div class="SIntrapara"><ul><li><p><a name="(tech._title)"></a><span style="font-style: italic">Title</span> &#8212;<wbr></wbr> The Title is usually the upper-left corner, in reverse-video,
and usually identifies the application and/or server.</p></li><li><p><a name="(tech._statu)"></a><span style="font-style: italic">Status</span> &#8212;<wbr></wbr> The Status is usually the upper-right corner, and displays
the current state of the <a href="#%28tech._capture._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">capture level</span></a> and <a href="#%28tech._view._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">view level</span></a>.  (If the terminal is not wide enough to put both the Title and
Status on the same row, such as if the Title is long, then both are centered on
their own rows.)</p></li><li><p><a name="(tech._menu)"></a><span style="font-style: italic">Menu</span> &#8212;<wbr></wbr> The Menu is centered below the Title and Status, and usually
underlined.  It identifies which menu it is, and shows a list of keys that can
be pressed, with each key surrounded by square brackets.  Menus that are not
the <span class="ssansserif">Main</span> menu can generally be escaped out of by pressing the <span style="font-weight: bold">-</span> (minus), <span style="font-weight: bold">Backspace</span>, <span style="font-weight: bold">Esc</span> key.  (Additionally, the <span class="ssansserif">Quit</span> menu is escaped by any key that is not the <span style="font-weight: bold">Y</span> key, to decrease the likelihood of quitting the application accidentally.)</p></li><li><p><a name="(tech._log._view)"></a><span style="font-style: italic">Log View</span> &#8212;<wbr></wbr> The Log View takes the rest of the screen.  The most recent
captured log entries corresponding to the <a href="#%28tech._view._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">view level</span></a> are displayed here, with the most recent entries at the top.  As
new entries are captured and viewed, older entries scroll off the bottom of the
screen (but might be viewed again later by restricting the view level).
Entries with <span class="RktVal">'</span><span class="RktVal">error</span> level and higher are in boldface on terminals supporting that.
Each entry is truncated to the width of the terminal.</p></li></ul></div><div class="SIntrapara">The following subsections describe operation in terms of tasks.</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;When_Changing_or_Resizing_Terminals&quot;">2.1<tt>&nbsp;</tt><a name="(part._.When_.Changing_or_.Resizing_.Terminals)"></a>When Changing or Resizing Terminals</h4><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Did we mention we do cloud $erver$.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">When the terminal is changed, such as when reattaching a Screen or <span class="RktSym">tmux</span><span class="RktMeta"></span> session, or when resizing an XTerm, you can select <span class="ssansserif">[R]edraw</span> from the <span class="ssansserif">Main</span> menu to detect the current terminal size and redraw.</div><div class="SIntrapara">(Note that Rackonsole technically could detect terminal changes
without needing to press the <span style="font-weight: bold">R</span> key, but that would increase the additional load on the system, potentially slowing responsiveness of the main server process.)</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Setting_What_to_Capture_and_View&quot;">2.2<tt>&nbsp;</tt><a name="(part._.Setting_.What_to_.Capture_and_.View)"></a>Setting What to Capture and View</h4><p><div class="SIntrapara">The <a name="(tech._capture._level)"></a><span style="font-style: italic">capture level</span> specifies the log level of messages to capture.  The <a name="(tech._view._level)"></a><span style="font-style: italic">view level</span> specifies the level of messages to view currently.  They are changed from the <span class="ssansserif">[C]apture</span> and <span class="ssansserif">[V]iew</span> items of the <span class="ssansserif">Main</span> menu, to go to the <span class="ssansserif">Capture</span> or <span class="ssansserif">View</span> menu.</div><div class="SIntrapara">On the <span class="ssansserif">Capture</span> and <span class="ssansserif">View</span> menus, the options are abbreviated: <span class="ssansserif">[N]</span> for <span style="font-style: italic">none</span>, and <span class="ssansserif">[F]</span> through <span class="ssansserif">[D]</span> for <span class="RktVal">'</span><span class="RktVal">fatal</span> through <span class="RktVal">'</span><span class="RktVal">debug</span>.</div><div class="SIntrapara">Note that adjusting the <a href="#%28tech._view._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">view level</span></a> to a lower level can cause messages previously captured but not
viewed to be displayed.</div><div class="SIntrapara">Note that, the lower the <a href="#%28tech._capture._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">capture level</span></a>, the more resources the application might use.  For example, your application might leave <span class="RktSym">log-debug</span> forms not commented-out, and if any log receiver, such as Rackonsole, registers interest in <span class="RktVal">'</span><span class="RktVal">debug</span> messages, then the application does additional work to generate
and send those messages.</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Debugging&quot;">2.3<tt>&nbsp;</tt><a name="(part._.Debugging)"></a>Debugging</h4><p><div class="SIntrapara">Currently, Rackonsole has only one debugging option: to run the <a href="http://www.neilvandyke.org/racket-gdbdump/"><span class="RktSym">gdbdump</span><span class="RktMeta"></span></a> tool to get native stack traces of native threads.  This might be
useful if you suspect a system-level problem, such as in system calls.</div><div class="SIntrapara">You can perform this by starting at the <span class="ssansserif">Main</span> menu, and selecting <span class="ssansserif">[D]ebug</span> and then <span class="ssansserif">[G]dbdump</span>.  Then (assuming the application has not overridden <span class="RktSym">gdbdump</span><span class="RktMeta"></span>) wait 10 seconds, and get the file, which likely will be in <span class="stt">"/var/tmp/gdbdump"</span>.  Rackonsole itself will freeze for the 10 seconds, to try to
increase the likelihood that the native dump will capture information about the
more interesting main application rather than Rackonsole.  The main application
should pause only briefly, if noticeably at all.</div></p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Quitting&quot;">2.4<tt>&nbsp;</tt><a name="(part._.Quitting)"></a>Quitting</h4><p>To quit the application, select <span class="ssansserif">[Q]uit</span> from the <span class="ssansserif">Main</span> menu, then select <span class="ssansserif">[Y]es</span>.  Rackonsole will clear the screen and restore the terminal to a
normal state, and then execute any special quit procedure that the application
specified.</p><h4 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Handling_Log_Flood&quot;">2.5<tt>&nbsp;</tt><a name="(part._.Handling_.Log_.Flood)"></a>Handling Log Flood</h4><p>If the log is being flooded, such as if the application is having a
bad day, you can temporarily set the <a href="#%28tech._capture._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">capture level</span></a> to <span class="ssansserif">[N]</span> (none), to potentially decrease the logging load on the
application.  Then you might wish to adjust the <a href="#%28tech._view._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">view level</span></a> to see the pertinent messages, and then resolve the problem with
the application.</p><h3 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Programming_Interface&quot;">3<tt>&nbsp;</tt><a name="(part._.Programming_.Interface)"></a>Programming Interface</h3><p><div class="SIntrapara">The main interface is the <span class="RktSym">rackonsole</span> procedure.</div><div class="SIntrapara">One important thing to note: by default, Racket will write all messages level <span class="RktVal">'</span><span class="RktVal">error</span> and higher from the default logger to <span class="RktSym">stderr</span><span class="RktMeta"></span>, which will usually go to the same TTY that Rackonsole is using,
corrupting the display a bit.  So, you will want to either disable this logging
to <span class="RktSym">stderr</span><span class="RktMeta"></span> (with the <span class="RktSym"><span class="nobreak">-W</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">none</span><span class="RktMeta"></span> command line option to <span class="RktSym">racket</span><span class="RktMeta"></span>, or by setting the <span class="RktSym">PLTSTDERR</span><span class="RktMeta"></span> environment variable of the <span class="RktSym">racket</span><span class="RktMeta"></span> process to <span class="RktSym">none</span><span class="RktMeta"></span>), or create a new <span class="RktSym">current-logger</span> (to which your application writes, and which is monitored by
Rackonsole).</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rackonsole/main..rkt)._program-rackonsole-title))"></a><span title="Provided from: rackonsole | Package: rackonsole"><span class="RktSym"><span class="RktSymDef RktSym">program-rackonsole-title</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><a name="(def._((lib._rackonsole/main..rkt)._hostname-rackonsole-title))"></a><span title="Provided from: rackonsole | Package: rackonsole"><span class="RktSym"><span class="RktSymDef RktSym">hostname-rackonsole-title</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr><tr><td><span class="RktPn">(</span><a name="(def._((lib._rackonsole/main..rkt)._program-on-hostname-rackonsole-title))"></a><span title="Provided from: rackonsole | Package: rackonsole"><span class="RktSym"><span class="RktSymDef RktSym">program-on-hostname-rackonsole-title</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr></table></blockquote></div><div class="SIntrapara">These procedures can be used for the <span class="RktPn">#:title</span> argument of <span class="RktSym">rackonsole</span>.  You can also use them as part of your own procedure, such
as:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"MyApp on "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hostname-rackonsole-title</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Note that the program name as detected by these procedures will
often be <span class="RktVal">"racket"</span> unless the <span class="nobreak"><span class="stt">-N</span></span> command line argument to <span class="RktSym">racket</span><span class="RktMeta"></span> is used.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rackonsole/main..rkt)._rackonsole))"></a><span title="Provided from: rackonsole | Package: rackonsole"><span class="RktSym"><span class="RktSymDef RktSym">rackonsole</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:tty</span><span class="hspace">&nbsp;</span><span class="RktVar">tty</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:title</span><span class="hspace">&nbsp;</span><span class="RktVar">title</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:logger</span><span class="hspace">&nbsp;</span><span class="RktVar">logger</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:log-size</span><span class="hspace">&nbsp;</span><span class="RktVar">log-size</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:capture-level</span><span class="hspace">&nbsp;</span><span class="RktVar">capture-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:view-level</span><span class="hspace">&nbsp;</span><span class="RktVar">view-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:quit-proc</span><span class="hspace">&nbsp;</span><span class="RktVar">quit-proc</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tty</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">title</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">logger</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">logger?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-logger</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">log-size</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">exact-positive-integer?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">1000</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">capture-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fatal</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">warning</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">info</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">debug</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">'</span><span class="RktVal">error</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">view-level</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fatal</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">warning</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">info</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">debug</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">'</span><span class="RktVal">debug</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">quit-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym">any</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">This is the main procedure of Rackonsole.  You usually want to
start it in its own thread.  All arguments are optional.</div><div class="SIntrapara"><span class="RktPn">#:tty</span> is the TTY to use, and defaults to <span class="stt">"/dev/tty"</span>.  You probably don&rsquo;t need to change this.</div><div class="SIntrapara"><span class="RktPn">#:title</span> is the title to display on the screen.  By default, this is &ldquo;<span style="font-style: italic">program</span> on <span style="font-style: italic">server</span>.&rdquo; For example: &ldquo;myprogram on myserver</div><div class="SIntrapara"><span class="RktPn">#:logger</span> is the logger to use.  Defaults to <span class="RktPn">(</span><span class="RktSym">current-logger</span><span class="RktPn">)</span>.</div><div class="SIntrapara"><span class="RktPn">#:log-size</span> is the number of lines of captured log messages to store in a ring buffer.  Default is 1000.</div><div class="SIntrapara"><span class="RktPn">#:capture-level</span> is the <a href="#%28tech._capture._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">capture level</span></a>, which is either the usual Racket symbol or <span class="RktVal">#f</span> for none.  Default is <span class="RktVal">'</span><span class="RktVal">error</span>.</div><div class="SIntrapara"><span class="RktPn">#:view-level</span> is the <a href="#%28tech._view._level%29" class="techoutside" data-pltdoc="x"><span class="techinside">view level</span></a>.  Default is <span class="RktVal">'</span><span class="RktVal">error</span>.</div><div class="SIntrapara"><span class="RktPn">#:quit-proc</span> is a thunk to apply after the operator quits the application via the user interface, or <span class="RktVal">#f</span> for none.  If non-<span class="RktVal">#f</span>, this is applied after Rackonsole has cleared the screen and
restored the terminal.</div><div class="SIntrapara">The <span class="RktSym">rackonsole</span> procedure normally returns only when the application is quit from the user interface.</div></p><h3 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Known_Issues&quot;">4<tt>&nbsp;</tt><a name="(part._.Known_.Issues)"></a>Known Issues</h3><ul><li><p>Add a UI menu item to force a GC.</p></li><li><p>Does not yet provide a way to scroll arbitrarily through older
messages in the ring buffer, short of making the terminal screen taller or limiting the view level.</p></li><li><p>Currently truncates each message at the width of the terminal
screen, without providing a way to see all of longer messages, short of making
the terminal screen wider or going to the Syslog.</p></li><li><p>We should add in better handling of unprintable characters in log messages.</p></li><li><p>Maybe detect duplicate adjacent events and log them in a &ldquo;last
message repeated N times&rdquo; manner.</p></li><li><p>If you get a flood of logging events, having any kind of log
receiver in place can increase the load on the system, mainly by the events
being buffered by Racket indefinitely and increasing memory usage.  We might
add a feature by which Rackonsole detects a flood and backs off for a while,
such as by discarding events, or even detaching itself as a receiver.  Note,
however, that the way Rackonsole handles I/O keeps its menus responsive even in
event of flood.</p></li><li><p>We could make the Rackonsole menus adapt to very small displays,
such as on smartphone SSH clients, by automatically abbreviating.</p></li><li><p>Rackonsole could use a cooler name, but not so cool as to be pretentious.</p></li></ul><h3 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;History&quot;">5<tt>&nbsp;</tt><a name="(part._.History)"></a>History</h3><ul><li><p><div class="SIntrapara">Version 2:3 &#8212;<wbr></wbr> 2016-03-01</div><div class="SIntrapara"><ul><li><p>Fixed tests failing due to timeout on <span class="stt">"demo.rkt"</span>.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:2 &#8212;<wbr></wbr> 2016-02-29</div><div class="SIntrapara"><ul><li><p>Fixed failing tests due to error message string changes.</p></li><li><p>Consolidated files.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:1 &#8212;<wbr></wbr> 2016-02-27</div><div class="SIntrapara"><ul><li><p>Fixed demo documentation to not be PLaneT-specific.</p></li><li><p>Documentation tweaks.</p></li><li><p>Separated deps and build-deps.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:0 &#8212;<wbr></wbr> 2016-02-26</div><div class="SIntrapara"><ul><li><p>Moving from PLaneT to new package system.</p></li><li><p>Documentation fixes.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 1:0 &#8212;<wbr></wbr> 2012-06-28</div><div class="SIntrapara"><ul><li><p>Initial release. Not yet tested in a production
environment.</p></li></ul></div></p></li></ul><h3 x-source-module="(lib &quot;rackonsole/rackonsole.scrbl&quot;)" x-source-pkg="rackonsole" x-part-tag="&quot;Legal&quot;">6<tt>&nbsp;</tt><a name="(part._.Legal)"></a>Legal</h3><p>Copyright 2012, 2016 Neil Van Dyke.  This program is Free Software; you can
redistribute it and/or modify it under the terms of the GNU Lesser General
Public License as published by the Free Software Foundation; either version 3
of the License, or (at your option) any later version.  This program is
distributed in the hope that it will be useful, but without any warranty;
without even the implied warranty of merchantability or fitness for a
particular purpose.  See http://www.gnu.org/licenses/ for details.  For other
licenses and consulting, please contact the author.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>