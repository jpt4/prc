<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Build static websites using any language</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Build static websites using any language</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.How_to_prepare_a_polyglot_project%29" class="tocviewlink" data-pltdoc="x">How to prepare a <span class="RktSym">polyglot</span> project</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Writing_.Racket_in_.Markdown%29" class="tocviewlink" data-pltdoc="x">Writing Racket in Markdown</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Dependency_discovery_and_processing%29" class="tocviewlink" data-pltdoc="x">Dependency discovery and processing</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Accessing_shared_content%29" class="tocviewlink" data-pltdoc="x">Accessing shared content</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Responding_to_change%29" class="tocviewlink" data-pltdoc="x">Responding to change</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._extending%29" class="tocviewlink" data-pltdoc="x">Extending <span class="RktSym">polyglot</span></a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Publishing_to_.S3%29" class="tocviewlink" data-pltdoc="x">Publishing to S3</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._.License_and_contributions%29" class="tocviewlink" data-pltdoc="x">License and contributions</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Build static websites using any language</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.How_to_prepare_a_polyglot_project%29" class="tocsubseclink" data-pltdoc="x">How to prepare a <span class="RktSym">polyglot</span> project</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Writing_.Racket_in_.Markdown%29" class="tocsubseclink" data-pltdoc="x">Writing Racket in Markdown</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Design_implications%29" class="tocsubseclink" data-pltdoc="x">Design implications</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Dependency_discovery_and_processing%29" class="tocsubseclink" data-pltdoc="x">Dependency discovery and processing</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Accessing_shared_content%29" class="tocsubseclink" data-pltdoc="x">Accessing shared content</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Responding_to_change%29" class="tocsubseclink" data-pltdoc="x">Responding to change</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._extending%29" class="tocsubseclink" data-pltdoc="x">Extending <span class="RktSym">polyglot</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fmain..rkt%29._polyglot~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">polyglot%</span></span></a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Publishing_to_.S3%29" class="tocsubseclink" data-pltdoc="x">Publishing to S3</a></td></tr><tr><td><span class="tocsublinknumber">7.1<tt>&nbsp;</tt></span><a href="#%28part._.Assumptions%29" class="tocsubseclink" data-pltdoc="x">Assumptions</a></td></tr><tr><td><span class="tocsublinknumber">7.2<tt>&nbsp;</tt></span><a href="#%28part._.Publication_steps%29" class="tocsubseclink" data-pltdoc="x">Publication steps</a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._.License_and_contributions%29" class="tocsubseclink" data-pltdoc="x">License and contributions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Build_static_websites_using_any_language)"></a><a name="(mod-path._polyglot)"></a>Build static websites using any language</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Sage Gerard</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot" title="Install this package using `raco pkg install polyglot`"><span class="stt">polyglot</span></a></span></td></tr></table></p><p>This module uses <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Fundamentals.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span> to generate
static websites written in Markdown and any language
supported by Racket.</p><p>The author&rsquo;s website uses <span class="RktSym">polyglot</span> and <a href="https://sagegerard.com/racket-powered.html">has a page demonstrating use</a>.
The <a href="https://github.com/zyrolasting/polyglot/blob/master/README.md">README in the source code</a> also doubles an an example page.
The demo command builds the README using <span class="RktSym">polyglot</span>.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ raco polyglot demo</span></p></td></tr></table></p><p>Use the demo command to verify if <span class="RktSym">polyglot</span> works on your system.
If it works, you will see a <span class="RktVal">"dist"</span> folder appear in your
working directory containing a <span class="RktVal">"README.html"</span> file. This
directory contains a <span style="font-style: italic">distribution</span> built from assets.</p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;How_to_prepare_a_polyglot_project&quot;">1<tt>&nbsp;</tt><a name="(part._.How_to_prepare_a_polyglot_project)"></a>How to prepare a <span class="RktSym">polyglot</span> project</h3><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ raco polyglot start my-website</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ raco polyglot build my-website</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ cd my-website</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ raco polyglot build .</span></p></td></tr></table></p><p>The <span class="RktVal">"my-website"</span> used in the start command creates a new <span style="font-style: italic">project directory</span>
with example content that uses <span class="RktSym">polyglot</span>&rsquo;s features. The code inside will contain
helpful comments.</p><p><span class="RktSym">polyglot</span> commands expect you to specify a path to a project directory to read, whereas <span class="RktSym">start</span>
will try to create a directory with the given name.</p><p>When you run the <span class="RktSym">build</span> command, <span class="RktSym">polyglot</span> will read <span class="RktVal">"&lt;project&gt;/assets/index.md"</span>
and write content to the <span class="RktVal">"&lt;project&gt;/dist"</span> directory, creating it if it does not already exist.</p><p>As with the README, once you build the website you will see a dist directory appear.
But instead of the directory appearing in your working directory, it will always appear
in the project directory.</p><p>In this example, <span class="RktSym">polyglot</span> only parses Markdown, wraps the content in an HTML5
document structure, and writes the resulting HTML to <span class="RktVal">"dist/index.html"</span>. You
will also see other files because <span class="RktSym">polyglot</span> discovers dependencies of your pages
and processes them too.</p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Writing_Racket_in_Markdown&quot;">2<tt>&nbsp;</tt><a name="(part._.Writing_.Racket_in_.Markdown)"></a>Writing Racket in Markdown</h3><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Using script elements means that any Markdown parser can parse pages written for <span class="RktSym">polyglot</span>.
<span class="RktSym">polyglot</span> only interprets particular elements within Markdown and does not have any parsing rules of its own.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Markdown supports HTML tags inside its content. <span class="RktSym">polyglot</span>
will look for script elements of media type <span class="RktVal">"text/racket"</span>
and <span class="RktVal">"application/rackdown"</span>, in that order. These elements
are henceforth named <span style="font-style: italic">library</span> and <span style="font-style: italic">application</span> elements,
respectively.</div></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># My page</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Lorem ipsum...</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;script type="text/racket" id="components"&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#lang racket/base</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(provide title link)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(define title "My page")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(define (link label to) `(a ((href ,to)) ,label))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;/script&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;script type="application/rackdown" id="main"&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#lang racket/base</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(provide layout)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(require "components.rkt")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(define (layout kids)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">`(html (head (title ,title))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(body . ,kids)))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(write (link "About" "about.md"))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(write (link "Contact" "contact.md"))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;/script&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">Thanks for visiting, blah blah</span></p></td></tr></table></p><p><span class="RktSym">polyglot</span> writes each script element of only the listed types
to a temporary directory. The name of the file will be <span style="font-style: italic">id.rkt</span>,
where <span style="font-style: italic">id</span> matches the <span class="RktVal">"id"</span> attribute of the script element.
If one is not provided, a unique value will be chosen.</p><p>In this example <span class="RktSym">polyglot</span> will consume the <span class="RktVal">"text/racket"</span>
script (removing it from the output HTML) and write it to <span class="RktVal">"&lt;tmp&gt;/components.rkt"</span>.
<span class="RktVal">"&lt;tmp&gt;/main.rkt"</span> will follow, and then execute.</p><p>The application script uses <a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=printing.html&amp;version=7.4" class="Sq" data-pltdoc="x">The Printer</a> in <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">write</a></span> mode
to emit Tagged X-Expressions. The sequence of elements are
collected and will replace the script element in the internal
<span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">txexpr</a></span> representing the page.</p><p>Additionally, the Racket module from an application element
can set a layout for the page using <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="stt"> </span><span class="RktSym">layout</span><span class="RktPn">)</span>.</p><p><span class="RktSym">polyglot</span> will continue processing a page until no
application elements remain. You can leverage this to generate
application elements within an application element. One use case
is creating code samples paired with actual output embedded in
the page.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">code</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"#lang racket"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"(write `(h1 \"Hello, meta.\"))"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">pre</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">code</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">script</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktVal">"example"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"application/rackdown"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">,@</span><span class="RktSym">code</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h4 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Design_implications&quot;">2.1<tt>&nbsp;</tt><a name="(part._.Design_implications)"></a>Design implications</h4><ul><li><p>If an application element behaves in a way that generates infinitely
many application elements, then a <span class="RktSym">polyglot</span> build will not
terminate.</p></li><li><p>A Racket module created from a library element will
not be visited or instantiated until a Racket module
in an application element tries to use it. To avoid confusion
or unwanted output, avoid using the printer in the top-level
of library element code.</p></li><li><p>A Markdown+Racket file can have its own dependencies and therefore
won&rsquo;t build on every system where <span class="RktSym">polyglot</span> is installed. Be careful
to use <span class="RktSym">info.rkt</span> or a setup script to make your website&rsquo;s dependencies
available.</p></li></ul><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Dependency_discovery_and_processing&quot;">3<tt>&nbsp;</tt><a name="(part._.Dependency_discovery_and_processing)"></a>Dependency discovery and processing</h3><p>You may have noticed the links in the above example go to other Markdown files.
This is a good time to bring up how <span class="RktSym">polyglot</span> views the relationship
between your web assets.</p><p><span class="RktSym">polyglot</span> scans all <span class="RktSym">href</span> and <span class="RktSym">src</span> attribute values
in a page once it has fully expanded. If those values look like they
are meant to be paths (including <span class="RktVal">"file:"</span> URLs), they
are considered dependencies of your page.</p><p>Note that these values that are <span style="font-weight: bold">either absolute paths on
your filesystem, or paths relative to your assets directory.</span>
So in the above example, <span class="RktVal">"about.md"</span> corresponds to
a complete path like <span class="RktSym">/home/sage/dir-from-command-line/assets/about.md</span>.</p><p><span class="RktSym">polyglot</span> will iteratively discover and process any referenced Markdown
files. All Markdown files will appear in the dist directory with the same
name, except for the extension being changed to <span class="RktVal">".html"</span>.</p><p>Any non-Markdown files you reference are copied to the dist directory,
such that the file name is the first eight characters of the SHA1 hash of the
file content. This is for cache busting in general.</p><p>To customize this behavior, see <a href="#%28part._extending%29" data-pltdoc="x">Extending <span class="RktSym">polyglot</span></a></p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Accessing_shared_content&quot;">4<tt>&nbsp;</tt><a name="(part._.Accessing_shared_content)"></a>Accessing shared content</h3><p>The temporary directory <span class="RktSym">polyglot</span> uses to store modules will contain
a symlink to the directory you specify as your project directory.
It will always be named <span class="RktVal">"project"</span>. Use this link to
access resources that are useful for multiple pages.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;script type="application/rackdown" id="main"&gt;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#lang racket/base</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(require "project/layouts.rkt")</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(provide (rename-out [two-column layout]))</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;/script&gt;</span></p></td></tr></table></p><p>If you are using Windows, <span class="RktSym">polyglot</span> will likely not have permission
to create links on your system. In that case you can try running
<span class="RktSym">polyglot</span> commands as an Administrator, or granting permission
to create links specifically.</p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Responding_to_change&quot;">5<tt>&nbsp;</tt><a name="(part._.Responding_to_change)"></a>Responding to change</h3><p>Use the develop command to rebuild your website in response to changes in assets.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ raco polyglot develop .</span></p></td></tr></table></p><p>If a Markdown file changes, dependent markdown files will not rebuild.
If a CSS file changes, dependent markdown files will only update outdated references to fulfilled dependencies.</p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;extending&quot;">6<tt>&nbsp;</tt><a name="(part._extending)"></a>Extending <span class="RktSym">polyglot</span></h3><p><span class="RktSym">polyglot</span> offers sufficient flexibility for authoring content within a page,
but it handles web asset dependencies in an opinionated way.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>class</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/main..rkt)._polyglot~25))"></a><span title="Provided from: polyglot | Package: polyglot"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fmain..rkt%29._polyglot~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">polyglot%</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=objectutils.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._class%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">class?</a></span></p></blockquote></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span>superclass:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Fundamentals.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span></p></td></tr></table></div><div class="SIntrapara"><span class="RktSym">polyglot</span>&rsquo;s compiler class. If you wish to extend your website
to do things like bundle JavaScript, just subclass <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fmain..rkt%29._polyglot~25%29%29" class="RktValLink" data-pltdoc="x">polyglot%</a></span> and follow
the documentation for <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Fundamentals.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span>.</div><div class="SIntrapara">In the terminology of unlike-assets, <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fmain..rkt%29._polyglot~25%29%29" class="RktValLink" data-pltdoc="x">polyglot%</a></span> uses complete paths as <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Fundamentals.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span> names
and its <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Fundamentals.html%23%2528meth._%2528%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529._clarify%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">clarify</a></span> method will map any values of <span style="font-style: italic">href</span> or <span style="font-style: italic">src</span>
attributes to complete paths if they are readable on your system. This is likely enough for most cases,
so you&rsquo;d probably just want to override <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Fundamentals.html%23%2528meth._%2528%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529._delegate%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">delegate</a></span> to recognize new dependencies.</div><div class="SIntrapara">You can even override Markdown processing entirely, but I wouldn&rsquo;t recommend it.</div><div class="SIntrapara"><blockquote class="leftindent"></blockquote></div></p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Publishing_to_S3&quot;">7<tt>&nbsp;</tt><a name="(part._.Publishing_to_.S3)"></a>Publishing to S3</h3><p>Use the publish command to upload your website to AWS S3. <span class="RktSym">polyglot</span>&rsquo;s implementation
assumes you have set up a credentials file and will use <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=aws&amp;rel=All_Services.html%23%2528def._%2528%2528lib._aws%252Fkeys..rkt%2529._read-keys%252Faws-cli%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">read-keys/aws-cli</a></span>
to load them.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ raco polyglot publish . my-bucket us-east-2</span></p></td></tr></table></p><h4 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Assumptions&quot;">7.1<tt>&nbsp;</tt><a name="(part._.Assumptions)"></a>Assumptions</h4><ul><li><p>The bucket is configured for static web hosting.</p></li><li><p>The bucket will contain only the files from the dist directory.</p></li><li><p>HTML files should never be cached.</p></li><li><p>All other files should be cached forever.</p></li></ul><p>If you do not agree with all of that, then use the AWS CLI or the <span class="RktSym">aws/s3</span> library
to upload your dist directory.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;Publication_steps&quot;">7.2<tt>&nbsp;</tt><a name="(part._.Publication_steps)"></a>Publication steps</h4><ol><li><p>Read all keys in the bucket and compare them to the local contents of the dist directory. Remember the elements that are remote but not local.</p></li><li><p>Uploads the contents of the dist directory to the root of the bucket, overwriting any objects that already exist.</p></li><li><p>If <span class="RktSym"><span class="nobreak">--d</span>elete-diff</span> is set, delete from the bucket the objects marked in Step 1.</p></li></ol><p>Why delete anything? Because if you want to save space, you&rsquo;ll notice that
<span class="RktSym">polyglot</span> will not emit any file unless it was marked as a dependency. If
S3 holds a file that <span class="RktSym">polyglot</span> did not emit, it&rsquo;s either an old
version of a file or it was never referenced as a dependency.
Your own pages won&rsquo;t have broken links internally, but changing the name
of a Markdown file or removing an existing HTML file will break external links
unless you have a system set up to issue HTTP 301 codes. If you want to ensure no broken
links, then do not ever use <span class="RktSym"><span class="nobreak">--d</span>elete-diff</span>.</p><h3 x-source-module="(lib &quot;polyglot/scribblings/polyglot.scrbl&quot;)" x-source-pkg="polyglot" x-part-tag="&quot;License_and_contributions&quot;">8<tt>&nbsp;</tt><a name="(part._.License_and_contributions)"></a>License and contributions</h3><p><span class="RktSym">polyglot</span> uses the MIT license. <a href="https://github.com/zyrolasting/polyglot/blob/master/README.md">Here&rsquo;s the source code.</a></p><p>I always welcome contributions and feedback. If for any reason there is a problem with the name
or license, reach out to me and the matter will be resolved immediately.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>