<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>roomba: iRobot Roomba/Create Interface</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">roomba:<span class="mywbr"> &nbsp;</span> i<span class="mywbr"> &nbsp;</span>Robot Roomba/<span class="mywbr"> &nbsp;</span>Create Interface</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Logging%29" class="tocviewlink" data-pltdoc="x">Logging</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Exceptions%29" class="tocviewlink" data-pltdoc="x">Exceptions</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Protocols%29" class="tocviewlink" data-pltdoc="x">Protocols</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Models%29" class="tocviewlink" data-pltdoc="x">Models</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Roomba_.Object%29" class="tocviewlink" data-pltdoc="x">Roomba Object</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Opening_and_.Closing%29" class="tocviewlink" data-pltdoc="x">Opening and Closing</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._.Modes%29" class="tocviewlink" data-pltdoc="x">Modes</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="#%28part._.Stock_.Behaviors%29" class="tocviewlink" data-pltdoc="x">Stock Behaviors</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#%28part._.Driving%29" class="tocviewlink" data-pltdoc="x">Driving</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="#%28part._.Motors%29" class="tocviewlink" data-pltdoc="x">Motors</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="#%28part._.Lights%29" class="tocviewlink" data-pltdoc="x">Lights</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="#%28part._.Sound%29" class="tocviewlink" data-pltdoc="x">Sound</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="#%28part._.Sensors%29" class="tocviewlink" data-pltdoc="x">Sensors</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="#%28part._.Cargo_.Bay_.Connector%29" class="tocviewlink" data-pltdoc="x">Cargo Bay Connector</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="#%28part._.Cables%29" class="tocviewlink" data-pltdoc="x">Cables</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="#%28part._.Association._.List._.Primer%29" class="tocviewlink" data-pltdoc="x">Association List Primer</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="#%28part._.Troubleshooting%29" class="tocviewlink" data-pltdoc="x">Troubleshooting</a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="#%28part._.Known_.Issues%29" class="tocviewlink" data-pltdoc="x">Known Issues</a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="#%28part._.History%29" class="tocviewlink" data-pltdoc="x">History</a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="#%28part._.Legal%29" class="tocviewlink" data-pltdoc="x">Legal</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">roomba:<span class="mywbr"> &nbsp;</span> i<span class="mywbr"> &nbsp;</span>Robot Roomba/<span class="mywbr"> &nbsp;</span>Create Interface</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Logging%29" class="tocsubseclink" data-pltdoc="x">Logging</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Exceptions%29" class="tocsubseclink" data-pltdoc="x">Exceptions</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._exn~3afail~3aroomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">exn:<span class="mywbr"> &nbsp;</span>fail:<span class="mywbr"> &nbsp;</span>roomba</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._exn~3afail~3aroomba~3aio%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">exn:<span class="mywbr"> &nbsp;</span>fail:<span class="mywbr"> &nbsp;</span>roomba:<span class="mywbr"> &nbsp;</span>io</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._exn~3afail~3aroomba~3amode%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">exn:<span class="mywbr"> &nbsp;</span>fail:<span class="mywbr"> &nbsp;</span>roomba:<span class="mywbr"> &nbsp;</span>mode</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._exn~3afail~3aroomba~3aunsupported%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">exn:<span class="mywbr"> &nbsp;</span>fail:<span class="mywbr"> &nbsp;</span>roomba:<span class="mywbr"> &nbsp;</span>unsupported</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Protocols%29" class="tocsubseclink" data-pltdoc="x">Protocols</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-protocol~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>protocol?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-sci%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>sci</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-roi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>roi</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-coi%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>coi</span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Models%29" class="tocsubseclink" data-pltdoc="x">Models</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._decode-roomba-manufacturing-code%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">decode-<wbr></wbr>roomba-<wbr></wbr>manufacturing-<wbr></wbr>code</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-model~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>model?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._make-roomba-model%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>roomba-<wbr></wbr>model</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._current-number-to-roomba-model-hash%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">current-<wbr></wbr>number-<wbr></wbr>to-<wbr></wbr>roomba-<wbr></wbr>model-<wbr></wbr>hash</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._current-default-roomba-model%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">current-<wbr></wbr>default-<wbr></wbr>roomba-<wbr></wbr>model</span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Roomba_.Object%29" class="tocsubseclink" data-pltdoc="x">Roomba Object</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._get-roomba-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>roomba-<wbr></wbr>name</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._current-roomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">current-<wbr></wbr>roomba</span></a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Opening_and_.Closing%29" class="tocsubseclink" data-pltdoc="x">Opening and Closing</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._current-default-roomba-device%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">current-<wbr></wbr>default-<wbr></wbr>roomba-<wbr></wbr>device</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._open-roomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">open-<wbr></wbr>roomba</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._close-roomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">close-<wbr></wbr>roomba</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._roomba%2Fmain..rkt%29._with-roomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">with-<wbr></wbr>roomba</span></a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._.Modes%29" class="tocsubseclink" data-pltdoc="x">Modes</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-mode~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>mode?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._get-roomba-mode%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>roomba-<wbr></wbr>mode</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-mode%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>mode</span></a></td></tr><tr><td><span class="tocsublinknumber">9<tt>&nbsp;</tt></span><a href="#%28part._.Stock_.Behaviors%29" class="tocsubseclink" data-pltdoc="x">Stock Behaviors</a></td></tr><tr><td><span class="tocsublinknumber">9.1<tt>&nbsp;</tt></span><a href="#%28part._.Cleaning%29" class="tocsubseclink" data-pltdoc="x">Cleaning</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._start-roomba-spot-clean%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">start-<wbr></wbr>roomba-<wbr></wbr>spot-<wbr></wbr>clean</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._start-roomba-clean%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">start-<wbr></wbr>roomba-<wbr></wbr>clean</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._start-roomba-max-clean%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">start-<wbr></wbr>roomba-<wbr></wbr>max-<wbr></wbr>clean</span></a></td></tr><tr><td><span class="tocsublinknumber">9.2<tt>&nbsp;</tt></span><a href="#%28part._.Docking%29" class="tocsubseclink" data-pltdoc="x">Docking</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._start-roomba-seek-dock%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">start-<wbr></wbr>roomba-<wbr></wbr>seek-<wbr></wbr>dock</span></a></td></tr><tr><td><span class="tocsublinknumber">9.3<tt>&nbsp;</tt></span><a href="#%28part._.Demos%29" class="tocsubseclink" data-pltdoc="x">Demos</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._start-roomba-demo%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">start-<wbr></wbr>roomba-<wbr></wbr>demo</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._stop-roomba-demo%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">stop-<wbr></wbr>roomba-<wbr></wbr>demo</span></a></td></tr><tr><td><span class="tocsublinknumber">10<tt>&nbsp;</tt></span><a href="#%28part._.Driving%29" class="tocsubseclink" data-pltdoc="x">Driving</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-drive%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>drive</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-wheels%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>wheels</span></a></td></tr><tr><td><span class="tocsublinknumber">11<tt>&nbsp;</tt></span><a href="#%28part._.Motors%29" class="tocsubseclink" data-pltdoc="x">Motors</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-motors%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>motors</span></a></td></tr><tr><td><span class="tocsublinknumber">12<tt>&nbsp;</tt></span><a href="#%28part._.Lights%29" class="tocsubseclink" data-pltdoc="x">Lights</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-leds%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>leds</span></a></td></tr><tr><td><span class="tocsublinknumber">13<tt>&nbsp;</tt></span><a href="#%28part._.Sound%29" class="tocsubseclink" data-pltdoc="x">Sound</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-song-language~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>song-<wbr></wbr>language?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-song-number~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>song-<wbr></wbr>number?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._compiled-roomba-song~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">compiled-<wbr></wbr>roomba-<wbr></wbr>song?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._compile-roomba-song%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">compile-<wbr></wbr>roomba-<wbr></wbr>song</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._store-song-on-roomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">store-<wbr></wbr>song-<wbr></wbr>on-<wbr></wbr>roomba</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._play-song-on-roomba%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">play-<wbr></wbr>song-<wbr></wbr>on-<wbr></wbr>roomba</span></a></td></tr><tr><td><span class="tocsublinknumber">14<tt>&nbsp;</tt></span><a href="#%28part._.Sensors%29" class="tocsubseclink" data-pltdoc="x">Sensors</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._read-roomba-sensors%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">read-<wbr></wbr>roomba-<wbr></wbr>sensors</span></a></td></tr><tr><td><span class="tocsublinknumber">14.1<tt>&nbsp;</tt></span><a href="#%28part._.Sensor._.Packets%29" class="tocsubseclink" data-pltdoc="x">Sensor Packets</a></td></tr><tr><td><span class="tocsublinknumber">14.2<tt>&nbsp;</tt></span><a href="#%28part._.Sensor_.Utilities%29" class="tocsubseclink" data-pltdoc="x">Sensor Utilities</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._roomba-infrared-byte-~3ename%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">roomba-<wbr></wbr>infrared-<wbr></wbr>byte-<wbr></wbr>&gt;name</span></a></td></tr><tr><td><span class="tocsublinknumber">15<tt>&nbsp;</tt></span><a href="#%28part._.Cargo_.Bay_.Connector%29" class="tocsubseclink" data-pltdoc="x">Cargo Bay Connector</a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-digital-outputs%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>digital-<wbr></wbr>outputs</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._set-roomba-pwm-low-side-drivers%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>roomba-<wbr></wbr>pwm-<wbr></wbr>low-<wbr></wbr>side-<wbr></wbr>drivers</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._roomba%2Fmain..rkt%29._send-roomba-ir-byte%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">send-<wbr></wbr>roomba-<wbr></wbr>ir-<wbr></wbr>byte</span></a></td></tr><tr><td><span class="tocsublinknumber">16<tt>&nbsp;</tt></span><a href="#%28part._.Cables%29" class="tocsubseclink" data-pltdoc="x">Cables</a></td></tr><tr><td><span class="tocsublinknumber">17<tt>&nbsp;</tt></span><a href="#%28part._.Association._.List._.Primer%29" class="tocsubseclink" data-pltdoc="x">Association List Primer</a></td></tr><tr><td><span class="tocsublinknumber">18<tt>&nbsp;</tt></span><a href="#%28part._.Troubleshooting%29" class="tocsubseclink" data-pltdoc="x">Troubleshooting</a></td></tr><tr><td><span class="tocsublinknumber">19<tt>&nbsp;</tt></span><a href="#%28part._.Known_.Issues%29" class="tocsubseclink" data-pltdoc="x">Known Issues</a></td></tr><tr><td><span class="tocsublinknumber">20<tt>&nbsp;</tt></span><a href="#%28part._.History%29" class="tocsubseclink" data-pltdoc="x">History</a></td></tr><tr><td><span class="tocsublinknumber">21<tt>&nbsp;</tt></span><a href="#%28part._.Legal%29" class="tocsubseclink" data-pltdoc="x">Legal</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">2:4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._roomba__i.Robot_.Roomba_.Create_.Interface)"></a><a name="(mod-path._roomba)"></a>roomba: iRobot Roomba/Create Interface</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Neil Van Dyke</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara">License: <a href="#%28part._.Legal%29" class="plainlink" data-pltdoc="x">LGPLv3</a> <span class="hspace">&nbsp;</span> Web: <a href="http://www.neilvandyke.org/racket/roomba/" class="plainlink">http://www.neilvandyke.org/racket/roomba/</a>
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">roomba</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/roomba" title="Install this package using `raco pkg install roomba`"><span class="stt">roomba</span></a></span></td></tr></table></div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p><div class="SIntrapara">This package implements a <a href="https://docs.racket-lang.org/">Racket</a> interface for controlling many <a href="#%28tech._model%29" class="techoutside" data-pltdoc="x"><span class="techinside">models</span></a> of the <a href="https://en.wikipedia.org/wiki/Roomba">iRobot Roomba</a> robot vacuum cleaner, and the <a href="http://www.irobot.com/create">iRobot Create</a> educational/hobby robot platform.  This package currently runs on
GNU/Linux, and possibly on Apple Mac OS X.</div><div class="SIntrapara">One reason to control a Roomba using Racket is <a href="https://en.wikipedia.org/wiki/Constructionism_%28learning_theory%29">constructionist learning</a> opportunities for children.  Another reason is various hobby projects,
getting the robot hardware to do useful or amusing things other than clean
one&rsquo;s floor, perhaps as a small piece of something much bigger.  Another reason
is the principle among engineer-types that it is good to be able to modify,
experiment with, and improve things that you own.</div><div class="SIntrapara">Using this package requires first using a special cable or hardware
interface to connect the computer running your Racket program with the
Roomba. (If you don&rsquo;t already have such a cable or hardware interface, see section <a href="#%28part._.Cables%29" data-pltdoc="x">Cables</a> of this document.)  This package implements the protocol that is
used over that hardware connection.  You then write your program using the
definitions provided by this package.</div><div class="SIntrapara">Obligatory Cautions: Roomba hacking is not without risks; please don&rsquo;t sue
us.  Also, this package is <span style="font-style: italic">not</span> produced by iRobot Corp.; please don&rsquo;t bother them about this
package.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Logging&quot;">2<tt>&nbsp;</tt><a name="(part._.Logging)"></a>Logging</h3><p>This package sends logging messages to the  Racket <a href="https://docs.racket-lang.org/reference/logging.html">logger</a>, naming the messages as &ldquo;<span class="stt">roomba</span>&rdquo;.  This includes <span class="stt">debug</span> level messages for each use of most of this package&rsquo;s API.  You
can see these messages in the usual Racket ways, such as by using the <span class="stt">-W</span> argument to the command-line <span class="stt">racket</span> program, or via the DrRacket Log window.</p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Exceptions&quot;">3<tt>&nbsp;</tt><a name="(part._.Exceptions)"></a>Exceptions</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba-roomba))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3f))"></a><a name="(def._((lib._roomba/main..rkt)._struct~3aexn~3afail~3aroomba))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">exn:fail:roomba</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">exn:fail</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">roomba</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span></td></tr></table></blockquote></div><div class="SIntrapara">Supertype for exceptions related to the Roomba.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3aio~3f))"></a><a name="(def._((lib._roomba/main..rkt)._struct~3aexn~3afail~3aroomba~3aio))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3aio))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">exn:fail:roomba:io</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">exn:fail:roomba</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Exception due to I/O problem with communication link with the
Roomba.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3amode-actual))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3amode-expected))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3amode~3f))"></a><a name="(def._((lib._roomba/main..rkt)._struct~3aexn~3afail~3aroomba~3amode))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3amode))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">exn:fail:roomba:mode</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">exn:fail:roomba</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">expected</span><span class="stt"> </span><span class="RktSym">actual</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">expected</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">actual</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span></td></tr></table></blockquote></div><div class="SIntrapara">Exception due to attempting to use a command on the Roomba when
it is not believed to be in the proper <a href="#%28tech._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">mode</span></a> for that command.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3aunsupported~3f))"></a><a name="(def._((lib._roomba/main..rkt)._struct~3aexn~3afail~3aroomba~3aunsupported))"></a><a name="(def._((lib._roomba/main..rkt)._exn~3afail~3aroomba~3aunsupported))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">exn:fail:roomba:unsupported</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">exn:fail:roomba</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Exception due to attempting an operation not supported on this
particular Roomba.  For example, attempting <span class="RktSym">start-roomba-demo</span> on a Roomba 400 rather than on an iRobot Create.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Protocols&quot;">4<tt>&nbsp;</tt><a name="(part._.Protocols)"></a>Protocols</h3><p><div class="SIntrapara">This package supports a few different Roomba <a name="(tech._protocol)"></a><span style="font-style: italic">protocols</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba-protocol~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-protocol?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">any/c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">any/c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">x</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for a <span class="RktSym">roomba-protocol</span> object.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._roomba/main..rkt)._roomba-sci))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-sci</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-protocol?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(tech._sci)"></a><span style="font-style: italic">SCI</span>, the protocol used by the Roomba second generation, especially
the 400 series, described by <a href="http://www.usna.edu/Users/weapsys/esposito/roomba.matlab/Roomba_SCI.pdf"><span style="font-style: italic">iRobot Roomba Serial Command Interface (SCI) Specification</span></a>, dated 2005.</div><div class="SIntrapara">Note that not all second generation Roombas shipped with firmware
that supports SCI, but reportedly all of them can be upgraded with 2.1
firmware.  If the Roomba was not manufactured after October 2005, then search
the Web for &ldquo;roomba firmware update&rdquo; for your particular model number.  The
update process will likely involve an iRobot OSMO dongle, or using the iRobot
Scheduler Remote with a special cable).  If you need help determining the model
number or manufacturing date, see section <a href="#%28part._.Models%29" data-pltdoc="x">Models</a> of this document.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._roomba/main..rkt)._roomba-roi))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-roi</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-protocol?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(tech._roi)"></a><span style="font-style: italic">ROI</span>, the protocol used by the Roomba 500 and 600 series, described
by <a href="http://www.irobot.lv/uploaded_files/File/iRobot_Roomba_500_Open_Interface_Spec.pdf"><span style="font-style: italic">iRobot Roomba 500 Open Interface (OI) Specification</span></a>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._roomba/main..rkt)._roomba-coi))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-coi</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-protocol?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(tech._coi)"></a><span style="font-style: italic">COI</span>, the protocol used by the iRobot Create, described by <a href="http://www.irobot.com/filelibrary/pdfs/hrd/create/Create%20Open%20Interface_v2.pdf"><span style="font-style: italic">iRobot Create Open Interface (OI) Specification</span></a>.</div><div class="SIntrapara">Note that we say &ldquo;<span class="stt">roomba</span>&rdquo; even though it&rsquo;s for a Create rather than a Roomba, due to the
identifier naming convention of this package.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Models&quot;">5<tt>&nbsp;</tt><a name="(part._.Models)"></a>Models</h3><p><div class="SIntrapara">A <a name="(tech._model)"></a><span style="font-style: italic">model</span> refers to a particular manufactured model of Roomba or similar
robot, such as the iRobot Create.  This package defines a number of specific
Roomba models, and you can also define your own.</div><div class="SIntrapara">If you don&rsquo;t know which model of Roomba you have, or you need to
know the manufacturing date, look for the serial number barcode label on the
Roomba or the box.  Given a serial number label like, for example, &ldquo;<span class="stt">JEN 04000 090620 08 00999</span>&rdquo;, the model number is given by the &ldquo;04000&rdquo;, and the date is
in the second group of digits: year 2009 (<span class="stt">09</span> + 2000), month <span class="stt">06</span>, day of month <span class="stt">20</span>.  The <span class="RktSym">decode-roomba-manufacturing-code</span> procedure can do this for you.</div><div class="SIntrapara">As suggested in section <a href="#%28part._.Protocols%29" data-pltdoc="x">Protocols</a>, this package works with most Roombas from the second generation,
500 series, and 600 series, as well as with the Create.</div><div class="SIntrapara">This package does not presently work on the Roomba 700 series,
since iRobot has not documented the protocol for that series, unlike for the
400, 500, and Create.  However, a 700 user reported that it seems to provide a
serial protocol similar to <a href="#%28tech._sci%29" class="techoutside" data-pltdoc="x"><span class="techinside">SCI</span></a>, <a href="#%28tech._roi%29" class="techoutside" data-pltdoc="x"><span class="techinside">ROI</span></a>, and <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a>, but somewhat different, in a non-backward-compatible way.  So,
given access to a 700, the protocol might not be too hard to understand and
support in a future version of this package.  Realistically, someone who can
afford a 700 series can probably also afford a $50 used 400 for hobby purposes,
so 700 support seems a low priority.  All that said, the author of this package
welcomes expensive gifts at any time of year.</div><div class="SIntrapara">Note that this package does not work on iRobot Scooba, even though
the Scooba looks similar to a Roomba and has a mini-DIN connector, since the
Scooba reportedly uses a different protocol than the Roombas and the Create.
The Scooba&rsquo;s protocol might not even be for control, but only for firmware
updating.  The main reason we imagine for controlling a Scooba from Racket
would be to make a robot puppy that uses the Scooba&rsquo;s liquid bladder.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._decode-roomba-manufacturing-code))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">decode-roomba-manufacturing-code</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons/c</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Decodes a manufacturing code from a barcode label found on the
Roomba and its box, returning the information as a human-readable alist.  For
example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">decode-roomba-manufacturing-code</span><span class="hspace">&nbsp;</span><span class="RktVal">"JEN041100610060012345"</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">'</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">manufacturer</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">jetta</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">status</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">new</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">model</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">4110</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">date</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#</span><span class="RktRes">(</span><span class="RktRes">2006</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">10</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">6</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">rev</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">serial</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">12345</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div><div class="SIntrapara">The decoding is based on information from a <a href="http://www.robotreviews.com/chat/viewtopic.php?f=1&amp;t=16354#p110177">2006-12-29 robotreviews.com post by newmom</a>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba-model~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-model?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for a Roomba model.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._make-roomba-model))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">make-roomba-model</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:number</span><span class="hspace">&nbsp;</span><span class="RktVar">number</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:generation</span><span class="hspace">&nbsp;</span><span class="RktVar">generation</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:protocol</span><span class="hspace">&nbsp;</span><span class="RktVar">protocol</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">roomba-model?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">number</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">generation</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">protocol</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-protocol?</span></td></tr></table></blockquote></div><div class="SIntrapara">Make a new <span class="RktSym">roomba-model</span> object, for situations in which this package does not already
provide an appropriate pre-defined object.  (Perhaps you will also email the
author/maintainer of this package, so that the model can be added for everyone
else.)</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._current-number-to-roomba-model-hash))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-number-to-roomba-model-hash</span></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">hash/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">roomba-model?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-number-to-roomba-model-hash</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hasheqv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">hasheqv</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">hash/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">roomba-model?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Parameter for a hash that maps Roomba model numbers to <span class="RktSym">roomba-model</span> objects.  By default, it is populated with the following model numbers:</div><div class="SIntrapara"><ul><li><p>Second Generation &#8212;<wbr></wbr> <span class="RktVal">'</span><span class="RktVal">second-generation</span><span class="stt"> </span><span class="RktVal">1100</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">series-4000</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">series-400</span><span class="stt"> </span><span class="RktVal">4000</span><span class="stt"> </span><span class="RktVal">400</span><span class="stt"> </span><span class="RktVal">4100</span><span class="stt"> </span><span class="RktVal">410</span><span class="stt"> </span><span class="RktVal">4105</span><span class="stt"> </span><span class="RktVal">416</span><span class="stt"> </span><span class="RktVal">4110</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">sagelike-4130</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">discolike-4130</span><span class="stt"> </span><span class="RktVal">4150</span><span class="stt"> </span><span class="RktVal">4170</span><span class="stt"> </span><span class="RktVal">4188</span><span class="stt"> </span><span class="RktVal">4210</span><span class="stt"> </span><span class="RktVal">4220</span><span class="stt"> </span><span class="RktVal">4225</span><span class="stt"> </span><span class="RktVal">4230</span><span class="stt"> </span><span class="RktVal">4260</span></p></li><li><p>500 Series &#8212;<wbr></wbr> <span class="RktVal">'</span><span class="RktVal">series-500</span><span class="stt"> </span><span class="RktVal">510</span><span class="stt"> </span><span class="RktVal">530</span><span class="stt"> </span><span class="RktVal">532</span><span class="stt"> </span><span class="RktVal">535</span><span class="stt"> </span><span class="RktVal">550</span><span class="stt"> </span><span class="RktVal">560</span><span class="stt"> </span><span class="RktVal">562</span><span class="stt"> </span><span class="RktVal">564</span><span class="stt"> </span><span class="RktVal">570</span><span class="stt"> </span><span class="RktVal">571</span><span class="stt"> </span><span class="RktVal">572</span><span class="stt"> </span><span class="RktVal">580</span><span class="stt"> </span><span class="RktVal">581</span></p></li><li><p>600 Series &#8212;<wbr></wbr> <span class="RktVal">'</span><span class="RktVal">series-600</span><span class="stt"> </span><span class="RktVal">610</span><span class="stt"> </span><span class="RktVal">620</span><span class="stt"> </span><span class="RktVal">630</span><span class="stt"> </span><span class="RktVal">650</span><span class="stt"> </span><span class="RktVal">660</span></p></li><li><p>Create &#8212;<wbr></wbr> <span class="RktVal">'</span><span class="RktVal">create</span><span class="stt"> </span><span class="RktVal">4400</span><span class="stt"> </span><span class="RktVal">4418</span></p></li></ul></div><div class="SIntrapara">Note that some second generations need a firmware update before
they&rsquo;ll work with this package.  See the documentation for <span class="RktSym">roomba-sci</span>.</div><div class="SIntrapara">The list of model numbers is mostly based on the &ldquo;<a href="https://en.wikipedia.org/wiki/Roomba#List_of_models">List of models</a>&rdquo; section of the Wikipedia page on Roomba.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._current-default-roomba-model))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-default-roomba-model</span></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">roomba-model?</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-default-roomba-model</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">model</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">model</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">roomba-model?</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Parameter for the default <span class="RktSym">roomba-model</span>, which is used by <span class="RktSym">open-roomba</span>, <span class="RktSym">with-roomba</span>, and perhaps other procedures and syntax.  The default value of
this is <span class="RktVal">'</span><span class="RktVal">create</span>, meaning the iRobot Create platform in general.  You might wish to
change this parameter to something else, like <span class="RktVal">'</span><span class="RktVal">second-generation</span> or an exact model number.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Roomba_Object&quot;">6<tt>&nbsp;</tt><a name="(part._.Roomba_.Object)"></a>Roomba Object</h3><p><div class="SIntrapara">There is a <span class="RktSym">roomba</span> object that represents a connection to the robot.  This can be an
explicit argument to each operation on the robot, but there is also a <span class="RktSym">current-roomba</span> Racket parameter that is the default robot when it is not given as
an argument.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for the <span class="RktSym">roomba</span> object.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._get-roomba-name))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">get-roomba-name</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">roomba-name?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the current name of the <span class="RktVar">roomba</span>, as supplied by the optional <span class="RktPn">#:name</span> argument to a procedure like <span class="RktSym">open-roomba</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._current-roomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-roomba</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-roomba</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span></td></tr></table></blockquote></div><div class="SIntrapara">Parameter for the <span class="RktVar">roomba</span> that is the default for command procedures.  This parameter is
usually set automatically by <span class="RktSym">open-roomba</span>, but can also be set manually, like a normal Racket parameter.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Opening_and_Closing&quot;">7<tt>&nbsp;</tt><a name="(part._.Opening_and_.Closing)"></a>Opening and Closing</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._current-default-roomba-device))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-default-roomba-device</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">current-default-roomba-device</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Parameter that is the default <a name="(tech._device)"></a><span style="font-style: italic">device</span>, which is normally a special operating system device file for
the serial port device through which the Roomba is accessed.  This parameter
defaults to a value like <span class="RktVal">"/dev/ttyUSB0"</span>, depending on the Racket platform.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._open-roomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">open-roomba</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVar">name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:model</span><span class="hspace">&nbsp;</span><span class="RktVar">model</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:device</span><span class="hspace">&nbsp;</span><span class="RktVar">device</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:set-current?</span><span class="hspace">&nbsp;</span><span class="RktVar">set-current?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">roomba</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">model</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">roomba-model?</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym">current-roomba-default-model</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">device</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">path-string?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-default-roomba-device</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">set-current?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#true</span></td></tr></table></blockquote></div><div class="SIntrapara">Opens a connection to a Roomba, and returns an object for the
connection.  If <span class="RktSym">set-current?</span> is true, then <span class="RktSym">current-roomba</span> is also set to the object.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._close-roomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">close-roomba</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Closes the connection to the Roomba, if not already closed.
Changes the <a href="#%28tech._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">mode</span></a> to <span class="RktVal">'</span><span class="RktVal">closed</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._roomba/main..rkt)._with-roomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">with-roomba</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-model</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-device</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-model</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">#:model</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">or/c</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba-model?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">exact-nonnegative-integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">symbol?</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-device</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:device</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">This is a convenience for calling <span class="RktSym">open-roomba</span> and <span class="RktSym">close-roomba</span>.  In most cases, <span class="RktSym">close-roomba</span> will be called even if the body is exited due to an exception.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Modes&quot;">8<tt>&nbsp;</tt><a name="(part._.Modes)"></a>Modes</h3><p><div class="SIntrapara">A Roomba <a name="(tech._mode)"></a><span style="font-style: italic">mode</span> is a general operating mode of the Roomba.  The modes are
identified in this package by a symbol:</div><div class="SIntrapara"><ul><li><p><span class="RktVal">'</span><span class="RktVal">off</span> &#8212;<wbr></wbr> Powered off or sleeping, and you probably need to
manually press a button to wake it up.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">passive</span> &#8212;<wbr></wbr> Sensors can be read, but cannot be controlled in
this mode.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">safe</span> &#8212;<wbr></wbr> Can be controlled.  Lift and cliff sensors, or
plugging into charger, <span style="font-style: italic">do</span> trigger switch to <span class="RktVal">'</span><span class="RktVal">passive</span> mode.  <span class="RktVal">'</span><span class="RktVal">safe</span> is the usual mode for most purposes.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">full</span> &#8212;<wbr></wbr> Can be controlled.  Lift and cliff sensors, and
charger plugging do <span style="font-style: italic">not</span> switch Roomba to <span class="RktVal">'</span><span class="RktVal">passive</span> mode.  Switching to <span class="RktVal">'</span><span class="RktVal">full</span> mode also stops any battery charging.  Don&rsquo;t use <span class="RktVal">'</span><span class="RktVal">full</span> mode unless you&rsquo;re sure you need to, and you can cover
the safety risks other ways.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">closed</span> &#8212;<wbr></wbr> This connection with the Roomba is closed, so this
connection does not know the mode.  The mode is changed to this when <span class="RktSym">close-roomba</span> is called, when <span class="RktSym">with-roomba</span> exits, or when an I/O error occurs when attempting to
talk with the Roomba.</p></li></ul></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba-mode~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-mode?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for <a href="#%28tech._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">mode</span></a>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._get-roomba-mode))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">get-roomba-mode</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">roomba-mode?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the current <a href="#%28tech._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">mode</span></a> of the Roomba, as cached in the <span class="RktVar">roomba</span> object (without talking to the robot).</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-mode))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-mode</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVar">mode</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">safe</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">full</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">off</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Changes the <a href="#%28tech._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">mode</span></a> of the Roomba.  This sends mode change commands to the Roomba,
not merely changes the believed mode in the <span class="RktVar">roomba</span> object.  Works in modes: <span class="RktVal">'</span><span class="RktVal">passive</span>, <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Stock_Behaviors&quot;">9<tt>&nbsp;</tt><a name="(part._.Stock_.Behaviors)"></a>Stock Behaviors</h3><h4 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Cleaning&quot;">9.1<tt>&nbsp;</tt><a name="(part._.Cleaning)"></a>Cleaning</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._start-roomba-spot-clean))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">start-roomba-spot-clean</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like pressing the Spot button, starts a spot-cleaning, and
switches to <span class="RktVal">'</span><span class="RktVal">passive</span> mode.  Works in
modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._start-roomba-clean))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">start-roomba-clean</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like pressing the Clean button, starts a normal cleaning cycle,
and switches to <span class="RktVal">'</span><span class="RktVal">passive</span> mode.  Works in
modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._start-roomba-max-clean))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">start-roomba-max-clean</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like pressing the Max button, starts a maximum-time cleaning cycle,
and switches to <span class="RktVal">'</span><span class="RktVal">passive</span> mode.  Works in
modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div></p><h4 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Docking&quot;">9.2<tt>&nbsp;</tt><a name="(part._.Docking)"></a>Docking</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._start-roomba-seek-dock))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">start-roomba-seek-dock</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Directs the Roomba to start seeking its dock.  This might only
work during some kind of cleaning cycle.</div></p><h4 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Demos&quot;">9.3<tt>&nbsp;</tt><a name="(part._.Demos)"></a>Demos</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._start-roomba-demo))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">start-roomba-demo</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:demo</span><span class="hspace">&nbsp;</span><span class="RktVar">demo</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">demo</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Start one of the iRobot Create demos, where <span class="RktVar">demo</span> is one of the symbols:</div><div class="SIntrapara"><blockquote><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktVal">'</span><span class="RktVal">cover</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Drive around to cover room.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">cover-and-dock</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Cover room, until see Home Base, then dock.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">spot-cover</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Cover room with spiral.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">mouse</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Follows walls.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">figure-eight</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Drive in figure-eight.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">wimp</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Flees when bumped.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">home</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>(See Create manual.)</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">tag</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>(See Create manual.)</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">pachelbel</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Plays Pachelbel's Canon for cliff sensors.</p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">banjo</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Plays notes for cliff and bump sensors.</p></td></tr></table></blockquote></div><div class="SIntrapara">Starting a demo changes mode to <span class="RktVal">'</span><span class="RktVal">passive</span>.  Works in protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a>.  Works in modes: <span class="RktVal">'</span><span class="RktVal">passive</span>, <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._stop-roomba-demo))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">stop-roomba-demo</span></span></span><span class="hspace">&nbsp;</span>[<span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Stop the current iRobot Create demo that is playing.  Works in
modes: <span class="RktVal">'</span><span class="RktVal">passive</span>, <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Driving&quot;">10<tt>&nbsp;</tt><a name="(part._.Driving)"></a>Driving</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-drive))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-drive</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:velocity-mm/s</span><span class="hspace">&nbsp;</span><span class="RktVar">velocity-mm/s</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:radius-mm</span><span class="hspace">&nbsp;</span><span class="RktVar">radius-mm</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">velocity-mm/s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">radius-mm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">integer?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the drive speed and turning radius of the Roomba.</div><div class="SIntrapara"><span class="RktVar">velocity-mm/s</span> is the velocity in millimeters per second, with a range of <span class="RktVal"><span class="nobreak">-5</span>00</span> to <span class="RktVal">500</span>, with negative numbers meaning to drive in reverse.</div><div class="SIntrapara"><span class="RktVar">radius-mm</span> is the turning radius in millimeters, with a range of <span class="RktVal"><span class="nobreak">-2</span>000</span> to <span class="RktVal">2000</span>, or <span class="RktVal">#f</span>, meaning straight.  Works in modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-wheels))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-wheels</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:left-mm/s</span><span class="hspace">&nbsp;</span><span class="RktVar">left-mm/s</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:right-mm/s</span><span class="hspace">&nbsp;</span><span class="RktVar">right-mm/s</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">left-mm/s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">right-mm/s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">integer?</span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the drive speed of the left and right wheels of the Roomba.
Each is specified in in millimeters per second, with a range of <span class="RktVal"><span class="nobreak">-5</span>00</span> to <span class="RktVal">500</span>, and with negative numbers meaning to drive that wheel in
reverse.  This is a lower-level alternative to <span class="RktSym">set-roomba-drive</span>.  Works in protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a>.  Works in modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Motors&quot;">11<tt>&nbsp;</tt><a name="(part._.Motors)"></a>Motors</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-motors))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-motors</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:side-brush?</span><span class="hspace">&nbsp;</span><span class="RktVar">side-brush?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:vacuum?</span><span class="hspace">&nbsp;</span><span class="RktVar">vacuum?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:main-brush?</span><span class="hspace">&nbsp;</span><span class="RktVar">main-brush?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">side-brush?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">vacuum?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">main-brush?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the on/off states of each of the Roomba&rsquo;s motors, other than
the drive motors.  When they keyword argument for a motor is not provided, the default is <span class="RktVal">#false</span> (i.e., off).</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Lights&quot;">12<tt>&nbsp;</tt><a name="(part._.Lights)"></a>Lights</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-leds))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-leds</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:debris?</span><span class="hspace">&nbsp;</span><span class="RktVar">debris?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max?</span><span class="hspace">&nbsp;</span><span class="RktVar">max?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:clean?</span><span class="hspace">&nbsp;</span><span class="RktVar">clean?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:spot?</span><span class="hspace">&nbsp;</span><span class="RktVar">spot?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:dock?</span><span class="hspace">&nbsp;</span><span class="RktVar">dock?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:check?</span><span class="hspace">&nbsp;</span><span class="RktVar">check?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:play?</span><span class="hspace">&nbsp;</span><span class="RktVar">play?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:advance?</span><span class="hspace">&nbsp;</span><span class="RktVar">advance?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:status</span><span class="hspace">&nbsp;</span><span class="RktVar">status</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:power-color</span><span class="hspace">&nbsp;</span><span class="RktVar">power-color</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:power-intensity</span><span class="hspace">&nbsp;</span><span class="RktVar">power-intensity</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">debris?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">clean?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">spot?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dock?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">check?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">play?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">advance?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">status</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">green</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">amber</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">power-color</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">byte?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">power-intensity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">byte?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the states of all the LEDs on the Roomba at once.</div><div class="SIntrapara">The follow table shows which series of Roomba <a href="#%28tech._model%29" class="techoutside" data-pltdoc="x"><span class="techinside">models</span></a> support which variables, and how the corresponding LEDs are
usually labeled.  Note that not all models of a series have all LEDs that the
series supports.  Attempting to set a non-existent LED through this procedure
has no effect, not even a warning.</div><div class="SIntrapara"><blockquote><table cellspacing="0" cellpadding="0"><tr><td><p><span style="font-weight: bold">Variable</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">Labels</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">Series</span></p></td></tr><tr><td><p><span class="RktVar">debris?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Dirt Detect, Dirt Alert, Debris</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>2nd, 500, 600</p></td></tr><tr><td><p><span class="RktVar">max?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Max</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>2nd</p></td></tr><tr><td><p><span class="RktVar">clean?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Clean</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>2nd</p></td></tr><tr><td><p><span class="RktVar">spot?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Spot</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>2nd, 500, 600</p></td></tr><tr><td><p><span class="RktVar">dock?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Dock</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>500, 600</p></td></tr><tr><td><p><span class="RktVar">check?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Check Robot</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>500, 600</p></td></tr><tr><td><p><span class="RktVar">play?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Play</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Create</p></td></tr><tr><td><p><span class="RktVar">advance?</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Advance</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Create</p></td></tr><tr><td><p><span class="RktVar">status</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Status</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>2nd</p></td></tr><tr><td><p><span class="RktVar">power-color</span>, <br/><span class="RktVar">power-intensity</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Power (Clean)</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>2nd, 500, Create</p></td></tr></table></blockquote></div><div class="SIntrapara">The Boolean LEDs are self-explanatory.</div><div class="SIntrapara"><span class="RktVar">status</span> is one of 3 colors, or <span class="RktVal">#f</span> for off.</div><div class="SIntrapara"><span class="RktVar">power-color</span> is a value from 0 to 255, representing a color from green to red.</div><div class="SIntrapara"><span class="RktVar">power-intensity</span> is a value from 0 to 255, representing a range from off to full
intensity.</div><div class="SIntrapara">Note that not all Roomba models have all these LEDs.  The LEDs
that they do have might be labeled differently between models.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Sound&quot;">13<tt>&nbsp;</tt><a name="(part._.Sound)"></a>Sound</h3><p><div class="SIntrapara">The Roomba permits short songs by stored in numbered memory slots
and then played back on command.  The songs consist of single-voice notes with
durations, and the volume is fixed.</div><div class="SIntrapara">This library provides a <a name="(tech._song._language)"></a><span style="font-style: italic">song language</span> for describing songs to be stored, with the BNF grammar:</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p><span class="sroman">&#8249;<span style="font-style: italic">song-language</span>&#8250;</span></p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">note</span>&#8250;</span><span style="vertical-align: super; font-size: 80%">+</span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p><span class="sroman">&#8249;<span style="font-style: italic">note</span>&#8250;</span></p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="sroman">&#8249;<span style="font-style: italic">frequency</span>&#8250;</span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">frequency</span>&#8250;</span><span class="hspace">&nbsp;</span><span class="sroman">&#8249;<span style="font-style: italic">duration</span>&#8250;</span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p><span class="sroman">&#8249;<span style="font-style: italic">frequency</span>&#8250;</span></p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span style="font-style: italic"><span class="RktSym">symbol?</span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span style="font-style: italic"><span class="RktSym">number?</span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p><span class="sroman">&#8249;<span style="font-style: italic">duration</span>&#8250;</span></p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">whole</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">w</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">half</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">h</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">quarter</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">q</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span style="font-style: italic"><span class="RktSym">number?</span></span></p></td></tr></table></div><div class="SIntrapara">For <span class="sroman">&#8249;<span style="font-style: italic">frequency</span>&#8250;</span>, usually you will use a symbol like <span class="RktVal">'</span><span class="RktVal">c4</span> or <span class="RktVal">'</span><span class="RktVal">cs4</span>, in the manner of <a href="https://en.wikipedia.org/wiki/Common_Music_Notation">Common Music Notation</a> (CMN).  You can also use single-letter note symbols, like <span class="RktVal">'</span><span class="RktVal">c</span>.  If a number is given, it&rsquo;s the frequency that this library tries
to approximate on the Roomba.</div><div class="SIntrapara">For <span class="sroman">&#8249;<span style="font-style: italic">duration</span>&#8250;</span>, symbols like <span class="RktVal">'</span><span class="RktVal">whole</span> and <span class="RktVal">'</span><span class="RktVal">h</span> denote whole and half notes, respectively.  If the duration for a
note is not given, a quarter note is assumed.  If the duration is given as a
number, it&rsquo;s in 64ths of a second.</div><div class="SIntrapara">For example, here&rsquo;s a start of Mary Had a Little Lamb:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">g</span><span class="hspace">&nbsp;</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">h</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">h</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">h</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba-song-language~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-song-language?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for  <a href="#%28tech._song._language%29" class="techoutside" data-pltdoc="x"><span class="techinside">song language</span></a>.  This predicate does not necessarily do a complete check of <span class="RktVar">x</span>, and is mainly here for documentation purposes.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba-song-number~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-song-number?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for <a name="(tech._song._number)"></a><span style="font-style: italic">song number</span>, which is an exact nonnegative integer in the range of 0 to 15.
This is used to identify a song storage slot on the Roomba.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._compiled-roomba-song~3f))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">compiled-roomba-song?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">any/c</span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for the compiled roomba song as produced by <span class="RktSym">compile-roomba-song</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._compile-roomba-song))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">compile-roomba-song</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:song-number</span><span class="hspace">&nbsp;</span><span class="RktVar">song-number</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:song-language</span><span class="hspace">&nbsp;</span><span class="RktVar">song-language</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">roomba-song?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">song-number</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-song-number?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">song-language</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-song-language?</span></td></tr></table></blockquote></div><div class="SIntrapara">Compiles a song in the <a href="#%28tech._song._language%29" class="techoutside" data-pltdoc="x"><span class="techinside">song language</span></a> to a form that is more time-efficient to store with <span class="RktSym">store-song-on-roomba</span>.  This may be useful for breaking up a long song into fragments
that are stored during playback.</div><div class="SIntrapara">Note that such a compiled song has the song number compiled into it.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._store-song-on-roomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">store-song-on-roomba</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:song-number</span><span class="hspace">&nbsp;</span><span class="RktVar">song-number</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:song</span><span class="hspace">&nbsp;</span><span class="RktVar">song</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">song-number</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-song-number?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">song</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktSym">roomba-song-language?</span><span class="hspace">&nbsp;</span><span class="RktSym">compiled-roomba-song?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Stores a song on the Roomba in a song number slot, to be played
later using <span class="RktSym">play-song-on-roomba</span>.  It replaces any song previously stored at that song number on
the Roomba.</div><div class="SIntrapara">The longest song that can be stored in in a song number slot at a
time is 16 notes.  However, longer songs can be played by fragmenting among
multiple slots, and/or storing fragments as they are needed during
playback.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._play-song-on-roomba))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">play-song-on-roomba</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:song-number</span><span class="hspace">&nbsp;</span><span class="RktVar">number</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">number</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba-song-number?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr></table></blockquote></div><div class="SIntrapara">Plays song number <span class="RktVar">number</span> as stored using <span class="RktSym">store-song-on-roomba</span>.</div><div class="SIntrapara">Note that, in the current version of this package, <span class="RktSym">song-number</span> must agree with the song number under which the song was compiled.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Sensors&quot;">14<tt>&nbsp;</tt><a name="(part._.Sensors)"></a>Sensors</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._read-roomba-sensors))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">read-roomba-sensors</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:packet-code</span><span class="hspace">&nbsp;</span><span class="RktVar">packet-code</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons/c</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">any/c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">packet-code</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">exact-nonnegative-integer?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Get sensor values for a packet code as an <a href="#%28tech._association._list%29" class="techoutside" data-pltdoc="x"><span class="techinside">association list</span></a>.  The available packet codes and their association list pairs
are documented in section <a href="#%28part._.Sensor._.Packets%29" data-pltdoc="x">Sensor Packets</a>.  If <span class="RktVar">packet-code</span> is <span class="RktVal">#f</span>, then the default will vary between Roomba protocols, to give a
large number of sensors values (e.g., on a Roomba 400 would default to <span class="RktVal">0</span>; iRobot Create, <span class="RktVal">6</span>).</div><div class="SIntrapara">If you aren&rsquo;t familiar with association lists, see section <a href="#%28part._.Association._.List._.Primer%29" data-pltdoc="x">Association List Primer</a>.</div><div class="SIntrapara">Some examples on a Roomba 400:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">read-roomba-sensors</span><span class="hspace">&nbsp;</span><span class="RktPn">#:packet-code</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">dirt-detect-right</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">dirt-detect-left</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">side-brush-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">vacuum-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">main-brush-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">drive-right-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">drive-left-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">virtual-wall?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-front-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-front-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wall?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">bump-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">bump-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wheeldrop-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wheeldrop-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wheeldrop-caster?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">read-roomba-sensors</span><span class="hspace">&nbsp;</span><span class="RktPn">#:packet-code</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">angle</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">distance</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">max-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">clean-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">spot-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">power-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">remote-control-command</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">255</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">read-roomba-sensors</span><span class="hspace">&nbsp;</span><span class="RktPn">#:packet-code</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">battery-capacity</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">973</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-charge</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">889</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-temperature</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">30</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-current</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes"><span class="nobreak">-1</span>76</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-voltage</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">13888</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-charging-state</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">not-charging</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div><div class="SIntrapara">An example with the default packet code on an iRobot Create:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">read-roomba-sensors</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">requested-left-velocity</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">requested-right-velocity</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">requested-radius</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">requested-velocity</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">number-of-stream-packets</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">song-playing?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">song-number</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">oi-mode</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">safe</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">internal-charger?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">home-base-charger?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cargo-bay-analog-signal</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">digital-input-0?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">digital-input-1?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">digital-input-2?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">digital-input-3?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">device-detect?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-right-signal</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">1029</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-front-right-signal</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">1276</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-front-left-signal</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">960</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-left-signal</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">1032</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wall-signal</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-capacity</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">2702</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-charge</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">2696</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-temperature</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">25</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-current</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes"><span class="nobreak">-1</span>69</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-voltage</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">13554</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-charging-state</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">not-charging</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">angle</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">distance</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">max-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">clean-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">spot-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">power-button?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">remote-control-command</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">255</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">infrared-byte</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">255</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">dirt-detect-right</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">dirt-detect-left</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">0</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">side-brush-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">vacuum-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">main-brush-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">drive-right-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">drive-left-overcurrent?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">virtual-wall?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-front-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-front-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">cliff-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wall?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">bump-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">bump-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wheeldrop-right?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wheeldrop-left?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">wheeldrop-caster?</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#f</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div></p><h4 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Sensor Packets&quot;">14.1<tt>&nbsp;</tt><a name="(part._.Sensor._.Packets)"></a>Sensor Packets</h4><p><div class="SIntrapara">The first 7 packet codes are actually for <a name="(tech._group._packet)"></a><span style="font-style: italic">group packets</span>, that include all the contents of a range of other packets:</div><div class="SIntrapara"><blockquote><table cellspacing="0" cellpadding="0"><tr><td><p><span style="font-weight: bold">Packet Code</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">Contains Packets</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">Protocols</span></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">0</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>7 - 26</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-style: italic">all</span></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">1</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>7 - 16</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-style: italic">all</span></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">2</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>17 - 20</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-style: italic">all</span></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">3</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>21 - 26</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-style: italic">all</span></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">4</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>27 - 34</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">5</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>35 - 42</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></p></td></tr><tr><td><p><span style="font-weight: bold"><span class="RktVal">6</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>7 - 42</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></p></td></tr></table></blockquote></div><div class="SIntrapara">The non-group packets are listed below.</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">7</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">bump-right?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">bump-left?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">wheeldrop-right?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">wheeldrop-left?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">wheeldrop-caster?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">8</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">wall?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">9</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-left?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">10</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-front-left?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">11</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-front-right?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">12</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-right?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">13</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">virtual-wall?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">14</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">side-brush-overcurrent?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">vacuum-overcurrent?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">main-brush-overcurrent?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">drive-right-overcurrent?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">drive-left-overcurrent?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">15</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">dirt-detect-left</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">16</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">dirt-detect-right</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">17</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">remote-control-command</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">byte?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">infrared-byte</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">byte?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">18</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">max-button?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">clean-button?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">spot-button?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">power-button?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">19</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">distance</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">20</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">angle</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">21</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">battery-charging-state</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="stt"> </span><span class="RktVal">#f</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">not-charging</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">charging-recovery</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">charging</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">trickle-charging</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">waiting</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">charging-error</span><span class="RktPn">)</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">22</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">battery-voltage</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">23</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">battery-current</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">24</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">battery-temperature</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">signed-byte?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">25</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">battery-charge</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">26</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <span style="font-style: italic">all</span></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">battery-capacity</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">27</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">wall-signal</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">28</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-left-signal</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">29</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-front-left-signal</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">30</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-front-right-signal</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">31</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cliff-right-signal</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">32</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">digital-input-0?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">digital-input-1?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">digital-input-2?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">digital-input-3?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">device-detect?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">33</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">cargo-bay-analog-signal</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">byte?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">34</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">internal-charger?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">home-base-charger?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">35</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">oi-mode</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">off</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">passive</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">safe</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">full</span><span class="stt"> </span><span class="RktSym">byte?</span><span class="RktPn">)</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">36</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">song-number</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">byte?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">37</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">song-playing?</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">boolean?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">38</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">number-of-stream-packets</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">byte?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">39</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">requested-velocity</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">40</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">requested-radius</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">41</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">requested-right-velocity</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-integer?</span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td colspan="3"><p><span class="nobreak">Packet Code: <span style="font-weight: bold"><span class="RktVal">42</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>Protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a></span></p></td></tr><tr><td><p><span class="nobreak"><span class="RktSym">requested-left-velocity</span></span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span class="RktSym">exact-nonnegative-integer?</span></p></td></tr></table></div></p><h4 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Sensor_Utilities&quot;">14.2<tt>&nbsp;</tt><a name="(part._.Sensor_.Utilities)"></a>Sensor Utilities</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._roomba-infrared-byte-~3ename))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">roomba-infrared-byte-&gt;name</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">infrared-byte</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">byte?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">infrared-byte</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">byte?</span></td></tr></table></blockquote></div><div class="SIntrapara">Maps the <span class="RktVal">'</span><span class="RktVal">infrared-byte</span> sensor value to a symbol, or, if no infrared signal, to <span class="RktVal">#f</span>.  If it cannot be mapped, then the original byte is returned.</div><div class="SIntrapara">The symbols that might be returned in the current version of this
package are the following, (although note that later versions might return
additional symbols, and your program should accommodate that possibility):</div><div class="SIntrapara"><blockquote><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktVal">'</span><span class="RktVal">left</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">forward</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">right</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">spot</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">max</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">small</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">medium</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">large-or-clean</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">pause</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">power</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">arc-forward-left</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">arc-forward-right</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">drive-setup</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">send-all</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">seek-dock</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">force-field</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">green-buoy</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">green-buoy-and-force-field</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">red-buoy</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">red-buoy-and-force-field</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">red-and-green-buoys</span></p></td></tr><tr><td><p><span class="RktVal">'</span><span class="RktVal">red-and-green-buoys-and-force-field</span></p></td></tr></table></blockquote></div><div class="SIntrapara">Note that <span class="RktSym">read-roomba-sensors</span> does not do this mapping automatically because some applications
might wish to use the infrared byte values for other purposes, such as for a
7-bit communication channel.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Cargo_Bay_Connector&quot;">15<tt>&nbsp;</tt><a name="(part._.Cargo_.Bay_.Connector)"></a>Cargo Bay Connector</h3><p><div class="SIntrapara">This section lists operations specific to the iRobot Create&rsquo;s Cargo
Bay Connector.  For the connector pinout, see <a href="http://www.irobot.com/filelibrary/pdfs/hrd/create/Create%20Open%20Interface_v2.pdf"><span style="font-style: italic">iRobot Create Open Interface (OI) Specification</span></a>, page 4.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-digital-outputs))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-digital-outputs</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:digital-out-0?</span><span class="hspace">&nbsp;</span><span class="RktVar">digital-out-0?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:digital-out-1?</span><span class="hspace">&nbsp;</span><span class="RktVar">digital-out-1?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:digital-out-2?</span><span class="hspace">&nbsp;</span><span class="RktVar">digital-out-2?</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">digital-out-0?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">digital-out-1?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">digital-out-2?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the digital output pins on the Cargo Bay Connector, where <span class="RktVal">#true</span> is high, and <span class="RktVal">#false</span> is low.  For more information, see <a href="http://www.irobot.com/filelibrary/pdfs/hrd/create/Create%20Open%20Interface_v2.pdf"><span style="font-style: italic">iRobot Create Open Interface (OI) Specification</span></a>, page 10.  Works in protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a>.  Works in modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top" colspan="3"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._set-roomba-pwm-low-side-drivers))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">set-roomba-pwm-low-side-drivers</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:driver-0-voltage-fraction</span><span class="hspace">&nbsp;</span><span class="RktVar">driver-0-voltage-fraction</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:driver-1-voltage-fraction</span><span class="hspace">&nbsp;</span><span class="RktVar">driver-1-voltage-fraction</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:driver-2-voltage-fraction</span><span class="hspace">&nbsp;</span><span class="RktVar">driver-2-voltage-fraction</span>]<span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">driver-0-voltage-fraction</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">nonnegative-number?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">driver-1-voltage-fraction</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">nonnegative-number?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">driver-2-voltage-fraction</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">nonnegative-number?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr></table></blockquote></div><div class="SIntrapara">Set the variable voltage levels of the Create&rsquo;s three low side
drivers.  Each is specified as number from 0.0 to 1.0, representing the
fraction of battery voltage to use.  For more information, see <a href="http://www.irobot.com/filelibrary/pdfs/hrd/create/Create%20Open%20Interface_v2.pdf"><span style="font-style: italic">iRobot Create Open Interface (OI) Specification</span></a>, page 10.  Works in protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a>.  Works in modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._roomba/main..rkt)._send-roomba-ir-byte))"></a><span title="Provided from: roomba | Package: roomba"><span class="RktSym"><span class="RktSymDef RktSym">send-roomba-ir-byte</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>[</td><td valign="top"><span class="RktPn">#:roomba</span><span class="hspace">&nbsp;</span><span class="RktVar">roomba</span>]</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:byte</span><span class="hspace">&nbsp;</span><span class="RktVar">byte</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">void?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">roomba</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">roomba?</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-roomba</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">byte</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">byte?</span></td></tr></table></blockquote></div><div class="SIntrapara">Send a byte to the iRobot Create&rsquo;s IR receiver.  For more information, see <a href="http://www.irobot.com/filelibrary/pdfs/hrd/create/Create%20Open%20Interface_v2.pdf"><span style="font-style: italic">iRobot Create Open Interface (OI) Specification</span></a>, page 11.  Works in protocols: <a href="#%28tech._coi%29" class="techoutside" data-pltdoc="x"><span class="techinside">COI</span></a>.  Works in modes: <span class="RktVal">'</span><span class="RktVal">safe</span>, <span class="RktVal">'</span><span class="RktVal">full</span>.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Cables&quot;">16<tt>&nbsp;</tt><a name="(part._.Cables)"></a>Cables</h3><p><div class="SIntrapara">At time of this writing, if you do not already have a cable/adapter to
connect PC to Roomba, your options are:</div><div class="SIntrapara"><ul><li><p>Obtain an <span style="font-weight: bold"><a href="http://irobot.com/create">iRobot Create</a></span>, which is an educational/hobby platform variant of the Roomba,
which does not include cleaning functionality, and use the included
RS232-to-Roomba-mini-DIN cable.  Then connect the RS232 cable to your PC,
perhaps with an USB-to-RS232 adapter.  Or, if you can obtain the no-longer-made
iRobot Command Module for the Create, you <span style="font-style: italic">might</span> be able to disregard RS232 and rig up the microcontroller to let
you use an ordinary USB cable between the Command Module and a PC (and please
let us know if you do).  The Create is available new, <a href="http://store.irobot.com/family/index.jsp?categoryId=2591511&amp;s=A-ProductAge">direct from iRobot</a> (model 4400 without recharging for 130 USD, model 4418 with
recharging for 220 USD).  Note that neither of the Create models currently
available new from iRobot contain the Command Module, although used ones often
have it.</p></li><li><p><div class="SIntrapara">Attempt to obtain an <span style="font-weight: bold">off-the-shelf cable/adapter</span>, probably on the used market, since few new ones are currently
available:</div><div class="SIntrapara"><ul><li><p><span style="font-weight: bold">iRobot RS232-to-Roomba-mini-DIN cable</span> (model 4814).  These were once sold individually
by iRobot for, we believe, 20 USD, without having to buy a Create.  Now they
are sold new only with a Create, perhaps because iRobot would prefer that
people just used the Create for education projects.  If you can find one of
these cables, to plug it into a modern PC, you most likely also want a
USB-to-RS232 adapter (approx. 10 USD).</p></li><li><p><span style="font-weight: bold">iRobot USB-to-Roomba-mini-DIN cable</span>.  We have seen a product photo of these, but they
are not currently sold by iRobot.</p></li><li><p><span style="font-weight: bold">RoboDynamics RooStick</span>, a USB-to-Roomba-mini-DIN adapter.  Note that we
believe these are no longer available new because it seems that RoboDynamics
was developing its own robot platform and seems to have gone on hiatus.
RoboDynamics did Roomba business as Roomba Dev Tools.</p></li><li><p><span style="font-weight: bold">RoboDynamics Roo232</span>, an RS232-to-Roomba-mini-DIN adapter.  Like the
RooStick, new Roo232 units are not available.</p></li><li><p><span style="font-weight: bold">RoboDynamics RooTooth</span>, a Bluetooth-to-Roomba-mini-DIN adapter.
Sparkfun has a small quantity of some version of these (<a href="https://www.sparkfun.com/products/10980">Sparkfun item DEV-10980</a>, 100 USD).  Some changes to this package might be
necessary to work with any version of RooTooth.  If you have a RooTooth, please
contact the package author.</p></li><li><p><span style="font-weight: bold"><a href="http://www.elementdirect.com/product_info.php?products_id=44">Element Direct Bluetooth Adapter Module (BAM)</a></span>, which provides a Bluetooth interface for the
iRobot Create, but not the Roomba.  It appears to be available currently <a href="http://www.acroname.com/robotics/parts/I19-10542.html">from Acroname Robotics</a> (part number I19-10542, 60 USD).</p></li></ul></div><div class="SIntrapara">We&rsquo;re working on getting a particular vendor to make some
particular new off-the-shelf cables and adapters, but do not assume that these
new products will appear soon.  Please contact the author if you can help with
this.</div></p></li><li><p><div class="SIntrapara"><span style="font-weight: bold">Make your own cable/adapter</span>.  A Web search will turn up many different examples of these that
various people have made.  To categorize these:</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara">Make your own cable/adapter that plugs into the <span style="font-weight: bold">mini-DIN connector</span> that is on most Roombas and on the iRobot Create.
You can find the pinout for this in <a href="http://www.usna.edu/Users/weapsys/esposito/roomba.matlab/Roomba_SCI.pdf"><span style="font-style: italic">iRobot Roomba Serial Command Interface (SCI) Specification</span></a>, in section &ldquo;Physical Connections,&rdquo; on page 2.
Note that this uses 5V TTL logic levels, so you can&rsquo;t just wire it up to an
RS232 port.  Your options for connecting this to a computer include:</div><div class="SIntrapara"><ul><li><p>Convert it to <span style="font-weight: bold">RS232</span>, using a voltage level converter,
and wiring up a 25-pin or 9-pin D-sub connector.</p></li><li><p>Convert it to <span style="font-weight: bold">USB</span>, such as using an FTDI chip.</p></li><li><p>Hook it up directly to 5V <span style="font-weight: bold">I/O pins</span> on a Rasperry Pi, Arduino, or
other low-power computer.  This is more an option if the computer is onboard
the Robot; otherwise you probably want to go to RS232 or USB first.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Make your own cable/adapter that plugs into the <span style="font-weight: bold">Create&rsquo;s Cargo Bay Connector</span>, which is a 25-pin <a href="https://en.wikipedia.org/wiki/D-subminiature">D-sub connector</a> with a pinout that is specific to the
Create.  (Note that the same kind of connector traditionally is used for RS232
and for parallel printer port connectors on IBM PCs, but the connector on the
Create is neither of those.)  The Cargo Bay Connector is documented in
document <a href="http://www.irobot.com/filelibrary/create/Create%2520Manual_Final.pdf"><span style="font-style: italic">iRobot Create Owner&rsquo;s Guide</span></a>, in section &ldquo;Cargo Bay Connector,&rdquo; on page 10.
Note that, in addition to providing a serial interface needed by this package,
the Cargo Bay Connector also provides additional sensor inputs and considerable
power, which could be used to power an onboard adapter or low-power computer.
Options for using the Cargo Bay connector:</div><div class="SIntrapara"><ul><li><p>Build an <span style="font-weight: bold">RS232, USB, or Bluetooth</span> interface for interfacing with an
offboard or onboard PC.  This is an option, but if you&rsquo;re only going to use the
serial interface, you might as well connect to the mini-DIN (see above) rather
than the Cargo Bay Connector, so that your cable/adapter works with most
Roombas rather than just the Create.</p></li><li><p>Build a <span style="font-weight: bold">serial-and-power</span> interface for a Raspberry Pi,
Arduino, or other low-power computer.  We believe there is enough current to
power a Pi plus USB devices like WiFi adapter, in addition to the Create
itself.  This onboard computer could then run your program on itself and/or
provide a WiFi link to offboard computers.</p></li></ul></div></p></li></ul></div></p></li></ul></div><div class="SIntrapara">Note that most of the above options have not yet been tested with
this package, and a small number of them might require modifications to this
package.</div><div class="SIntrapara">The excutive summary on cables/adapaters at the moment is that most
people&rsquo;s educational/hobby project lives would be easier if they can afford an
iRobot Create.  Especially if you can put a Raspberry Pi onboard the Create.
But, with a little work or luck, you can also get an old Roomba hooked up to a
computer for using this package.  And hopefully a hobby-oriented electronics
company will soon make things easier.</div><div class="SIntrapara">If you have any updates to the above information, please contact
the author of this package.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Association List Primer&quot;">17<tt>&nbsp;</tt><a name="(part._.Association._.List._.Primer)"></a>Association List Primer</h3><p><div class="SIntrapara">For returning values from <span class="RktSym">read-roomba-sensors</span>, this package use an <a name="(tech._association._list)"></a><span style="font-style: italic">association list</span> (also known as an <a name="(tech._alist)"></a><span style="font-style: italic">alist</span>), which is an old-school Lisp way of representing small
keyed-accessed sets, among other things.  (In the future, there might be other,
even more efficient, ways to access Roomba sensors from this package, but
alists are a good initial method.)  Since hobbyists and students new to Racket
might be familiar with pairs and lists, but not with alists, here is a quick
intro.</div><div class="SIntrapara">Let&rsquo;s say you received an alist like this:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">read-roomba-sensors</span><span class="hspace">&nbsp;</span><span class="RktPn">#:packet-code</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktSym">result</span></p></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">battery-capacity</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">973</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-charge</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">889</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-temperature</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">30</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-current</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes"><span class="nobreak">-1</span>76</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">battery-voltage</span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">13888</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></div><div class="SIntrapara">If you use the Racket <span class="RktSym">assq</span> procedure alone to look up the alist pair with the key <span class="RktVal">'</span><span class="RktVal">battery-charge</span>, you get the entire pair:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">battery-charge</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(battery-charge<span class="stt"> </span>. 889)</span></td></tr></table></blockquote></div><div class="SIntrapara">As you probably know from prior study of Racket pairs and lists, to
get the right-hand side of the pair, which has the value for the key, you use
the Racket <span class="RktSym">cdr</span> procedure:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">battery-charge</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">889</span></td></tr></table></blockquote></div><div class="SIntrapara">One difficulty is that, if <span class="RktSym">assq</span> doesn&rsquo;t find the key, it will return <span class="RktVal">#f</span> rather than a pair.  So, say that on some Roombas you get a <span class="RktVal">'</span><span class="RktVal">battery-coolness</span> sensor result, but on others you don&rsquo;t.  So, if you try to look up
that key in our example alist:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">battery-coolness</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">#f</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">battery-coolness</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><blockquote><p><span class="RktErr">cdr: contract violation
   expected: pair?
   given: #f</span></p></blockquote></div><div class="SIntrapara">If you want your code to be robust against that, you can use this code pattern of <span class="RktSym">cond</span> and <span class="RktSym">=&gt;</span>, which will give you either the value of the the alist pair for key <span class="RktVal">'</span><span class="RktVal">battery-coolness</span>, or a default value of <span class="RktVal">777</span>:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">cond</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">battery-coolness</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">=&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">cdr</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktVal">777</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">777</span></td></tr></table></blockquote></div><div class="SIntrapara">You can also get fancier, such as adding a helpful error message and moving the code that uses the <span class="RktVal">'</span><span class="RktVal">battery-coolness</span> into a the <span class="RktSym">cond</span>, like so:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">cond</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">battery-coolness</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">=&gt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">battery-coolness</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-style: italic">...CODE-THAT-USES-BATTERY-COOLNESS-VALUE...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">error</span><span class="hspace">&nbsp;</span><span class="RktVal">"Roomba has an uncool battery!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">For most purposes, with Roomba sensor values, you&rsquo;ll only need the
code pattern <span class="RktPn">(</span><span class="RktSym">cdr</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="stt"> </span><span style="font-style: italic">SYMBOL</span><span class="stt"> </span><span style="font-style: italic">ALIST</span><span class="RktPn">)</span><span class="RktPn">)</span>, but <span class="RktSym">cond</span> is there if you need it.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Troubleshooting&quot;">18<tt>&nbsp;</tt><a name="(part._.Troubleshooting)"></a>Troubleshooting</h3><p><div class="SIntrapara">Here are a few troubleshooting tips.</div><div class="SIntrapara">First things first:</div><div class="SIntrapara"><ol><li><p>Ensure that the serial cable or other interface is firmly
attached in all places it could become loose.</p></li><li><p>If you built a serial interface using instructions found
on the Web, be aware that some pinout diagrams for the mini-DIN were published
with pins reversed.  Double-check against different pinouts.</p></li><li><p>If you&rsquo;re connecting to an iRobot Create using the
Command Module, make sure that you follow the boot-time procedures documentd in
the <a href="http://www.irobot.com/filelibrary/pdfs/hrd/create/Command%20Module%20Manual_v2.pdf"><span style="font-style: italic">iRobot Command Module Owners Manual</span></a>.  Also note that the developers of this package have
not yet tested use through the Command Module.</p></li></ol></div><div class="SIntrapara">If the PC&rsquo;s serial port or other interface on the PC side is not
working:</div><div class="SIntrapara"><ol><li><p>Consider whether you have the right device file for your <span class="RktPn">#:device</span> argument.  For example, if you&rsquo;re specifying device <span class="RktVal">"/dev/ttyS0"</span>, maybe the correct device is <span class="RktVal">"/dev/ttyS1"</span>, <span class="RktVal">"/dev/ttyUSB0"</span>, or something else.</p></li><li><p>If you&rsquo;re using a USB interface on the PC side, perhaps
using a USB-to-RS232 adapter with an iRobot RS232-to-Roomba cable, check
whether the USB device is actually recognized by the PC.  On GNU/Linux, you can
use the <span class="stt">lsusb</span> shell command to list recognized USB devices, and you
can also check the <span class="stt">syslog</span> log files for the time that you plugged in the device.</p></li><li><p>If the PC&rsquo;s serial port is an RS232 port on a laptop
dock, consider that a hardware or operating system bug might be causing the
serial port to &ldquo;disappeared&rdquo;.  This has been known to happen with a ThinkPad
T60 plugged into a dock, for example, and the solution in that case is to
reboot the laptop while plugged into the dock.</p></li></ol></div><div class="SIntrapara">If the PC&rsquo;s serial port or other interface on the PC side seems OK,
but the Roomba is still not communicating:</div><div class="SIntrapara"><ol><li><p>On at least some Roomba models (including the 400), the
Clean or Power button should be solid green before the Roomba can be accessed
via this package.  If button is not solid green, try pressing it, in hopes of
it turning solid green.  Be prepared to lift up the Roomba if pressing the
button starts a clean cycle.</p></li><li><p>If the Roomba&rsquo;s Clean or Power button is not solid green
and pressing does not correct that, try removing and reattaching the cable from
the Roomba&rsquo;s serial port.</p></li><li><p>If all else fails, try removing the cable from the
Roomba&rsquo;s mini-DIN, removing the Roomba&rsquo;s battery, waiting a few seconds,
reattaching the Roomba&rsquo;s battery, and finally reattaching the cable to the
Roomba&rsquo;s mini-DIN.</p></li><li><p>Consider that the Roomba is refusing to communicate
because its battery desperately needs charging, even if it appears to have some
charge left.</p></li></ol></div><div class="SIntrapara">Please contact the author of this package with additional tips that
should be mentioned here.</div></p><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Known_Issues&quot;">19<tt>&nbsp;</tt><a name="(part._.Known_.Issues)"></a>Known Issues</h3><ul><li><p>Needs initial testing, with different models.</p></li><li><p>Figure out why DrRacket is prompting for input in the Interactions
pane under some unclear circumstances.</p></li><li><p>Create operations not yet implemented:
Sensors (142) new sensors,
Query List (149),
Stream (148),
Pause/Resume Stream (150)
Script (152, 153, 154),
Wait (155, 156, 157, 158).</p></li><li><p>Add more detailed documentation for sensors, such that the iRobot
manuals are unlikely to be necessary for most purposes.</p></li><li><p>Finish adding support for Create operations.</p></li><li><p>Add support for any ROI features not in SCI, rather than limiting
500/600 series to 2nd generation features.</p></li><li><p>Test use of USB interface of Create Command Module, once we have a
working one.</p></li><li><p>Improve how stdio error messages are handled when calling <span class="stt">/bin/stty</span>.</p></li><li><p>We might be able to do better waking of the Roomba, using RTS.
However, we cannot test this at this time, since, on our test setup at the
moment (Roomba 400, plugged into iRobot brand cable, plugged into RS232 port of
ThinkPad dock), even example code does not wake the Roomba.</p></li><li><p>Any any special support needed for other off-the-shelf Roomba
hardware interfaces, such as those by RoboDynamics.  We are aware that some of
them are reported to need special handling, but we do not presently have use of
them for testing.</p></li><li><p><div class="SIntrapara">A <span class="RktSym">let-roomba-sensors</span> would be nice, so you could do things like this efficiently on
SCI (OI makes it easier):</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">let-roomba-sensors</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wall</span><span class="hspace">&nbsp;</span><span class="RktSym">battery-charge</span><span class="hspace">&nbsp;</span><span class="RktSym">distance</span><span class="hspace">&nbsp;</span><span class="RktSym">angle</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">We have an example but have not coded it yet, til we look more
closely at the different OI specs.  Until then, we expect that the form would
expand to code that looked at the protocol at runtime, and did different
optimizations for SCI, ROI and COI.</div></p></li><li><p>Support a little bit more of Common Music Notation, especially for
meter.</p></li><li><p>Add convenience for compiling and playing songs longer than 16
notes.</p></li><li><p>Test on Mac OS X.</p></li><li><p>Possibly add support for Microsoft Windows.  Especially if Windows
7 and later have filesystem path devices for serial ports.</p></li><li><p>Put Raspberry Pi with WiFi onboard an iRobot Create.  Hook up
development tools so that Roomba programs can run onboard, on the Pi, as well
as offboard on PC (say, in DrRacket for debugging), with the Pi gatewaying the
OI protocol received over SSH WiFi.</p></li></ul><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;History&quot;">20<tt>&nbsp;</tt><a name="(part._.History)"></a>History</h3><ul><li><p><div class="SIntrapara">Version 2:4 &#8212;<wbr></wbr> 2017-01-09</div><div class="SIntrapara"><ul><li><p>Documentation tweak.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:3 &#8212;<wbr></wbr> 2016-02-29</div><div class="SIntrapara"><ul><li><p>Fixed deps, since non-build-time dep on scribble-lib.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:2 &#8212;<wbr></wbr> 2016-02-28</div><div class="SIntrapara"><ul><li><p>Added build-deps.</p></li><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:1 &#8212;<wbr></wbr> 2016-02-25</div><div class="SIntrapara"><ul><li><p>Fixed deps.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 2:0 &#8212;<wbr></wbr> 2016-02-21</div><div class="SIntrapara"><ul><li><p>Moving from PLaneT to the new package system.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 1:4 &#8212;<wbr></wbr> 2013-09-04</div><div class="SIntrapara"><ul><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 1:3 &#8212;<wbr></wbr> 2013-09-02</div><div class="SIntrapara"><ul><li><p>Added documentation section <a href="#%28part._.Association._.List._.Primer%29" data-pltdoc="x">Association List Primer</a>.</p></li><li><p>Documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 1:2 &#8212;<wbr></wbr> 2013-09-01</div><div class="SIntrapara"><ul><li><p>Added sensor support for iRobot Create (aka protocol <span class="RktSym">irobot-coi</span>).</p></li><li><p>Added operations for iRobot Create: <span class="RktSym">start-roomba-demo</span>, <span class="RktSym">stop-roomba-demo</span>, <span class="RktSym">set-roomba-wheels</span>, <span class="RktSym">set-roomba-digital-outputs</span>, <span class="RktSym">set-roomba-pwm-low-side-drivers</span>, <span class="RktSym">send-roomba-ir-byte</span>.</p></li><li><p>Added more documentation for sensors.</p></li><li><p>The default parameter value of <span class="RktSym">current-default-roomba-device</span> has changed on some platforms, from <span class="RktVal">"/dev/ttyS0"</span> to <span class="RktVal">"/dev/ttyUSB0"</span>, since we expect more people will be using a USB-to-RS232 adapter on Linux than a more direct RS232 port.</p></li><li><p>Added exception <span class="RktSym">exn:fail:roomba:unsupported</span>.</p></li><li><p>Documentation tweaks.</p></li><li><p>Title of package changed slightly.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 1:1 &#8212;<wbr></wbr> 2012-08-19</div><div class="SIntrapara"><ul><li><p>Added section <a href="#%28part._.Cables%29" data-pltdoc="x">Cables</a>.  (Thanks to Jens Axel S&#248;gaard for pointing out
the need for this.)</p></li><li><p>Minor documentation tweaks.</p></li></ul></div></p></li><li><p><div class="SIntrapara">Version 1:0 &#8212;<wbr></wbr> 2013-08-18</div><div class="SIntrapara"><ul><li><p>Initial release.  Still needs some initial testing with
various different Roombas, and we are releasing now for that purposes.</p></li></ul></div></p></li></ul><h3 x-source-module="(lib &quot;roomba/roomba.scrbl&quot;)" x-source-pkg="roomba" x-part-tag="&quot;Legal&quot;">21<tt>&nbsp;</tt><a name="(part._.Legal)"></a>Legal</h3><p>Copyright 2013, 2016, 2017 Neil Van Dyke.  This program is Free Software;
you can redistribute it and/or modify it under the terms of the GNU Lesser
General Public License as published by the Free Software Foundation; either
version 3 of the License, or (at your option) any later version.  This program
is distributed in the hope that it will be useful, but without any warranty;
without even the implied warranty of merchantability or fitness for a
particular purpose.  See http://www.gnu.org/licenses/ for details.  For other
licenses and consulting, please contact the author.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>