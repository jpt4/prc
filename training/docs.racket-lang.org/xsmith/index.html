<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Xsmith</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Xsmith</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.How_to_.Install_.Xsmith%29" class="tocviewlink" data-pltdoc="x">How to Install Xsmith</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Xsmith_.Guide%29" class="tocviewlink" data-pltdoc="x">Xsmith Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Xsmith_.Reference%29" class="tocviewlink" data-pltdoc="x">Xsmith Reference</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._running-fuzzers%29" class="tocviewlink" data-pltdoc="x">Xsmith&rsquo;s Bundled Generators (And How to Run Them)</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Acknowledgments%29" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Code_and_.License%29" class="tocviewlink" data-pltdoc="x">Code and License</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Xsmith</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.How_to_.Install_.Xsmith%29" class="tocsubseclink" data-pltdoc="x">How to Install Xsmith</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Xsmith_.Guide%29" class="tocsubseclink" data-pltdoc="x">Xsmith Guide</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._racr%29" class="tocsubseclink" data-pltdoc="x">RACR Overview</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Holes_and_.Choice_.Objects%29" class="tocsubseclink" data-pltdoc="x">Holes and Choice Objects</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._scope-graph%29" class="tocsubseclink" data-pltdoc="x">Scope Graphs</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._.Minimal_.Example%29" class="tocsubseclink" data-pltdoc="x">Minimal Example</a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._.Another_.Small_.Example_.With_.Variables%29" class="tocsubseclink" data-pltdoc="x">Another Small Example With Variables</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Xsmith_.Reference%29" class="tocsubseclink" data-pltdoc="x">Xsmith Reference</a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.Stability%29" class="tocsubseclink" data-pltdoc="x">Stability</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._generated-rules%29" class="tocsubseclink" data-pltdoc="x">Auto-<wbr></wbr>Generated att-<wbr></wbr>rules and choice-<wbr></wbr>rules</a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._.Forms_for_.Defining_a_.Grammar_and_.Its_.Attributes%29" class="tocsubseclink" data-pltdoc="x">Forms for Defining a Grammar and Its Attributes</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>spec-<wbr></wbr>component</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._assemble-spec-components%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">assemble-<wbr></wbr>spec-<wbr></wbr>components</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>to-<wbr></wbr>grammar</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-att-rule%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>att-<wbr></wbr>rule</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-rule%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>choice-<wbr></wbr>rule</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>prop</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">current-<wbr></wbr>hole</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">make-<wbr></wbr>hole</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">make-<wbr></wbr>fresh-<wbr></wbr>node</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._.Custom_.Properties%29" class="tocsubseclink" data-pltdoc="x">Custom Properties</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>property</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>non-<wbr></wbr>inheriting-<wbr></wbr>rule-<wbr></wbr>property</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#%28part._.Scope_.Graph_.Functions%29" class="tocsubseclink" data-pltdoc="x">Scope Graph Functions</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">binding</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>well-<wbr></wbr>formedness-<wbr></wbr>regexp</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>path-<wbr></wbr>greater-<wbr></wbr>than</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.6<tt>&nbsp;</tt></span><a href="#%28part._.Core_.Properties%29" class="tocsubseclink" data-pltdoc="x">Core Properties</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">may-<wbr></wbr>be-<wbr></wbr>generated</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">type-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">fresh</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">choice-<wbr></wbr>weight</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">depth-<wbr></wbr>increase</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._wont-over-deepen%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">wont-<wbr></wbr>over-<wbr></wbr>deepen</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">binder-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">reference-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binding-structure%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">binding-<wbr></wbr>structure</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">strict-<wbr></wbr>child-<wbr></wbr>order?</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">io</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-predicate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">lift-<wbr></wbr>predicate</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-type-~3east-binder-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">lift-<wbr></wbr>type-<wbr></wbr>&gt;ast-<wbr></wbr>binder-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">choice-<wbr></wbr>filters-<wbr></wbr>to-<wbr></wbr>apply</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.7<tt>&nbsp;</tt></span><a href="#%28part._.Types%29" class="tocsubseclink" data-pltdoc="x">Types</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>type-<wbr></wbr>variable</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-variable~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">type-<wbr></wbr>variable?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">can-<wbr></wbr>unify?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">unify!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">base-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-arg-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type-<wbr></wbr>arg-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-return-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type-<wbr></wbr>return-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">product-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">product-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type-inner-type-list%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">product-<wbr></wbr>type-<wbr></wbr>inner-<wbr></wbr>type-<wbr></wbr>list</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-generic-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>generic-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generic-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generic-<wbr></wbr>type-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-type-arguments%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generic-<wbr></wbr>type-<wbr></wbr>type-<wbr></wbr>arguments</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>with</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._any-nominal-record-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">any-<wbr></wbr>nominal-<wbr></wbr>record-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-inners%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>inners</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>definition-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>definition-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>definition-<wbr></wbr>type-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">concretize-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-xsmith-type-constructor-thunks%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>xsmith-<wbr></wbr>type-<wbr></wbr>constructor-<wbr></wbr>thunks</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.8<tt>&nbsp;</tt></span><a href="#%28part._.Debug_.Logging%29" class="tocsubseclink" data-pltdoc="x">Debug Logging</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xd-printf%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xd-<wbr></wbr>printf</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.9<tt>&nbsp;</tt></span><a href="#%28part._.Turning_.Your_.Grammar_.Specification_.Into_a_.Program%29" class="tocsubseclink" data-pltdoc="x">Turning Your Grammar Specification Into a Program</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xsmith-<wbr></wbr>command-<wbr></wbr>line</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xsmith-<wbr></wbr>feature-<wbr></wbr>enabled?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-max-depth%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xsmith-<wbr></wbr>max-<wbr></wbr>depth</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.10<tt>&nbsp;</tt></span><a href="#%28part._.R.A.C.R_.Convenience_.Functions%29" class="tocsubseclink" data-pltdoc="x">RACR Convenience Functions</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fracr-convenience..rkt%29._expr-~3east-list%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">expr-<wbr></wbr>&gt;ast-<wbr></wbr>list</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">node-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parent-<wbr></wbr>node</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._top-ancestor-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">top-<wbr></wbr>ancestor-<wbr></wbr>node</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">node-<wbr></wbr>subtype?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._running-fuzzers%29" class="tocsubseclink" data-pltdoc="x">Xsmith&rsquo;s Bundled Generators (And How to Run Them)</a></td></tr><tr><td><span class="tocsublinknumber">5.1<tt>&nbsp;</tt></span><a href="#%28part._cish%29" class="tocsubseclink" data-pltdoc="x">Cish</a></td></tr><tr><td><span class="tocsublinknumber">5.2<tt>&nbsp;</tt></span><a href="#%28part._schemely%29" class="tocsubseclink" data-pltdoc="x">Schemely</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Acknowledgments%29" class="tocsubseclink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Code_and_.License%29" class="tocsubseclink" data-pltdoc="x">Code and License</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.4</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Xsmith)"></a><a name="(mod-path._xsmith)"></a>Xsmith</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">William Hatch &lt;<a href="mailto:william@hatch.uno">william@hatch.uno</a>&gt;<br/>and Eric Eide &lt;<a href="mailto:eeide@cs.utah.edu">eeide@cs.utah.edu</a>&gt;</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">xsmith</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/xsmith" title="Install this package using `raco pkg install xsmith`"><span class="stt">xsmith</span></a></span></td></tr></table></p><p>Version xsmith 1.0.0 (unknown)</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p>Xsmith is a library for creating fuzz testers, also known as <span style="font-style: italic">fuzzers</span>,
for programming language compilers and interpreters.  In other words, Xsmith is
a library for creating <span style="font-style: italic">random program generators</span>.</p><p>Xsmith implements a domain-specific language (DSL) for defining random program
generators.  The DSL is used to specify a programming language&rsquo;s grammar,
typing rules, and other information that guides generation choices.  Xsmith
also includes utilities for creating a command-line interface for generating a
single program or starting a web server that generates one program per request.</p><p>Xsmith is bundled with some example random program generators that were created
using the library.  If you just want to run them, you can jump ahead to
<a href="#%28part._running-fuzzers%29" data-pltdoc="x">Xsmith&rsquo;s Bundled Generators (And How to Run Them)</a>.</p><p><span style="font-weight: bold">Reporting bugs.</span>
Please send bug reports and fixes to
<a href="mailto:xsmith-bugs@flux.utah.edu">xsmith-bugs@flux.utah.edu</a>.</p><p><span style="font-weight: bold">Getting help.</span>
There is a mailing list,
<a href="mailto:xsmith-dev@flux.utah.edu">xsmith-dev@flux.utah.edu</a>, for
discussing Xsmith.  Visit
<a href="http://www.flux.utah.edu/mailman/listinfo/xsmith-dev">the
xsmith-dev list management website</a> to subscribe.  To post messages to the
list, you must first subscribe to the list.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;How_to_Install_Xsmith&quot;">2<tt>&nbsp;</tt><a name="(part._.How_to_.Install_.Xsmith)"></a>How to Install Xsmith</h3><p>First, install Racket.  If your operating system&rsquo;s package manager doesn&rsquo;t have a package or you want a fresher version, <a href="https://download.racket-lang.org/">download it</a>.</p><p>Then run <span class="stt">raco pkg install xsmith</span>.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Xsmith_Guide&quot;">3<tt>&nbsp;</tt><a name="(part._.Xsmith_.Guide)"></a>Xsmith Guide</h3><p>Xsmith uses <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>, an attribute grammar library, in its implementation, and some knowledge of <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> is necessary when using Xsmith.</p><p>To create a fuzzer with Xsmith, users create a specification by combining <span style="font-style: italic">spec components</span>, defined with <span class="RktSym">define-spec-component</span>.
Each spec component can have portions of grammar as well as <span style="font-style: italic">properties</span> added to them (using <span class="RktSym">add-to-grammar</span> and <span class="RktSym">add-prop</span>).
The grammar and properties are used to generate a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> grammar, attributes for the grammar, and <span style="font-style: italic">choice objects</span>, which guide AST generation.</p><p>Program generation starts by generating an AST hole for a given grammar production.
Generation continues by filling holes with concrete AST nodes (which may introduce new holes as child nodes).
Each time a hole is to be filled, the grammar specification is used to determine potential replacements.
For example, in a grammar with addition and subtraction expressions, an expression hole may be replaced by an addition or subtraction node.
A choice object is created for each legal replacement.
Choice objects have methods (choice-rules) which aid in choosing a concrete replacement.
Some of these methods act as predicates to filter out choices that are not legal in a particular context, such as choices that introduce more holes when the maximum tree depth has been reached.
The <span class="RktSym">choice-weight</span> property defines a method which determines the relative probability of each choice being chosen.
The <span class="RktSym">fresh</span> property defines a method which determines how the choice is instantiated as a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> node.
Additional methods may be defined as helpers.
Choice objects have access to the <span class="RktSym">current-hole</span>, so they may query <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes in method bodies.
Choice object classes follow the same hierarchy as the grammar, so method inheritance for choice objects is similar to attribute inheritance for <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> nodes.</p><p><a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes and choice object methods may be added directly with <span class="RktSym">add-att-rule</span> and <span class="RktSym">add-choice-rule</span>, respectively, but many are defined indirectly by various Xsmith properties.
Properties allow users to specify various attributes and choice rules in a more declarative fashion.</p><p>The primary intended use case of Xsmith is differential compiler/interpreter testing.
Therefore Xsmith takes pains to avoid producing programs that rely on commonly unspecified behaviors, such as the order of evaluation of function or operator arguments.
Because the language-agnostic analysis within Xsmith is quite conservative, there are many valid programs that will not be generated.
However, Xsmith makes it easy to create a fuzzer that obeys such rules without much language-specific work.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;racr&quot;">3.1<tt>&nbsp;</tt><a name="(part._racr)"></a>RACR Overview</h4><p>RACR is a library for Reference Attribute Grammars.  Xsmith&rsquo;s DSL defines a RACR grammar specification as well as various attributes.  The attributes are queried to determine how to generate the AST.</p><p>RACR caches the results of attribute queries and keeps track of the nodes accessed for any attribute.  When nodes used in an attribute computation are changed, future queries to that attribute are re-computed.</p><p>Users can specify new RACR attributes for Xsmith generators, but they should use <span class="RktSym">add-att-rule</span> or <span class="RktSym">add-prop</span> from Xsmith rather than using RACR functions directly.  In expressions evaluated in the context of RACR attributes (att-rules) or choice rules, RACR attributes may be queried.</p><p>The main RACR APIs of interest are:</p><p>Functions for querying the AST:</p><ul><li><p>att-value</p></li><li><p>ast-child</p></li><li><p>ast-children</p></li><li><p>ast-parent</p></li></ul><p>Xsmith provides a function which generates a complete AST, but users can also perform AST rewrites after initial program generation.  Relevant RACR functions for performing AST rewrites include:</p><ul><li><p>perform-rewrites</p></li></ul><p>Full RACR documentation is <a href="https://github.com/christoff-buerger/racr/blob/master/racr/documentation/contents.md">here</a>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Holes_and_Choice_Objects&quot;">3.2<tt>&nbsp;</tt><a name="(part._.Holes_and_.Choice_.Objects)"></a>Holes and Choice Objects</h4><p>Hole nodes are <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> AST nodes.
For every node type in the grammar, a hole node is created as a subclass of it, inheriting all of its <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes.
A hole can be recognized by the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_is-hole?</a> attribute.</p><p><div class="SIntrapara">Consider the following (partial) grammar:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">add-to-grammar</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random</span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>When a fresh AdditionExpression is created, it will include two Expression hole nodes.
When the generator gets to those holes, a choice object is created for each subclass of Expression (including Expression itself unless it is disabled with the <span class="RktSym">may-be-generated</span> property).
The choice objects have types corresponding to LiteralInt and AdditionExpression, and therefore may have different implementations for various choice methods.
The choice objects all have access to the Expression hole (through <span class="RktSym">current-hole</span>), but while choice objects have access to their specialized choice method implementations, the hole is of type Expression, and so all <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes (att-rules) that may be queried are specialized only as far as Expression, not to LiteralInt or AdditionExpression.</p><p>Note that hole node types are created for every type in the grammar (including LiteralInt and AdditionExpression), but more specialized holes are only used if the grammar specifies that a node&rsquo;s child must be specifically that kind of expression, or if a custom <span class="RktSym">fresh</span> implementation uses <span class="RktSym">make-hole</span> with the specific kind of expression.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;scope-graph&quot;">3.3<tt>&nbsp;</tt><a name="(part._scope-graph)"></a>Scope Graphs</h4><p>Xsmith uses the language-independent resolution algorithm of scope graphs.</p><p>The theory of scope graphs is described in the paper &#8220;A Theory of Name Resolution with Extended Coverage and Proofs&#8221;, (available at <a href="https://researchr.org/publication/NeronTVW15"><span class="url">https://researchr.org/publication/NeronTVW15</span></a>).</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Minimal_Example&quot;">3.4<tt>&nbsp;</tt><a name="(part._.Minimal_.Example)"></a>Minimal Example</h4><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">#lang racket/base</span></p></td></tr><tr><td><p><span class="stt">(require xsmith racr racket/string)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(define-spec-component arith)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(add-to-grammar</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">arith</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Program #f (Expression)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Expression #f ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop may-be-generated #f]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[LiteralInt Expression ([v = (random 100)])]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Addition Expression ([l : Expression] [r : Expression])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">;; The default weight is 10.</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop choice-weight 20])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(define int (base-type 'int))</span></p></td></tr><tr><td><p><span class="stt">(add-prop arith type-info</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[Program [int (&#955; (n t) (hash 'Expression int))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[LiteralInt [int (&#955; (n t) (hash))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[Addition [int (&#955; (n t) (hash 'l int 'r int))]])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(add-att-rule</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">arith ugly-print</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Program (&#955; (n) (att-value 'ugly-print (ast-child 'Expression n)))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[LiteralInt (&#955; (n) (number-&gt;string (ast-child 'v n)))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Addition (&#955; (n) (format "(~a + ~a)"</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(att-value 'ugly-print (ast-child 'l n))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(att-value 'ugly-print (ast-child 'r n))))])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">;; This line defines `arithmetic-generate-ast`.</span></p></td></tr><tr><td><p><span class="stt">(assemble-spec-components arithmetic arith)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(define (arithmetic-generate-and-print)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(displayln (att-value 'ugly-print (arithmetic-generate-ast 'Program))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(xsmith-command-line arithmetic-generate-and-print</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:comment-wrap (&#955; (lines)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(string-join</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(map (&#955; (x) (format "// ~a" x)) lines)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n")))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Another_Small_Example_With_Variables&quot;">3.5<tt>&nbsp;</tt><a name="(part._.Another_.Small_.Example_.With_.Variables)"></a>Another Small Example With Variables</h4><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">#lang racket/base</span></p></td></tr><tr><td><p><span class="stt">(require xsmith racr racket/pretty racket/string)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(define-spec-component arith)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(add-to-grammar</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">arith</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Definition #f (name type Expression)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop binder-info (name type definition)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Expression #f ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop may-be-generated #f]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[LetStar Expression ([definitions : Definition *]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[sideEs : Expression * = (random 2)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Expression)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop strict-child-order? #t]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[VariableReference Expression (name)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop reference-info (read name)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[SetBangRet Expression (name Expression)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop reference-info (write name)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[LiteralInt Expression ([v = (random 100)])]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Addition Expression ([es : Expression * = (+ 1 (random 5))])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:prop choice-weight 50])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(define int (base-type 'int))</span></p></td></tr><tr><td><p><span class="stt">(add-prop arith type-info</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[Definition [(fresh-type-variable) (&#955; (n t) (hash 'Expression t))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[LetStar [(fresh-type-variable)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(&#955; (n t) (hash 'definitions (fresh-type-variable)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">'sideEs (fresh-type-variable)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">'Expression t))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[LiteralInt [int (&#955; (n t) (hash))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[VariableReference [(fresh-type-variable) (&#955; (n t) (hash))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[SetBangRet [(fresh-type-variable) (&#955; (n t) (hash 'Expression t))]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[Addition [int (&#955; (n t) (hash 'es t))]])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(add-att-rule</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">arith to-s-exp</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[LetStar</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(&#955; (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">`(let* (,@(map (&#955; (d)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">`[,(string-&gt;symbol (ast-child 'name d))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">,(att-value 'to-s-exp</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ast-child 'Expression d))])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ast-children (ast-child 'definitions n))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">,@(map (&#955; (c) (att-value 'to-s-exp c))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ast-children (ast-child 'sideEs n)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">,(att-value 'to-s-exp (ast-child 'Expression n))))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[LiteralInt (&#955; (n) (ast-child 'v n))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[VariableReference (&#955; (n) (string-&gt;symbol (ast-child 'name n)))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[SetBangRet (&#955; (n) `(begin (set! ,(string-&gt;symbol (ast-child 'name n))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">,(att-value 'to-s-exp</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ast-child 'Expression n)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">,(string-&gt;symbol (ast-child 'name n))))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[Addition (&#955; (n) `(+ ,@(map (&#955; (c) (att-value 'to-s-exp c))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(ast-children (ast-child 'es n)))))])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(assemble-spec-components arithmetic arith)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(define (arithmetic-generate-and-print)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(parameterize ([current-xsmith-type-constructor-thunks (list (&#955; () int))])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(pretty-print (att-value 'to-s-exp (arithmetic-generate-ast 'LetStar))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(current-output-port)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(xsmith-command-line arithmetic-generate-and-print</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#:comment-wrap (&#955; (lines)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(string-join</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(map (&#955; (x) (format ";; ~a" x)) lines)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n")))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Xsmith_Reference&quot;">4<tt>&nbsp;</tt><a name="(part._.Xsmith_.Reference)"></a>Xsmith Reference</h3><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Stability&quot;">4.1<tt>&nbsp;</tt><a name="(part._.Stability)"></a>Stability</h4><p>Xsmith does not currently promise API stability between versions.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;generated-rules&quot;">4.2<tt>&nbsp;</tt><a name="(part._generated-rules)"></a>Auto-Generated att-rules and choice-rules</h4><p>Many attributes and choice-rules are auto-generated by Xsmith:</p><p><span style="font-weight: bold">att-rules</span></p><ul><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_is-hole?</span></p><p>Accepts no arguments other than the node to call it on.
Returns <span class="RktVal">#t</span> when called on a hole node, otherwise returns <span class="RktVal">#f</span>.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Within the context of a choice method, this will return #t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_is-hole?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_find-descendants</span></p><p>Accepts the node to call it on, then a predicate.
Returns a list of all descendant nodes that satisfy the predicate.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This will return a list of all addition and subtraction nodes.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">It will not return any nodes that are subtypes, though!</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_find-descendants</span><span class="hspace">&nbsp;</span><span class="RktSym">ast-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._member%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">member</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-node-type</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">AdditionExpression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">SubtractionExpression</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_find-a-descendant</span></p><p>Accepts the node to call it on, then a predicate.
Like <span class="RktVal">'</span><span class="RktVal">xsmith_find-descendants</span>, but it only returns one.
If no descendant matching the predicate is found, it returns <span class="RktVal">#f</span>.
It is mostly useful if you just want to know if there is any descendant matching a type, such as to determine whether to do an analysis based on the presence or absence of some feature.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_binding</span>
Accepts the node to call it on and optionally a boolean <span class="stt">require-binder-or-reference</span> flag (defaults to <span class="RktVal">#t</span>).
If the given node is a reference, as determined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> property, then the reference is resolved and a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValLink" data-pltdoc="x">binding</a></span> object is returned.
If the given node is a binder, as determined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span> property, then its <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValLink" data-pltdoc="x">binding</a></span> object is returned.
For any other node, <span class="RktVal">#f</span> is returned when <span class="stt">require-binder-or-reference</span> is false, otherwise an error is raised.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This raises an exception if `n` is not a binder or reference.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_binding</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">If `n` is not a binder or a reference, return #f.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_binding</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The main use of this is to do analyses where you need to look up the declaration node that a reference refers to.
The <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValLink" data-pltdoc="x">binding</a></span> object returned by this function contains a reference to the binder node.
When resolving references, the <a href="#%28part._scope-graph%29" data-pltdoc="x">scope graph model</a> is used.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_ast-depth</span></p><p>Accepts the node it is called on, and no other arguments.
Returns the tree depth at that node.
Determined by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxLink" data-pltdoc="x">depth-increase</a></span>.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_ast-depth</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></p></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_type</span>
This attribute takes no arguments (besides a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> node) and returns the type (<span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span>) of that node.
Note that the type of the node may be a not-yet-concretized type variable.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_type</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></p></blockquote></li></ul><p><span style="font-weight: bold">choice-rules</span></p><ul><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_get-reference!</span>
This is a choice method that can be used when creating a reference node.
If no binding of the appropriate type for the current node is in scope, this method will cause a fresh appropriate definition to be lifted into a node that can hold definitions.
It returns a <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span> of the reference name.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">-&gt; (fresh-type-variable int bool)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This will return the name of a variable in scope</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">that has type int or type bool.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">It may make a new definition node to do that.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">xsmith_get-reference!</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Note that the reference is <span style="font-style: italic">choosing</span> one of the possible types (via <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span>).
Probably you are using this in a <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> method to initialize a node.
So you will want to put that name in the node.</p><p>Generally you don&rsquo;t need to do this manually, however.
Nodes with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> property marked will automatically have their name fields initialized, and nodes with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span> property marked will automatically have their name and type fields initialized.</p></li></ul><p>Node type names, attribute names, and choice rule names are just symbols, so they are not hygienic.
The names of symbols used or defined by the xsmith library start with <span class="stt">xsmith</span> or <span class="stt">_xsmith</span>, so don&rsquo;t tread on those namespaces.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Forms_for_Defining_a_Grammar_and_Its_Attributes&quot;">4.3<tt>&nbsp;</tt><a name="(part._.Forms_for_.Defining_a_.Grammar_and_.Its_.Attributes)"></a>Forms for Defining a Grammar and Its Attributes</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-spec-component))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-spec-component</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">component-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines a spec component.  Spec components include information about a language grammar and attributes, and can be combined to generate an xsmith fuzzer.  You add grammar productions with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, you add properties with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span>, and you can add att-rules and choice-rules with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-att-rule%29%29" class="RktStxLink" data-pltdoc="x">add-att-rule</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-rule%29%29" class="RktStxLink" data-pltdoc="x">add-choice-rule</a></span>, respectively.  Spec components are combined with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._assemble-spec-components%29%29" class="RktStxLink" data-pltdoc="x">assemble-spec-components</a></span>.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Now use add-to-grammar, add-prop, etc.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Then use my-spec-component in assemble-part-specs.</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._assemble-spec-components))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._assemble-spec-components%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">assemble-spec-components</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-properties</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-properties</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:properties</span><span class="hspace">&nbsp;</span><span class="RktVar">list-of-properties</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Combines spec components and generates a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> specification.</div></p><p>Defines <span class="RktVar">spec-name</span> as a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> specification.</p><p>Defines <span class="stt">&lt;spec-name&gt;-generate-ast</span> as a function.  The function accepts the name of a grammar production as a symbol and produces a random tree starting from a fresh node of that nonterminal.  Essentially, given the name of the top-level program node, this function generates a random program.</p><p>Various att-rules are automatically defined within the spec, see <a href="#%28part._generated-rules%29" data-pltdoc="x">Auto-Generated att-rules and choice-rules</a>.</p><p>Properties (defined with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span>) are used to derive more <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> att-rules as well as Xsmith choice-rules.
Each property may have a transformer function that alters other properties, att-rules, or choice-rules.
All properties referenced within a spec-component are used to generate att-rules and choice-rules, as well as any properties specified in the <span class="RktVar">maybe-properties</span> list.
Unless values for that property have also been specified within a spec component, properties in the <span class="RktVar">maybe-properties</span> list will only be able to generate rules based on the default value for the property.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._assemble-spec-components%29%29" class="RktStxLink" data-pltdoc="x">assemble-spec-components</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">#:properties</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxLink" data-pltdoc="x">depth-increase</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._wont-over-deepen%29%29" class="RktStxLink" data-pltdoc="x">wont-over-deepen</a></span><span class="hspace">&nbsp;</span><span class="RktSym">introduces-scope</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-other-spec-component</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Now `my-spec` is defined as a RACR spec,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and `my-spec-generate-ast` is defined as a function which</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">accepts a symbol argument representing the name of an AST node.</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-to-grammar))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-to-grammar</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">grammar-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">grammar-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">node-name</span><span class="hspace">&nbsp;</span><span class="RktVar">parent-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">field</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-prop</span><span class="hspace">&nbsp;</span><span class="RktVar">..</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">parent-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">identifier</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#f</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">field</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">name/type-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">name/type-id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-type-id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-kleene-star</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-init-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-type-id</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktVar">type-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-kleene-star</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">*</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-init-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">=</span><span class="hspace">&nbsp;</span><span class="RktVar">init-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-prop</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-id</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-val</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds grammar productions to <span class="RktVar">spec-component</span>.</div></p><p><span class="RktVar">node-name</span> will be the name of the grammar production in <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>.
<span class="RktVar">parent-name</span> is either the name of the parent grammar production or <span class="RktVal">#f</span>.</p><p>Names for the node and fields are limited to alphabetic characters.  You may want to use camelCase style names since kebab-style or snake_style names due to this limitation.</p><p>Fields are then specified.
Each nonternimal inherits all fields of its parent nodes.
A field has a name, a type, an optional kleene star, and an optional initialization expression.
The type of each field is the name of the nonterminal that it must be or <span class="RktVal">#f</span> for fields that may contain arbitrary Racket values.
A field name may be the same as the type, in which case the type does not need to be specified.
If a type is not specified and the name does not match the name of a nonterminal, then the type #f is used.
If the optional kleene star is supplied, the field will be a list field.
If a kleene star is provided for a non-false type, the name and type must be specified separately.</p><p>The <span class="RktVar">init-expr</span> for each field specifies a default value for the field.
When a node is generated, each <span class="RktVar">init-expr</span> is evaluated unless a non-default value is supplied to the generating function.
If no <span class="RktVar">init-expr</span> is supplied, the following defaults are used:</p><ul><li><p>For false types, <span class="RktVal">#f</span>.</p></li><li><p>For nonterminal types, a hole node of the appropriate type.</p></li><li><p>For fields with a kleene star, an empty list.</p></li></ul><p>For nodes with a kleene star, <span class="RktVar">init-expr</span> may return a list or a number.
If a number is provided, the default value is a list of that many of the non-kleene-star default value.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktVar">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._random%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SumExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">addends</span><span class="hspace">&nbsp;</span><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVar">*</span><span class="hspace">&nbsp;</span><span class="RktVar">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._random%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The example defines a piece of a grammath that includes some kinds of expressions.
When a <span class="stt">LiteralInt</span> expression is generated, it&rsquo;s <span class="stt">v</span> field will be populated with a random number.
Since the <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._random%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">random</a></span> expression is evaluated for each fresh <span class="stt">LiteralInt</span>, they will (probably) receive different values for <span class="stt">v</span>.
When an <span class="stt">AditionExpression</span> node is generated, it will be populated with an <span class="stt">Expression</span> hole node for each of its <span class="stt">left</span> and <span class="stt">right</span> fields.
When a fresh <span class="stt">SumExpression</span> is generated, its <span class="stt">addends</span> field will be populated with a list of zero to four <span class="stt">Expression</span> hole nodes.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-att-rule))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-att-rule%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-att-rule</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">rule-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">nonterminal-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-function</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attribute rule to the spec-component.
The format for each rule is similar to that required by <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>&rsquo;s <span class="stt">ag-rule</span> form.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-att-rule%29%29" class="RktStxLink" data-pltdoc="x">add-att-rule</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">interp</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">interp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">interp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">right</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SumExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._apply%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">apply</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">interp</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">addends</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-choice-rule))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-rule%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-choice-rule</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">rule-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">nonterminal-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-function</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds an Xsmith choice-rule to the spec-component.</div></p><p>Xsmith creates a choice object class for each node type in the specification grammar, following the same class hierarchy that AST nodes themselves do.  Choice objects are created every time Xsmith fills in a hole node.  One choice object is created for every node type that is legal to use in filling the hole.  Choice objects are then filtered according to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span> property, and then the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span> property of the remaining choice objects is used to determine the probability of choosing each one.  When a choice object is selected, its <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property is used to generate a new AST node of its type.  If all choices are eliminated, an exception is raised with a message stating which filter step invalidated each potential choice.</p><p>Choice rules are methods on the choice objects.  Some choice rules are used by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span> to filter choices.  Other choice rules may be used by those filters or in the body of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property as helper methods.  While most information about the AST and the current choice are probably computed using att-rules, information about choosing a specific node type to fill in an abstract hole (such as an expression hole which may be filled with many different types of expressions) are computed using choice rules.</p><p>Choice rules are methods in Racket&rsquo;s class system and therefore have the <span class="RktSym">this</span> macro available for use in their bodies to access other methods (eg. with the <span class="RktSym">send</span> macro).
Choice rules also have the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span> macro available within their body so that they can query attributes of the <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> AST being elaborated (eg. with <span class="stt">att-value</span> to access att-rules and <span class="stt">ast-parent</span> to inspect other nodes in the AST).</p><p>Since choice rules are methods in Racket&rsquo;s <span class="RktSym">class</span> system, they must be defined with a literal <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span> (with no parameter for the implicit <span class="RktSym">this</span> argument).  If a method needs to modify state (such as to cache the computation of available references of the appropriate type), I would normally recommend the &#8220;let-over-lambda&#8221; pattern, but that is not allowed in this case.  To make up for this, I recommend using <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-weak-hasheq%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">make-weak-hasheq</a></span> to hold the state, using the <span class="RktSym">this</span> object as a key.</p><p><div class="SIntrapara">This is a poor example, but it demonstrates how att-rules and choice-rules can be used together to help make choices:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-rule%29%29" class="RktStxLink" data-pltdoc="x">add-choice-rule</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-weight-helper</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">my-helper-att-rule</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">20</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">this</span><span class="hspace">&nbsp;</span><span class="RktSym">my-weight-helper</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-prop))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-prop</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-name</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">prop-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">nonterminal-name</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-value</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds property values to the spec-component.</div></p><p>Since property transformers are macros that may accept arbitrary domain-specific syntax, the grammar of prop-value varies for each property.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._current-hole))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">current-hole</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Within the body of a choice-rule, <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span> returns the hole node being considered for replacement.
This allows choice-rules to query att-rule attributes of the grammar.</div></p><p>Elsewhere it raises a syntax error.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._make-hole))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">make-hole</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hole-type-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Within the context of a spec component (eg. in the body of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-att-rule%29%29" class="RktStxLink" data-pltdoc="x">add-att-rule</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, etc), <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span> is a function to generate a hole of a given type.</div></p><p><div class="SIntrapara">For example, to make a hole node that will eventually be replaced with some type of <span class="stt">Expression</span> node:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="RktPn">)</span></p></blockquote></div></p><p>This function is essentially used by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span> as the default value for grammar fields with nonterminal types that lack an init-expr.</p><p>Outside of a spec component context, it raises a syntax error.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._make-fresh-node))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">make-fresh-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">node-type-expression</span><span class="hspace">&nbsp;</span><span class="RktVar">optional-field-value-dict</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Within the context of a spec component (eg. in the body of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-att-rule%29%29" class="RktStxLink" data-pltdoc="x">add-att-rule</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, etc), <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span> is a function to generate a fresh node of the given type.
Construction of the new node is guided by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property.</div></p><p><div class="SIntrapara">For example, to generate a fresh <span class="stt">AdditionExpression</span> node, specifying values for some of its fields:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">AdditionExpression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">LiteralInt</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Custom_Properties&quot;">4.4<tt>&nbsp;</tt><a name="(part._.Custom_.Properties)"></a>Custom Properties</h4><p>Properties are used to create domain-specific languages or terse declarative syntax for specifying att-rules and choice-rules.
Custom properties are probably only useful for shared infrastructure for multiple languages (perhaps with the exception of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="RktStxLink" data-pltdoc="x">define-non-inheriting-rule-property</a></span>).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-property))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-dups</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-reads</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-rewrites</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-appends</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-transformer</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-dups</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:allow-duplicates?</span><span class="hspace">&nbsp;</span><span class="RktVar">literal-bool</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-reads</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:reads</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-arg-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-rewrites</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:rewrites</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-arg-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-appends</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:appends</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-arg-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-transformer</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">transformer-arg-spec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">att-rule</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">choice-rule</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">grammar</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a property for use with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span>.</div></p><p>Properties can have a transformer function that produce att-rules, choice-rules, or other property values.
Property transformers can read the values set for the property by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span>, and optionally the values of other properties as well.
Not all properties must have a transformer &ndash; some properties may just be a single place to store information that is used by (multiple) other properties.</p><p>The transformer function accepts a dictionary mapping grammar node names (as symbols) to the syntax objects from the right-hand-side of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span> uses for each property that it reads.
The transformer function must return a list of dictionaries mapping grammar node names (as symbols) to syntax objects for the properties, att-rules, and choice-rules that it writes.</p><p>Property transformers are run during <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._assemble-spec-components%29%29" class="RktStxLink" data-pltdoc="x">assemble-spec-components</a></span> in an order determined by the read/write dependencies among the properties.
Appending goes before rewriting, which goes before reading.</p><p>If a property appends (using the #:appends keyword) to a property or rule, its return dictionary will be appended to the existing dictionary for that property/rule.
This allows a property or rule to be specified in part by the property that appends and in part by another property or the user.
If an appended rule (or property that disallows multiple values) ends up with two values for any node, an error is raised.</p><p>If a property rewrites (using the #:rewrites keyword) to a property or rule, its return dictionary replaces any previous dictionary for that property/rule.
Rewriting a property also automatically implies reading that property.
A property or rule may only be rewritten by one property transformer.</p><p><div class="SIntrapara">Example showing the arguments and return type needed by transformers:
The transformer argument order is its own property, then #:reads dictionaries in the order declared, then #:rewrites dictionaries in the order declared.
The transformer return order is #:rewrites dictionaries in the order declared then #:writes dictionaries in the order declared.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-property</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:reads</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:rewrites</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:appends</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">att-rule</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">choice-rule</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transformer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">this-prop-dict</span><span class="hspace">&nbsp;</span><span class="RktSym">prop-a-dict</span><span class="hspace">&nbsp;</span><span class="RktSym">prop-b-dict</span><span class="hspace">&nbsp;</span><span class="RktSym">prop-c-dict</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">compute output dictionaries...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dict-for-c</span><span class="hspace">&nbsp;</span><span class="RktSym">dict-for-d</span><span class="hspace">&nbsp;</span><span class="RktSym">dict-for-e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The syntax object value for a property can be anything, since property transformers define the grammar and semantics of properties.</p><p>The syntax object value for <span class="stt">att-rules</span> and <span class="stt">choice-rules</span> should be a syntax object specifying a function (IE a <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span>).
<span class="stt">att-rules</span> may be any syntax that evaluates to a function (so you may return an identifier that references a function or an expression that computes a function such as let-over-lambda), but choice-rule syntax is provided to Racket&rsquo;s <span class="RktSym">class</span> macro, which requires literal <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span> forms.</p><p>Dictionaries may or may not contain an entry for each nonterminal in the grammar.
A dictionary may even be empty.</p><p>In addition to nonterminals, each dictionary may include a mapping for the value <span class="RktVal">#f</span>, which will define a default value used for the (super secret) parent node that <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._assemble-spec-components%29%29" class="RktStxLink" data-pltdoc="x">assemble-spec-components</a></span> defines.
If nothing is specified for #f, att-rules and choice-rules will have a default which errors, providing a helpful error message.</p><p>If the <span class="RktPn">#:allow-duplicates?</span> argument is supplied and is <span class="RktVal">#t</span>, then <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span> may be used more than once for the property for the same node, and the syntax object in the dictionary for the property will be a syntax list of the syntax objects specified in the various <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span> calls.
But by default only one use of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span> is allowed per property per node type, and the syntax object in the dict is the single syntax object from the one call.</p><p>Here is a simple example that basically desugars straight to an att-rule with a default:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxLink" data-pltdoc="x">strict-child-order?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:appends</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">att-rule</span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith_strict-child-order?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transformer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">this-prop-info</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith_strict-child-order?-info</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash-set</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Fhash%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">for/hash</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._in-dict%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">in-dict</a></span><span class="hspace">&nbsp;</span><span class="RktSym">this-prop-info</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-parse</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">b:boolean</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith_strict-child-order?-info</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">The rationale for this example property is to:
</div><div class="SIntrapara"><ul><li><p>Allow values to be specified by just <span class="RktVal">#t</span> or <span class="RktVal">#f</span>, rather than <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">#t</span><span class="RktPn">)</span></p></li><li><p>To implicitly provide a default value to the root node (<span class="RktVal">#f</span>).</p></li></ul></div></p><p>For more realistic examples of properties, see the file <span class="stt">private/core-properties.rkt</span> in the Xsmith implementation.
Generally they are big, hairy macros.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-non-inheriting-rule-property))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-non-inheriting-rule-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">property-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">rule-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-rule-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">default-value</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-transformer</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-rule-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">default-value</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVar">default-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-transformer</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-func</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a property that generates an att-rule or a choice-rule that does NOT inherit its implementation from its superclass.</div></p><p><span class="RktVar">rule-type</span> must be either <span class="stt">att-rule</span> or <span class="stt">choice-rule</span>.</p><p><span class="RktVar">rule-name</span> defaults to <span class="RktVar">property-name</span>, but you can make it give the rule a different name than the property.</p><p><span class="RktVar">default-expr</span> is the default value of the property.  Any nonterminal that does not have a different value specified gets this one.</p><p><span class="RktVar">transformer-func</span> is an optional transformer to transform the value.
It is not called with a dictionary like the transformers of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span>, but rather it receives each value individually.
This allows a small amount of sugar.
Note that the value supplied as the <span class="RktVar">default-expr</span> is also transformed by the <span class="RktVar">transformer-func</span> when it is supplied.
When no <span class="RktVar">transformer-func</span> is supplied, values are passed through literally.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="RktStxLink" data-pltdoc="x">define-non-inheriting-rule-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">some-bool-flag</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">att-rule</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-parser</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">a-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">B</span><span class="hspace">&nbsp;</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktSym">B</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">a-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">some-bool-flag</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Normally <span class="stt">B</span> would inherit a method from <span class="stt">A</span> when none was specified for it.
But in this case it inherits the default (<span class="RktVal">#f</span>).
When a user tries <span class="stt">(att-value 'some-bool-flag &lt;node-of-type-B&gt;)</span> it will return <span class="RktVal">#f</span>, not <span class="RktVal">#t</span>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Scope_Graph_Functions&quot;">4.5<tt>&nbsp;</tt><a name="(part._.Scope_.Graph_.Functions)"></a>Scope Graph Functions</h4><p>This section describes the API to the <a href="#%28part._scope-graph%29" data-pltdoc="x">Scope Graph</a> model of binding.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xsmith/main..rkt)._binding-def-or-param))"></a><a name="(def._((lib._xsmith/main..rkt)._binding-type))"></a><a name="(def._((lib._xsmith/main..rkt)._binding-ast-node))"></a><a name="(def._((lib._xsmith/main..rkt)._binding-name))"></a><a name="(def._((lib._xsmith/main..rkt)._binding~3f))"></a><a name="(def._((lib._xsmith/main..rkt)._struct~3abinding))"></a><a name="(def._((lib._xsmith/main..rkt)._binding))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValDef RktValLink" data-pltdoc="x">binding</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">ast-node</span><span class="stt"> </span><span class="RktSym">type</span><span class="stt"> </span><span class="RktSym">def-or-param</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">ast-node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">ast-node?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">def-or-param</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">definition</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parameter</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Struct for binding information of nodes that create bindings.</div></p><p>Notably this is returned by the att-rule <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_binding</a>.</p><p>The <span class="RktSym">ast-node</span> field is the grammar node containing the definition of <span class="RktSym">name</span>.
The <span class="RktSym">def-or-param</span> field is there to distinguish names that are bound as function parameters vs names that are bound as (local or global) definitions.</p><p>Probably all you need to do with this, though, is get the <span class="RktSym">name</span> field and stuff it in the name field of your definition nodes in the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> method.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._current-well-formedness-regexp))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-well-formedness-regexp</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-well-formedness-regexp</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#px"rp*i?d"</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">For most languages you probably don&rsquo;t need to fuss with this.</div></p><p>When the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_binding</a> attribute is used or when Xsmith searches for a valid reference with <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_get-reference</a>, this regexp determines valid scope-graph resolution paths.
The path elements (reference, parent, import, definition) are turned into characters (r, p, i, and d respectively).
If the path from reference to definition matches this regexp, it is valid.
If two definitions have the same name and paths from a reference to both definitions are valid, the definition that is in scope for the reference is determined by <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="RktValLink" data-pltdoc="x">current-path-greater-than</a></span>.</p><p>Because Xsmith doesn&rsquo;t currently support import elements at all, modifying this regexp is somewhat of a moot point.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._current-path-greater-than))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-path-greater-than</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-path-greater-than</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">comparator</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">comparator</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">If there are two valid resolution paths (determined by <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="RktValLink" data-pltdoc="x">current-well-formedness-regexp</a></span>) for a name, this comparator determines which path is chosen.
The comparator must return a non-false value if the left operand is greater than the right, otherwise <span class="RktVal">#f</span>
The greatest path is chosen.</div></p><p>By default the comparator walks down the paths, comparing each element.
A path is greater than another if its first differing element is greater.
From least to greatest, path elements are <span class="RktVal">'</span><span class="RktVal">reference</span>, <span class="RktVal">'</span><span class="RktVal">parent</span>, <span class="RktVal">'</span><span class="RktVal">import</span>, <span class="RktVal">'</span><span class="RktVal">declaration</span>.</p><p>For most languages you probably don&rsquo;t need to fuss with this.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Core_Properties&quot;">4.6<tt>&nbsp;</tt><a name="(part._.Core_.Properties)"></a>Core Properties</h4><p>These properties are available for specification on Xsmith grammars.
Many of them define or modify the behavior of core functionality, such as <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> modifying how fresh program nodes are instantiated, or <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> defining a language&rsquo;s type rules.</p><p>Many are optional, but for any language at all you probably need to use <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span>.
Additionally, for any language with variables you need <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span>.
Next, the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property will likely become necessary for a few fields that Xsmith can&rsquo;t infer.
Then the most important of the truly optional properties is likely <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._may-be-generated))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">may-be-generated</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Acceptable values for this property are <span class="RktVal">#t</span> or <span class="RktVal">#f</span>, and the default is <span class="RktVal">#t</span>.</div></p><p>If may-be-generated is false, the node is not added to the list of possibile choices to replace an appropriate AST hole.
It is useful to set it to false for abstract node types or for specialized node types that are meant to be swapped in only after a full tree is generated, such as by a later analysis to determine validity of an unsafe operation.
This property is NOT inherited by subclasses.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Expression is abstract and should not be instantiated,</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">only AdditionExpression, SubtractionExpression, etc.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Only safe addition expressions should be generated,</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">but maybe a later pass after generation swaps some</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">safe addition expressions for unsafe ones after analysis.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">UnsafeAdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._type-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">type-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property is used to specify the type system used by the generator.
You should specify a type system even for dynamically typed languages so that programs don&rsquo;t just crash with dynamic type errors.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">float</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">EqualityExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">bool</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type%29%29" class="RktValLink" data-pltdoc="x">function-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">arg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-arg-type%29%29" class="RktValLink" data-pltdoc="x">function-type-arg-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-return-type%29%29" class="RktValLink" data-pltdoc="x">function-type-return-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The property is two armed.</p><p>The first part is the type (or partially-constrained type variable) that the given node can inhabit.  The expression given is evaluated fresh every time a node is type checked or considered for generation.</p><p>The second part is a function that takes a node, its type, and must return a dictionary mapping its children nodes to types.  The dictionary keys may be the node objects of the node&rsquo;s children OR the symbol of the field name the child inhabits.  For kleene-star children, use their node unless they all should receive the same type.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._fresh))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">fresh</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property determines how fresh nodes are constructed (by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span> function).</div></p><p>Acceptable values for this property are expressions which produce a <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">dict?</a></span> object, or expressions which produce a function of type (-&gt; dict? dict?).  Keys of the dictionary must be field names of the node being generated.  The values in the dictionary are used to fill node fields of the appropriate name.  Any field whose name is not in the dictionary will be filled by evaluating the default init-expr defined in the grammar (via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>).</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._random%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Make AdditionExpressions always be generated with a literal 7 argument.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>This is useful for fields that must be determined together.  For examlpe, a function call needs the function name and the number of arguments to be chosen together rather than independently.</p><p>As with all choice-rules, <span class="RktSym">this</span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span> are available for use in expressions, which you may want to do for eg. accessing available bindings or mutable information connected to the choice object.</p><p>If the result is a procedure instead of a dictionary, that procedure must accept and return a dictionary.  It is called with a dictionary that is empty unless the node being created is the result of lifting a definition.  In that case it will have the appropriate name and type fields with the name and type chosen by the lifting mechanism.  In the case of lifting a definition, the name and type fields in the return dictionary are ignored.  This procedure option is allowed because your fresh expression may need access to the name or type to determine the values of other fields.  If a definition node only has a name and type field then a fresh property is unnecessary when lifting, and if lifting is the only way you generate definitions then fresh properties or initializers for definition nodes are unnecessary.</p><p>If the value for a field (IE values inside the result dictionary) is a procedure, it will be called with 0 arguments.  This allows the fresh property to provide a default value that is not evaluated when <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span> is called with an appropriate value.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._choice-weight))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">choice-weight</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property determines the probability that different kinds of nodes will be chosen.  When choices have been filtered (based on <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span>), one of the remaining choices is chosen at random with probability (choice-weight / sum-of-choice-weights).</div></p><p>The expression provided as the choice weight will be evaluated in the context of a method call, so <span class="RktSym">this</span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span> are available.</p><p>Choice weights should be positive integer values.  The default weight is 10 unless set explicitly.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The default choice weight."</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Generate more AdditionExpressions"</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MultiplicationExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">15</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Generate fewer SumExpressions"</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SumExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._depth-increase))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">depth-increase</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property defines the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_ast-depth</a> non-inheriting att-rule.</div></p><p>The property accepts an expression which much evaluate to a function of one argument (the <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> AST node) which returns a truthy value for nodes which increase the depth of the AST and #f otherwise.  The default is <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">#t</span><span class="RktPn">)</span>.
This property is NOT inherited by subclasses.</p><p>This is useful to allow node re-use.  For example, the body of an <span class="stt">if</span> or <span class="stt">for</span> statement might be a block and have the same semantics, but you might want a block inside an <span class="stt">if</span> to only be considered a depth increase of 1, not 2.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">no-depth-if-body-is-block</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="RktValLink" data-pltdoc="x">node-subtype?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Block</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxLink" data-pltdoc="x">depth-increase</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">IfStatement</span><span class="hspace">&nbsp;</span><span class="RktSym">no-depth-if-body-is-block</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ForStatement</span><span class="hspace">&nbsp;</span><span class="RktSym">no-depth-if-body-is-block</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._wont-over-deepen))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._wont-over-deepen%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">wont-over-deepen</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The default for this property is probably what you want, so probably just be sure to add this to the extra #:properties flag of <span class="RktSym">assemble-part-specs</span>.</div></p><p>But if you want to set it:</p><p>The property accepts expressions which will evaluate to booleans (IE anything but only #f is false...), which are evaluated if the choice is made at the point where the AST is at it maximum depth.  A true value means that the choice is acceptable, false otherwise.  The default is computed by checking whether a node includes AST-node-typed fields.  If it does not it is considered atomic and therefore acceptable to choose when the AST is already at its maximum depth.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._binder-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">binder-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property is used to mark nodes that define bindings.
The property consists of a length-3 list.
The first two are field names, one for the name of the field that stores the binding name, one for the name of the field that stores the binding type.
The last field is either <span class="stt">definition</span> or <span class="stt">parameter</span>, reflecting whether the binding is a function parameter.
This is used by some Xsmith analyses about higher order values.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Reference</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">definition</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._reference-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">reference-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property marks nodes that are reference nodes.  The argument for the property is a list containing:</div></p><ul><li><p>The identifier <span class="stt">read</span> or the identifier <span class="stt">write</span>, indicating whether the reference reads or writes the variable</p></li><li><p>The name of the field that stores the reference name (as an identifier).</p></li></ul><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Reference</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._binding-structure))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binding-structure%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">binding-structure</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property is used on nodes that can have binders as children.
It determines the visibility of those binders to their siblings.
Options are <span class="RktVal">'</span><span class="RktVal">serial</span> (like <span class="stt">let*</span> in scheme), <span class="RktVal">'</span><span class="RktVal">parallel</span> (like <span class="stt">let</span> in scheme), and <span class="RktVal">'</span><span class="RktVal">recursive</span> (like <span class="stt">letrec</span> in scheme).</div></p><p>If the property is not specified, <span class="RktVal">'</span><span class="RktVal">serial</span> is assumed and used as a default.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letstar</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letrec</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binding-structure%29%29" class="RktStxLink" data-pltdoc="x">binding-structure</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parallel</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Letstar we can leave blank if we want because serial is the default.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letrec</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">recursive</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._strict-child-order~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">strict-child-order?</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Specifies that a node&rsquo;s children are guaranteed by the language to have a strict evaluation order.
The default is false.
This property is used to determine whether nodes have a dependency in their read/write/io effect conditions.
(Those conditions are set by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="RktStxLink" data-pltdoc="x">io</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> properties.)</div></p><p>Setting this property is unnecessary, but using it allows more liberal use of references, mutation, and io effects.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxLink" data-pltdoc="x">strict-child-order?</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Most languages have some sort of sequential construct, like a block</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Block</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._io))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">io</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Used to specify that a node has some kind of IO effect, such as printing or reading a volatile variable.</div></p><p>Until and unless I make something better, this should also be used for any form that mutates some kind of higher-order object.
For example, setting a field in a mutable record.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="RktStxLink" data-pltdoc="x">io</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Print</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SetRecordField</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._lift-predicate))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-predicate%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">lift-predicate</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property specifies a predicate for whether a definition of a given type can be lifted to a node.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letstar</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letrec</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-predicate%29%29" class="RktStxLink" data-pltdoc="x">lift-predicate</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Allow any definition type to be lifted into the top level of a program.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Lifting a definition to Lambda's formal parameter list would require changing all calls.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Allow local variables to be lifted, except make all functions top-level.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._lift-type-~3east-binder-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-type-~3east-binder-type%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">lift-type-&gt;ast-binder-type</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">If you have more than one binding node in your language (IE via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span>) you must specify this property.
This property should be defined once for the base node (#f).
It is a mapping from the type of a desired definition (eg. int, float, int -&gt; int, ...) to the AST node type (eg. VariableDefinition, FunctionDefinition).
This is important when different kinds of definitions use different AST nodes.
Otherwise it is just boilerplate...</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">VariableDefinition</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">FunctionDefinition</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">Body</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-type-~3east-binder-type%29%29" class="RktStxLink" data-pltdoc="x">lift-type-&gt;ast-binder-type</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">FunctionDefinition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">VariableDefinition</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._choice-filters-to-apply))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property accepts a syntax list of choice-rule names to use as a filter for the node type.  Generally this should be set on the greatest super node type (or <span class="RktVal">#f</span> if there is no explicit super node type in your grammar).  Each choice-rule in the list is called on the choice object with no arguments.  Each rule that returns <span class="RktVal">#f</span> rules the node out as a choice for filling in a hole.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-custom-filter-choice-rule</span><span class="hspace">&nbsp;</span><span class="RktSym">my-other-filter-choice-rule</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Some core methods are always applied in addition to this list, such as the method defined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span> property.
If you don&rsquo;t make custom filtering rules you don&rsquo;t need to specify this property.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Types&quot;">4.7<tt>&nbsp;</tt><a name="(part._.Types)"></a>Types</h4><p>These type constructors and other functions are largely useful for specifying the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> property.</p><p>While there are various predicates for different types, at any point in type checking you might actually have a type variable instead of a concrete type.
So if you want to check if you have a particular type (and maybe deconstruct it), you should maybe create an instance of the type you are interested in, check if it <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span>, then <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ing it if you want to deconstruct it.
Note that if you do <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span> a type variable, that unification needs to be consistent between multiple runs of type checking (since it runs multiple times as the tree is constructed).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for types.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._fresh-type-variable))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-type-variable</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a fresh type variable.  If given no arguments it is unconstrained and can unify with any type.  Arguments can be provided, in which case the type variable is constrained to be one of the types given.
In the optional arguments, only one function type is allowed.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Unconstrained</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">float</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._type-variable~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-variable~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">type-variable?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for type variables.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._can-unify~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">can-unify?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span><span class="RktVar">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether two types can be unified without actually unifying them.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._unify!))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">unify!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span><span class="RktVar">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Unifies two types.  This mutates type variables so that they match other variables or types going forward.</div></p><p>If unification fails an exception is raised.  Right now a failure to unify might mean that type variables are left in a bad state, so code generation should just give up at that point.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._base-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">base-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a base type.  Base types with the same name are the same.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg-type</span><span class="hspace">&nbsp;</span><span class="RktVar">return-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">return-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a function type.
For multi-argument functions, use a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span> for the argument type.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for function types.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type-arg-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-arg-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type-arg-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the argument type.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type-return-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-return-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type-return-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the return type.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._product-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">product-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">types</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">types</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">types?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a product type (tuple).  If <span class="RktVar">types</span> is <span class="RktVal">#f</span>, the length of the tuple is unspecified, and it can be <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ed with a product type of any length.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._product-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">product-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for product types.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._product-type-inner-type-list))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type-inner-type-list%29%29" class="RktValDef RktValLink" data-pltdoc="x">product-type-inner-type-list</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type~3f%29%29" class="RktValLink" data-pltdoc="x">product-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the list of types in the product-type, or <span class="RktVal">#f</span> for a product-type with a length that is still unspecified.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-generic-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-generic-type%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-generic-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">type-argument</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Used to create generic types.</div></p><p>This form defines a constructor <span class="RktVar">name</span>, a predicate <span class="RktVar">name</span><span class="stt">?</span>, and one accessor for each type-argument <span class="RktVar">name</span><span class="stt">-</span><span class="RktVar">type-argument</span> a la <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">struct</a></span>.</p><p>Each instance of a generic type can be unified with other instances of the same generic.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-generic-type%29%29" class="RktStxLink" data-pltdoc="x">define-generic-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">list-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-type</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">list-type?</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-type-arguments%29%29" class="RktValLink" data-pltdoc="x">generic-type-type-arguments</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">(list int)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">list-type-type</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">int</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._generic-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">generic-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns true when <span class="RktVar">t</span> is a generic type.
Not very useful, since you probably want to know if it is an instance of a specific generic.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._generic-type-name))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-name%29%29" class="RktValDef RktValLink" data-pltdoc="x">generic-type-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the name of a generic type.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._generic-type-type-arguments))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-type-arguments%29%29" class="RktValDef RktValLink" data-pltdoc="x">generic-type-type-arguments</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the inner types of a generic type as a list.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for nominal record types.</div></p><p>Partially specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>s are created with <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type-with</a></span>.
Fully specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>s are created by using <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span> on a partially specified one.
Rather than making them manually, simply rely on Xsmith&rsquo;s definition-lifting mechanism to create appropriate fully-specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>s.</p><p>When a partially defined <span class="RktSym">nominal-record-type</span> is <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ed with a fully defined <span class="RktSym">nominal-record-type</span>, the partially defined one is mutated to become the same as the fully defined one.
When two partially defined <span class="RktSym">nominal-record-type</span>s are unified together, an error is raised.</p><p>Every node in a language grammar that stands for a <span class="RktSym">nominal-record-type</span> constructor, accessor, or mutator must include a reference to a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span> containing the <span class="RktSym">nominal-record-type</span> being used.</p><p>The reason for this is that nominal types must be defined in the program.
<span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span>s are necessary because the lookups of these type names are a different type than uses of the record type that the name is bound to.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-grammar</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">VariableReference</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">StructReference</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fieldname</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">structdefref</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">VariableReference</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">structval</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-prop%29%29" class="RktStxLink" data-pltdoc="x">add-prop</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-grammar</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">StructReference</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">type-with-field</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type-with</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fieldname</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">structval</span><span class="hspace">&nbsp;</span><span class="RktSym">type-with-field</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">structdefref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">type-with-field</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type-with))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type-with</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">fieldname</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">fieldtype</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fieldname</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fieldtype</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a partially-specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.
Use it to specify that you want a record that contains a certain type.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._any-nominal-record-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._any-nominal-record-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">any-nominal-record-type</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Creates a completely unconstrained <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.
It will unify with any fully constrained <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type-name))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-name%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Getter for the name of a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type-inners))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-inners%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type-inners</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">dict?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Getter for the inner type dictionary.
If you use this on a partially-specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>, you will get an incomplete dictionary.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-definition-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructor.
See note in <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span> for how it is used.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-definition-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-definition-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for nominal record definition types constructed with <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-definition-type-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-definition-type-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Getter for the <span class="RktSym">nominal-record-type</span> inside a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._concretize-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">concretize-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a fully concrete (no type variables) type that <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span> with <span class="RktVar">t</span>.</div></p><p>This function can be useful if you want to generate a random type.  But beware!  You should probably NOT generate random types unless you also store them in the grammar node that represents that type.  The type-checking code defined in the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> property can be run many times for each node, so a node that randomly chooses its type will not be stable.  Because the type algorithm imperatively unifies types, this causes mayhem.  Don&rsquo;t do it.</p><p>Note that to use this function you must parameterize <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-xsmith-type-constructor-thunks%29%29" class="RktValLink" data-pltdoc="x">current-xsmith-type-constructor-thunks</a></span>.  Probably in the <span class="stt">generate-and-print</span> function passed to <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._current-xsmith-type-constructor-thunks))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-xsmith-type-constructor-thunks%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-xsmith-type-constructor-thunks</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-xsmith-type-constructor-thunks%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-xsmith-type-constructor-thunks</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk-list</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk-list</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This needs to be parameterized for <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span>, which is needed in code dealing with variable definition and reference.
It should consist of a list of thunks that each produce a fully concrete type when called.</div></p><p>The <span class="stt">generate-and-print</span> function passed to <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span> needs to parameterize this.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Debug_Logging&quot;">4.8<tt>&nbsp;</tt><a name="(part._.Debug_.Logging)"></a>Debug Logging</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xd-printf))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xd-printf%29%29" class="RktValDef RktValLink" data-pltdoc="x">xd-printf</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">format-string</span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">format-string</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">printf</a></span>, but it prints to a buffer that is output when an exception is raised during program generation.</div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Turning_Your_Grammar_Specification_Into_a_Program&quot;">4.9<tt>&nbsp;</tt><a name="(part._.Turning_.Your_.Grammar_.Specification_.Into_a_.Program)"></a>Turning Your Grammar Specification Into a Program</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xsmith-command-line))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValDef RktValLink" data-pltdoc="x">xsmith-command-line</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">generate-and-print-func</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:comment-wrap</span><span class="hspace">&nbsp;</span><span class="RktVar">comment-wrap</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:features</span><span class="hspace">&nbsp;</span><span class="RktVar">features</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:default-max-depth</span><span class="hspace">&nbsp;</span><span class="RktVar">default-max-depth</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">generate-and-print-func</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">comment-wrap</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">features</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">default-max-depth</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">number?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This function parses the current command-line arguments for xsmith fuzzers.  It is basically to be used in the main function of a fuzzer.
Based on options supplied, it may print a help message and terminate the program, generate a single program, or start a web server to generate many programs.</div></p><p><span class="RktVar">generate-and-print-func</span> must be a function that generates and prints a single program.  It is called within <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span> with the random seed parameterized according to command-line options (and for the web server reset and incremented for each call), and with all xsmith-options parameterized according to the command line.  The <span class="RktVar">generate-and-print-func</span> needs to parameterize <span class="RktSym">current-type-thunks-for-concretization</span> if your language is to support variable definitions and references.</p><p><span class="RktVar">comment-wrap</span> takes a list of strings which contain info about the generated program, such as the command line used to generate it and the random seed number.  It should return a string representing those lines commented out.  Such as the following, assuming the "#" character is the line-comment character in your language:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-join</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"# ~a"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">lines</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktVar">features</span> takes a list of lists containing a feature name (as a symbol) and a default value (as a boolean), and optionally a list of documentation strings.
Each feature will be included in the command-line options as <span class="stt">--with-&lt;feature-name&gt;</span>.
Documentation strings will be displayed in the <span class="stt">--help</span> text, one per line.
The values of these features is available via <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="RktValLink" data-pltdoc="x">xsmith-feature-enabled?</a></span>.</p><p><div class="SIntrapara">The command-line options given by <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span> are:
</div><div class="SIntrapara"><ul><li><p><span class="stt">--help</span> &ndash; see all command-line options.  The <span class="stt">--help</span> list will automatically stay up to date, unlike this documentation.</p></li><li><p><span class="stt">--server &lt;true-or-false&gt;</span> &ndash; whether to run the web server.  Defaults to false.</p></li><li><p><span class="stt">--server-port &lt;port-number&gt;</span> &ndash; Port to use when running server.  Defaults to 8080.</p></li><li><p><span class="stt">--server-ip &lt;ip-address&gt;</span> &ndash; Listen for connections to &lt;ip-address&gt;.  Use <span class="stt">false</span> to accept connections from all the machine&rsquo;s addresses.  Defaults to <span class="stt">127.0.0.1</span>.</p></li><li><p><span class="stt">--seed</span> &ndash; Random seed for program generation.  Defaults to whatever Racket does to initialize randomness normally.</p></li><li><p><span class="stt">--output-file &lt;filename&gt;</span> &ndash; Outputs to &lt;filename&gt; instead of standard output when not used with <span class="stt">--server</span>.</p></li><li><p><span class="stt">--max-depth &lt;n&gt;</span> &ndash; Maximum depth of the generated program tree.</p></li><li><p><span class="stt">--version</span> &ndash; prints the version info of xsmith and exits.</p></li><li><p><span class="stt">--with-&lt;feature&gt; &lt;bool&gt;</span> &ndash; enables or disables generator-specific features, where <span class="stt">&lt;feature&gt;</span> is replaced with concrete feature names.</p></li></ul></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xsmith-feature-enabled~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">xsmith-feature-enabled?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">feature</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">feature</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the value set by the user via <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span> for the given feature.
The feature name must have been supplied to the #:features argument of <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span>, or an error will be raised.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xsmith-max-depth))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-max-depth%29%29" class="RktValDef RktValLink" data-pltdoc="x">xsmith-max-depth</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">number?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the maximum tree generation depth as set by the user via <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-command-line%29%29" class="RktValLink" data-pltdoc="x">xsmith-command-line</a></span>.</div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;RACR_Convenience_Functions&quot;">4.10<tt>&nbsp;</tt><a name="(part._.R.A.C.R_.Convenience_.Functions)"></a><a name="(mod-path._xsmith/racr-convenience)"></a>RACR Convenience Functions</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=7.4" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._xsmith%2Fracr-convenience%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">xsmith/racr-convenience</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/xsmith" title="Install this package using `raco pkg install xsmith`"><span class="stt">xsmith</span></a></span></td></tr></table></p><p>These are a group of convenience functions around <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>.
They are not necessary, and some may not be the best choices.
But I have found them a little more convenient than using certain <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> APIs directly.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/racr-convenience..rkt)._expr-~3east-list))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fracr-convenience..rkt%29._expr-~3east-list%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">expr-&gt;ast-list</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">length-expression</span><span class="hspace">&nbsp;</span><span class="RktVar">field-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Creates an <span class="RktSym">ast-list-node?</span> containing a list of length <span class="RktVar">length-expression</span>.
For each element of the list, <span class="RktVar">field-expression</span> is evaluated again.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._node-type))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">node-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the symbol of the type of n, or #f if n is not a proper non-bud, non-list <span class="RktSym">ast-node?</span>.</div></p><p>Wrapper for <span class="RktSym">ast-node-type</span> that returns false rather than erroring when it gets bud nodes or list nodes...</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._parent-node))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValDef RktValLink" data-pltdoc="x">parent-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Wrapper for ast-parent that returns #f rather than erroring when the given node doesn&rsquo;t have a parent.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._top-ancestor-node))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._top-ancestor-node%29%29" class="RktValDef RktValLink" data-pltdoc="x">top-ancestor-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Calls <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span> until it reaches the last parent, and returns it.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._node-subtype~3f))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">node-subtype?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/7.4/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=7.4" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Wrapper for <span class="RktSym">ast-subtype?</span> that returns #f rather than erroring when the given node is a bud, list, or non-node.</div></p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;running-fuzzers&quot;">5<tt>&nbsp;</tt><a name="(part._running-fuzzers)"></a>Xsmith&rsquo;s Bundled Generators (And How to Run Them)</h3><p>When xsmith is installed as a Racket package, executables for the bundled generators are placed in your Racket package <span class="stt">bin</span> directory.
Usually this directory is <span class="stt">$HOME/.racket/racket-&lt;version&gt;/bin</span> on Linux, maybe <span class="stt">$HOME/Library/Racket/&lt;version&gt;/bin</span> on normal MacOS installs, and maybe <span class="stt">/usr/local/bin</span> for MacOS Homebrew installs.</p><p>These fuzzers can be run on the command line to generate a single program or as an http server that generates one program per request.</p><p>Command-line options for bundled Xsmith generators are all the same, and provided by <span class="RktSym">xsmith-command-line</span>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;cish&quot;">5.1<tt>&nbsp;</tt><a name="(part._cish)"></a>Cish</h4><p>Cish is a C program generator made with the Xsmith library.  It has co-evolved with Xsmith, and is essentially the reference Xsmith program generator.</p><p>The executable for Cish is called <span class="stt">xsmith-cish</span>.  Additionally, Cish can be run with the command <span class="stt">racket -l xsmith/cish --</span> (the final <span class="stt">--</span> causes further flags to be parsed by cish and not by Racket).</p><p>The command-line options available in Cish are:</p><ul><li><p><span class="stt">--help</span> &ndash; see all command-line options.  The <span class="stt">--help</span> list will automatically stay up to date, unlike this documentation.</p></li><li><p><span class="stt">--server &lt;true-or-false&gt;</span> &ndash; whether to run the web server.  Defaults to false.</p></li><li><p><span class="stt">--server-port &lt;port-number&gt;</span> &ndash; Port to use when running server.  Defaults to 8080.</p></li><li><p><span class="stt">--server-ip &lt;ip-address&gt;</span> &ndash; Listen for connections to &lt;ip-address&gt;.  Use <span class="stt">false</span> to accept connections from all the machine&rsquo;s addresses.  Defaults to <span class="stt">127.0.0.1</span>.</p></li><li><p><span class="stt">--seed</span> &ndash; Random seed for program generation.  Defaults to whatever Racket does to initialize randomness normally.</p></li><li><p><span class="stt">--output-file &lt;filename&gt;</span> &ndash; Outputs to &lt;filename&gt; instead of standard output when not used with <span class="stt">--server</span>.</p></li><li><p><span class="stt">--max-depth &lt;n&gt;</span> &ndash; Maximum depth of the generated program tree.</p></li><li><p><span class="stt">--version</span> &ndash; prints the version info of xsmith and exits.</p></li><li><p><span class="stt">--with-&lt;feature&gt; &lt;bool&gt;</span> &ndash; enables or disables generator-specific features, where <span class="stt">&lt;feature&gt;</span> is replaced with concrete feature names.</p></li></ul><p>Cish supports the following features for the <span class="stt">--with-&lt;feature&gt;</span> flags:</p><ul><li><p><span class="stt">int</span> &ndash; defaults to #t</p></li><li><p><span class="stt">float</span> &ndash; defaults to #t</p></li><li><p><span class="stt">addition</span> &ndash; defaults to #t</p></li><li><p><span class="stt">subtraction</span> &ndash; defaults to #t</p></li><li><p><span class="stt">multiplication</span> &ndash; defaults to #t</p></li><li><p><span class="stt">division</span> &ndash; defaults to #t</p></li><li><p><span class="stt">modulus</span> &ndash; defaults to #t</p></li><li><p><span class="stt">comparisons</span> &ndash; defaults to #t</p></li><li><p><span class="stt">if-expression</span> &ndash; defaults to #t</p></li><li><p><span class="stt">if-statement</span> &ndash; defaults to #t</p></li><li><p><span class="stt">loop-statement</span> &ndash; defaults to #t</p></li><li><p><span class="stt">null-statement</span> &ndash; defaults to #t</p></li><li><p><span class="stt">structs</span> &ndash; defaults to #t</p></li><li><p><span class="stt">volatile</span> &ndash; defaults to #t</p></li><li><p><span class="stt">unsafe-math/range</span> &ndash; defaults to #f</p></li></ul><p>To compile cish output, you need to include Csmith&rsquo;s runtime directory in your header path to get safe_math.h.</p><p>eg.</p><p><span class="stt">xsmith-cish &gt; cish-output.c &amp;&amp; gcc -I $CSMITH_DIR/runtime -o cish-output cish-output.c</span></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;schemely&quot;">5.2<tt>&nbsp;</tt><a name="(part._schemely)"></a>Schemely</h4><p>The executable for Schemely is called <span class="stt">xsmith-schemely</span>.  Additionally, Schemely can be run with the command <span class="stt">racket -l xsmith/schemely --</span> (the final <span class="stt">--</span> causes further flags to be parsed by cish and not by Racket).</p><p>The command-line options available in Schemely are:</p><ul><li><p><span class="stt">--help</span> &ndash; see all command-line options.  The <span class="stt">--help</span> list will automatically stay up to date, unlike this documentation.</p></li><li><p><span class="stt">--server &lt;true-or-false&gt;</span> &ndash; whether to run the web server.  Defaults to false.</p></li><li><p><span class="stt">--server-port &lt;port-number&gt;</span> &ndash; Port to use when running server.  Defaults to 8080.</p></li><li><p><span class="stt">--server-ip &lt;ip-address&gt;</span> &ndash; Listen for connections to &lt;ip-address&gt;.  Use <span class="stt">false</span> to accept connections from all the machine&rsquo;s addresses.  Defaults to <span class="stt">127.0.0.1</span>.</p></li><li><p><span class="stt">--seed</span> &ndash; Random seed for program generation.  Defaults to whatever Racket does to initialize randomness normally.</p></li><li><p><span class="stt">--output-file &lt;filename&gt;</span> &ndash; Outputs to &lt;filename&gt; instead of standard output when not used with <span class="stt">--server</span>.</p></li><li><p><span class="stt">--max-depth &lt;n&gt;</span> &ndash; Maximum depth of the generated program tree.</p></li><li><p><span class="stt">--version</span> &ndash; prints the version info of xsmith and exits.</p></li><li><p><span class="stt">--with-&lt;feature&gt; &lt;bool&gt;</span> &ndash; enables or disables generator-specific features, where <span class="stt">&lt;feature&gt;</span> is replaced with concrete feature names.</p></li></ul><p>Schemely currently has no features for the <span class="stt">--with-&lt;feature&gt;</span> flags.</p><p>At the time of writing, Schemely really just supports Racket.  At some future point it should generate portable Scheme code.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Acknowledgments&quot;">6<tt>&nbsp;</tt><a name="(part._.Acknowledgments)"></a>Acknowledgments</h3><p>This material is based upon work supported by the National Science
Foundation under Grant Number 1527638.
Any opinions, findings, and conclusions or recommendations expressed in this
material are those of the author(s) and do not necessarily reflect the views of
the National Science Foundation.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Code_and_License&quot;">7<tt>&nbsp;</tt><a name="(part._.Code_and_.License)"></a>Code and License</h3><p>The code is available
<a href="https://gitlab.flux.utah.edu/xsmith/xsmith">at the University of
Utah Flux Research Group&rsquo;s GitLab server</a>.</p><p>Xsmith is Copyright (c) 2016&ndash;2019 The University of Utah.</p><p>Xsmith is distributed under the following license, which is often called
the &ldquo;BSD License.&rdquo;</p><p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p><ul><li><p>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.</p></li><li><p>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</p></li></ul><p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &ldquo;AS IS&rdquo;
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;7.4&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;7.4&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>